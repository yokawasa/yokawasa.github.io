[{"content":" Preface In this article, Iâ€™d like to introduces Finched Rails CLI that makes it a breeze to try out Rails without installing anything but Finch. Finch is an OSS CLI for building, running, and publishing Linux containers create by AWS. As long as you have Finch, you can quick start a Rails app only by copying and pasting a few commands. Finched Rails CLI is a fork of Docked Rails CLI and simply a Finch version of it.\nNOTE: As of Jan 2023, Finch only supports macOS (on all Mac CPU architectures). For its future supportability of any other architectures, please watch Finch repo\nWhy I created Finched Rails CLI? It\u0026rsquo;s very simple. I don\u0026rsquo;t currenlty use Docker Desktop for managing Linux containers on my Desktop for its complexity and high resource consuming resason. I use Finch instead for it.\nQuickstart Please install Finch if you don\u0026rsquo;t have on your desktop\nbrew install --cask finch Then copy and paste these below into your terminal:\nfinch volume create ruby-bundle-cache alias finched=\u0026#39;finch run --rm -it -v ${PWD}:/rails -v ruby-bundle-cache:/bundle -p 3000:3000 --entrypoint \u0026#34;\u0026#34; ghcr.io/yokawasa/rails/cli\u0026#39; Now you\u0026rsquo;re ready to start develop Rails app using finched, the alias you\u0026rsquo;ve just created.\nLet\u0026rsquo;s create a Rails project named weblog and start the Rails server as follows:\nfinched rails new weblog cd weblog finched rails generate scaffold post title:string body:text finched rails db:migrate finched rails server Your Rails app is running, and you can check it on http://localhost:3000/posts.\nopen http://localhost:3000/posts That\u0026rsquo;s it!\nEnjoy developing Rails app with Finch!\n","permalink":"https://unofficialism.info/posts/finched-rails-cli/","summary":"Preface In this article, Iâ€™d like to introduces Finched Rails CLI that makes it a breeze to try out Rails without installing anything but Finch. Finch is an OSS CLI for building, running, and publishing Linux containers create by AWS. As long as you have Finch, you can quick start a Rails app only by copying and pasting a few commands. Finched Rails CLI is a fork of Docked Rails CLI and simply a Finch version of it.","title":"Finched Rails CLI makes it a breeze to try out Rails withough installing anything but Finch"},{"content":"Yoichi Kawasaki Software Engineer, NoOps Practitioner, loving ğŸ§– ğŸº â›º\nBio Yoichi Kawasaki (å·å´ åº¸å¸‚ in Japanese) is currently a tech lead site reliability engineer at ZOZO, inc. He is responsible for leading ZOZOTOWN microservice platform SRE team and delivering service reliability. Prior to joining ZOZO, inc., he worked as a solutions architect at Microsoft and responsible for leading technical engagements to win based on solutions leveraging the Microsoft Azure and OSS with a specialization in cloud native application architecture and development. Prior to Microsoft, he worked as a software engineer at Yahoo! JAPAN and engaged with development of many large distributed sytems. He has a BBA degree from the University of Georgia, Athens GA.\nMy recent publications and talks can be found at this page\nLinks Codes on GitHub Tweets on Twitter Profile on LinkedIn Slides on SpeakerDeck, Slideshare Articles on this Blog, Qitta Email: yokawasa [at] gmail.com ","permalink":"https://unofficialism.info/about/","summary":"Yoichi Kawasaki Software Engineer, NoOps Practitioner, loving ğŸ§– ğŸº â›º\nBio Yoichi Kawasaki (å·å´ åº¸å¸‚ in Japanese) is currently a tech lead site reliability engineer at ZOZO, inc. He is responsible for leading ZOZOTOWN microservice platform SRE team and delivering service reliability. Prior to joining ZOZO, inc., he worked as a solutions architect at Microsoft and responsible for leading technical engagements to win based on solutions leveraging the Microsoft Azure and OSS with a specialization in cloud native application architecture and development.","title":"About"},{"content":"I presented on Apri 28th (April 29th JST): \u0026ldquo;Accelerating ZOZOTOWN Modernization with Istio\u0026rdquo; at IstioCon 2022. It was an awesome experience for me to present for the global technology conference like IsitoCon.\nâ›µï¸Istio is a synonym of acceleration \u0026amp; modernization. Register for #IstioCon to learn about \u0026quot;Accelerating ZOZOTOWN Modernization process with #Istio\u0026quot; by @yokawasa ğŸ¤“ğŸ‘‰ https://t.co/SWyXAsfqcO #Istio #CloudNative #ServiceMesh pic.twitter.com/BNyeLsAVHI\n\u0026mdash; Istio (@IstioMesh) April 25, 2022 You can find the slides for my presentation: https://speakerdeck.com/yokawasa/accelerating-zozotown-modernization-with-istio\nAbout the session It\u0026rsquo;s about an application modernization of ZOZOTOWN using Istio. ZOZOTOWN is the largest fashion online shopping website in Japan run by ZOZO (https://corp.zozo.com/en/). It was launched in 2004, implimented as monoliths, and became a big fat monolith application built upon onprem as it grew. In last 3 years they have worked on ZOZOTOWN modernization project that they call â€˜ZOZOTOWN replaceâ€™ where they achived gradual migration to kubernetes-based microservice architecture and adopted istio / service mesh as a key enabler for our new ZOZOTOWN platform. Topics covered in the presentation will include:\nZOZOâ€™s gradual migration storategy How they integrated Isito into their microservice platform where they had their existing in-house API Gateway How they achieved zero downtime migration to istio-based microservice architecture Further Istio usage at ZOZO to achive more sophisticated DevOps experience You can find the session info on the event site as well: https://events.istio.io/istiocon-2022/sessions/accelerating-zozotown-modernization/\nUpdated on May 16, 2022 - Video is here: Why I applied for the CFP? I applied for the Call For Proposals (CPF) for the IstioCon 2022 with the following motivations:\nTo share knowlege and usecase of Istio / service mesh with the community To raise your technical presence of the company in the area of Istio service mesh To step out of my comfort zone by presenting in English (my 2nd language) The biggest motivation is #3 - giving presentation in English. As a Japanese, I\u0026rsquo;m pretty comfortable with the presentation in Japanese (see my presentations history at public event) but NOT with the one in English. There was the time when I was a part of global team and had many chances to give English presentation. But in my current role I haven\u0026rsquo;t have a chance for about 2.5 years, thus I got to be reluctant to do in English and even worse I became conscious of my weakness in presenting myself in English. So, applying for the CFP (ie. to give the presentaion in English) was to overcome my weakness.\nI\u0026#39;m super excited to present at #IstioCon 2022! It\u0026#39;s a 10 min lightning talk. Talk title is \u0026quot;Accelerating ZOZOTOWN Modernization with Istio\u0026quot; ğŸš€\n10åˆ†æ ã®LTã§ç™ºè¡¨ã—ã¾ã™ã€‚æ—¥æœ¬æ™‚é–“ 4/29 12:50amã ã‚ˆã€‚é ‘å¼µã‚‹ãœï¼ğŸ’ªhttps://t.co/TGfpEbBcGw pic.twitter.com/gAqyZOxw6i\n\u0026mdash; Yoichi Kawasaki (@yokawasa) March 31, 2022 What I\u0026rsquo;ve learnt through event The challenge turned out very well. After the challenge, I got to be feeling very positive about joining the global event like IstioCon. Also I\u0026rsquo;ve learnt alot from the event.\nThere is no barriers to joining the global event except language and timezone. Speaking of the language, there is more chance to pre-record the presentation which allow non native English speakers elaborate and spend as much time on the presentation to get over language difficulties. All you need is motivation and guts There are alot more things to do with Istio / service mesh to improve the application modernization that I\u0026rsquo;m working on. Speed of innovation in this are is very fast and there are many advanced Istio service mesh usecase in the world to catch up with. If you\u0026rsquo;d like to view a talk you missed, you can replay content if you\u0026rsquo;re registered at https://events.istio.io/istiocon-2022/, and also sessions records will be available on YouTube in the next few weeks (ref). These are the biggest harvests I\u0026rsquo;ve gained from attending this event.\nI really thank you to the organizers of IstioCon and the community for the awesome event!\nBTW - Big news on Istio and CNCF There was a big news during IstioCon day1 keynote - the Istio project has applied to join the Cloud Native Computing Foundation (CNCF). Here is the PR for the proposal: https://github.com/cncf/toc/pull/827\nSUPER EXCITED about @IstioMesh joining @CloudNativeFdn announcement #IstioCon #day1 keynote @eric_brewer pic.twitter.com/KWkDOpO88c\n\u0026mdash; Lin Sun (@linsun_unc) April 25, 2022 ğŸ“¢Great news! With the support of @googleOSS and the Istio Steering Committee, we have applied to become a @CloudNativeFdn project! Take a look at our blog and learn more about this process: https://t.co/2rn2YMKEpl ğŸ‘€ #CNCF pic.twitter.com/2DDui6HIWG\n\u0026mdash; Istio (@IstioMesh) April 25, 2022 I\u0026rsquo;m super excited about it!\n","permalink":"https://unofficialism.info/posts/istiocon2022/","summary":"I presented on Apri 28th (April 29th JST): \u0026ldquo;Accelerating ZOZOTOWN Modernization with Istio\u0026rdquo; at IstioCon 2022. It was an awesome experience for me to present for the global technology conference like IsitoCon.\nâ›µï¸Istio is a synonym of acceleration \u0026amp; modernization. Register for #IstioCon to learn about \u0026quot;Accelerating ZOZOTOWN Modernization process with #Istio\u0026quot; by @yokawasa ğŸ¤“ğŸ‘‰ https://t.co/SWyXAsfqcO #Istio #CloudNative #ServiceMesh pic.twitter.com/BNyeLsAVHI\n\u0026mdash; Istio (@IstioMesh) April 25, 2022 You can find the slides for my presentation: https://speakerdeck.","title":"My presentation at IstioCon 2022"},{"content":"Recent Publications Publication Name Publish Day Software Design 2022å¹´2æœˆå· ç¬¬2ç‰¹é›†GitHub Actionsã§ç°¡å˜ãƒ»å¿«é©CI/CD (amazon) Jan 18, 2022 æ—¥çµŒã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿: è² è·ã«åˆã‚ã›ã¦10ç§’å˜ä½ã§ã‚µãƒ¼ãƒãƒ¼å¢—æ¸›ã€ZOZOã®AWSã‚³ãƒ³ãƒ†ãƒŠæ´»ç”¨æ³• Dec 1, 2020 ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®ãŸã‚ã®Visual Studio Codeã®æ•™ç§‘æ›¸ (amazon) April 29, 2020 ZOZO TECH BOOK VOL.1 - ç¬¬3ç«  é€Ÿç¿’GitHub Actions ã€œ æ˜æ—¥ã‹ã‚‰ã®å……å®ŸGitHubè‡ªå‹•åŒ–ãƒ©ã‚¤ãƒ•ã®ãŸã‚ã®å‡ç¸®ãƒ›ã‚šã‚¤ãƒ³ãƒˆ ã€œ April, 2020 Recent Talks Past talks and presentations by @yokawasa (twitter:@yokawasa)\nSession Event Day Accelerating ZOZOTOWN Modernization with Istio (IstioCon 2022) April 29, 2022 ZOZOTOWNãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŸºç›¤ã®Service Mesh ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¸ã®ç§»è¡Œ ( ZOZO Tech Meetupã€œZOZOTOWNã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆãƒŠã‚¤ãƒˆã€œ) Sept 10, 2021 Toilæ’²æ»…æ´»å‹•ã«çµ‚ã‚ã‚Šã¯æ¥ãªã„ (NoOps Meetup Online #0) Dec 16, 2020 ZOZOTOWNã®ã‚¯ãƒ©ã‚¦ãƒ‰æ´»ç”¨æˆ¦ç•¥ (Tech-on Meetup Online#03) Oct 5, 2020 ZOZOTOWNã®ã‚¯ãƒ©ã‚¦ãƒ‰æ´»ç”¨æˆ¦ç•¥ (ãƒ¤ãƒãƒˆHD Ã— ZOZOãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã‚ºäº‹ä¾‹å‹‰å¼·ä¼š) Sept 28, 2020 é€Ÿç¿’GitHub Actions ã€œ æ˜æ—¥ã‹ã‚‰ã®å……å®ŸGitHubè‡ªå‹•åŒ–ãƒ©ã‚¤ãƒ•ã®ãŸã‚ã®å‡ç¸®ãƒã‚¤ãƒ³ãƒˆ April 28, 2020 æˆ‘ã€…ã¯ZOZOTOWNã®ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ã‚’é€šã˜ã¦ä½•ã‚’å­¦ã‚“ã ã®ã‹ï¼Ÿ (Developers Summit 2020) Feb 13, 2020 ä»ŠServerlessãŒé¢ç™½ã„ã‚ã‘ - DevLOVEæ„Ÿè¬ç‰ˆ (DevLOVE v2019.10.21) Oct 21, 2019 ä»ŠServerlessãŒé¢ç™½ã„ã‚ã‘ v19.09 (Serverless Meetup Tokyo #14) Sept 19, 2019 ä»ŠServerlessãŒé¢ç™½ã„ã‚ã‘ (DevLOVE X) June 22, 2019 Azure Functions 2.0 Deep Dive - ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ã®ãŸã‚ã®æœ€æ–°é–‹ç™ºã‚¬ã‚¤ãƒ‰ (de:code 2019) May 29, 2019 ã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–æ™‚ä»£ã®åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚° (de:code 2019) May 30, 2019 ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ã®ãŸã‚ã®Azureã‚¯ãƒ©ã‚¦ãƒ‰ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¹ã‚¿ãƒƒã‚¯ (Developers Summit 2019 Tokyo) Feb 15, 2019 Service Mesh Status Quo 2018: 2019å¹´ã«å‘ã‘ãŸService Meshã®ç¾çŠ¶èª²é¡Œã®æ•´ç†ã¨è€ƒå¯Ÿ (Container X mas Party with flexy) Dec 18, 2018 NoOpsãŒç›®æŒ‡ã™æœªæ¥ã¨ã‚³ãƒ³ãƒ†ãƒŠæŠ€è¡“ ( Co-presentation with Hiromasa Oka at Japan Container Days V18.12, Video) Dec 5, 2018 Azure Containers \u0026amp; Serverless Technology Options (Co-presentation with Takuya Hane at Microsoft Tech Summit 2018) Nov 7, 2018 ã‚³ãƒ³ãƒ†ãƒŠï¼†ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ï¼šãƒˆãƒ¬ãƒ³ãƒ‰ã®è€ƒå¯Ÿã¨å°‘ã—å…ˆã®æœªæ¥ã®å±•æœ› (Developers Summit 2018 Fukuoka) Sept 6, 2018 Azure Kubernetes Service Handson in CNDT 2018 (Co-presentation with Ryo Fujita at OpenStack Days Tokyo 2018 Aug 2, 2018 ã“ã“ã¾ã§ã§ãã‚‹ï¼Elastic Stackã«ã‚ˆã‚‹é‹ç”¨çŠ¶æ³ã®å¯è¦–åŒ– - Azureã‚µãƒ¼ãƒ“ã‚¹ï½Kubernetesã¾ã§ (Co-presentation with Jun Ohtani at de:code 2018, é–¢é€£è¨˜äº‹) May 23, 2018 Kubernetes x PaaS â€“ ã‚³ãƒ³ãƒ†ãƒŠã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®NoOpsã¸ã®æŒ‘æˆ¦ (Japan Container Days V18.04, é–¢é€£è¨˜äº‹) April 19, 2018 NoOpsã¸ã®æŒ‘æˆ¦ ( Co-presentation with Hiromasa Okaat Developers Summit 2018 Tokyo, é–¢é€£è¨˜äº‹) Feb 16, 2018 ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã§æ‰‹é–“ãªãå‹•ã‹ã›ã‚‹ï¼ã‚‚ã†ã™ã ä¸€èˆ¬æä¾›é–‹å§‹ Azure Database for MySQL / PostgreSQL ( Co-presentation with Jan Engelsberg at Microsoft Seminar: Intelligent Mobile \u0026amp; Cloud Native App) Mar 13, 2018 15åˆ†ã§ãŠå±Šã‘ã™ã‚‹ Elastic Stack on Azure è¨­è¨ˆãƒ»æ§‹ç¯‰ãƒã‚¦ãƒã‚¦ (Elastic{ON} TOUR Tokyo 2017) Dec 14, 2017 The Infinite Benefits of Microsoft Azure ï½ Scality Connect for Azure Blob Storage x Azureã§åºƒãŒã‚‹ãƒ‡ãƒ¼ã‚¿åˆ†æãƒ»æ´»ç”¨ ï½ ( Co-presentaion with Masayoshi Kudo at Scality SDS Day 2017 TOKYO) Oct 18 2017 ãã®æƒ…å ±ã†ã¾ãå–ã‚Šå‡ºã›ã¦ã„ã¾ã™ã‹? ï½ æ„å¤–ã¨ç°¡å˜ã€Azure Search ã§çŸ­æ™‚é–“ã§æ¤œç´¢ç²¾åº¦ã¨åˆ©ä¾¿æ€§ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã®æ–¹æ³• (de:code 2017, Video) May 24, 2017 Azure Search Deep Dive ï½æ¤œç´¢ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹å‘ä¸Šã®ãŸã‚ã®ãƒã‚¦ãƒã‚¦å¾¹åº•è§£èª¬ï½ (de:code 2016) May 25, 2016 Other Activities Patents ç‰¹é–‹2011-065245 ç‰¹é–‹2011-065244 ç‰¹é–‹2011-065243 ç‰¹é–‹2011-060094 ç‰¹é–‹2011-060093 ç‰¹é–‹2008-287407 ","permalink":"https://unofficialism.info/works/","summary":"Recent Publications Publication Name Publish Day Software Design 2022å¹´2æœˆå· ç¬¬2ç‰¹é›†GitHub Actionsã§ç°¡å˜ãƒ»å¿«é©CI/CD (amazon) Jan 18, 2022 æ—¥çµŒã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿: è² è·ã«åˆã‚ã›ã¦10ç§’å˜ä½ã§ã‚µãƒ¼ãƒãƒ¼å¢—æ¸›ã€ZOZOã®AWSã‚³ãƒ³ãƒ†ãƒŠæ´»ç”¨æ³• Dec 1, 2020 ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®ãŸã‚ã®Visual Studio Codeã®æ•™ç§‘æ›¸ (amazon) April 29, 2020 ZOZO TECH BOOK VOL.1 - ç¬¬3ç«  é€Ÿç¿’GitHub Actions ã€œ æ˜æ—¥ã‹ã‚‰ã®å……å®ŸGitHubè‡ªå‹•åŒ–ãƒ©ã‚¤ãƒ•ã®ãŸã‚ã®å‡ç¸®ãƒ›ã‚šã‚¤ãƒ³ãƒˆ ã€œ April, 2020 Recent Talks Past talks and presentations by @yokawasa (twitter:@yokawasa)\nSession Event Day Accelerating ZOZOTOWN Modernization with Istio (IstioCon 2022) April 29, 2022 ZOZOTOWNãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŸºç›¤ã®Service Mesh ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¸ã®ç§»è¡Œ ( ZOZO Tech Meetupã€œZOZOTOWNã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆãƒŠã‚¤ãƒˆã€œ) Sept 10, 2021 Toilæ’²æ»…æ´»å‹•ã«çµ‚ã‚ã‚Šã¯æ¥ãªã„ (NoOps Meetup Online #0) Dec 16, 2020 ZOZOTOWNã®ã‚¯ãƒ©ã‚¦ãƒ‰æ´»ç”¨æˆ¦ç•¥ (Tech-on Meetup Online#03) Oct 5, 2020 ZOZOTOWNã®ã‚¯ãƒ©ã‚¦ãƒ‰æ´»ç”¨æˆ¦ç•¥ (ãƒ¤ãƒãƒˆHD Ã— ZOZOãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã‚ºäº‹ä¾‹å‹‰å¼·ä¼š) Sept 28, 2020 é€Ÿç¿’GitHub Actions ã€œ æ˜æ—¥ã‹ã‚‰ã®å……å®ŸGitHubè‡ªå‹•åŒ–ãƒ©ã‚¤ãƒ•ã®ãŸã‚ã®å‡ç¸®ãƒã‚¤ãƒ³ãƒˆ April 28, 2020 æˆ‘ã€…ã¯ZOZOTOWNã®ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ã‚’é€šã˜ã¦ä½•ã‚’å­¦ã‚“ã ã®ã‹ï¼Ÿ (Developers Summit 2020) Feb 13, 2020 ä»ŠServerlessãŒé¢ç™½ã„ã‚ã‘ - DevLOVEæ„Ÿè¬ç‰ˆ (DevLOVE v2019.","title":"Works"},{"content":" A Software Design 2022/02 Issue was published in Jan 18, 2022, in which I contributed the 2nd special feature article on CI/CD using GitHub Actions.\nã€Software Design 2022å¹´2æœˆå·ã€ï¼ˆæŠ€è¡“è©•è«–ç¤¾ï¼‰/ Software Design 2022/02 Issue (gihyo)\nGihyo Online Amazon ","permalink":"https://unofficialism.info/posts/software-design-manazine-github-actions-article/","summary":" A Software Design 2022/02 Issue was published in Jan 18, 2022, in which I contributed the 2nd special feature article on CI/CD using GitHub Actions.\nã€Software Design 2022å¹´2æœˆå·ã€ï¼ˆæŠ€è¡“è©•è«–ç¤¾ï¼‰/ Software Design 2022/02 Issue (gihyo)\nGihyo Online Amazon ","title":"GitHub Actions Article on Software Design magazine (2022/02 Issue)"},{"content":"Iâ€™ve published a new kubectl plugin called kubectl-plugin-socks5-proxy. This is a kubectl plugin that creates a local SOCKS5 proxy through which you can access to Services or Pods in a Kubernetes cluster.\nWhat the plugin actually does is that it create a SOCKS proxy server Pod in a Kubernetes cluster and forwards a local port (default:1080) to the proxy. So you can access to Servcies or Pods in Kuberenetes cluster by using the local port as SOCKS5 proxy like this:\ncurl --socks5-hostname localhost:1080 http://httpbin.default.svc.cluster.local/headers Installation This is a way to install the plugin through krew. After installing krew by following this, you can install the plugin like this:\nkubectl krew install socks5-proxy You can search the plugin with a keyword like this:\nkubectl krew search socks5 NAME DESCRIPTION INSTALLED socks5-proxy SOCKS5 proxy to Services or Pods in the cluster no After installed the plugin, you can run the plugin like this:\nkubectl socks5-proxy How to use Usage Usage: kubectl socks5-proxy Options: -n, --namespace \u0026lt;namespace\u0026gt; Namespace to create SOCKS5 proxy server in -p, --port \u0026lt;local port\u0026gt; Local port to be forwarded to the SOCKS5 proxy server (Pod). A client connects to this port, then the connection is forwarded to the SOCKS5 proxy server, which is then forwareded to the destination server --skip-cleanup-proxy Skip cearning up SOCKS5 proxy pod Default: Cleaning up SOCKS5 proxy pod at the end -h, --help Show this message Deploy an sample app and Create SOCKS5 proxy Suppose you deploy a sample app in a Kubernetes cluster like this\ngit clone https://github.com/yokawasa/kubectl-plugin-socks5-proxy.git cd kubectl-plugin-socks5-proxy kubectl apply -f sample-apps/party-clippy.yaml kubectl get svc NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE kubernetes ClusterIP 10.0.0.1 \u0026lt;none\u0026gt; 443/TCP 96d party-clippy ClusterIP 10.0.5.226 \u0026lt;none\u0026gt; 80/TCP 1m First of all, create a local SOCKS5 proxy (default: 1080 port) by running kubectl socks5-proxy like this:\nkubectl socks5-proxy using: namespace=default using: port=1080 Creating Socks5 Proxy (Pod)... pod/socks5 created Forwarding from 127.0.0.1:1080 -\u0026gt; 1080 Forwarding from [::1]:1080 -\u0026gt; 1080 Use SOCKS5 Proxy in Curl Now you can access Srvices or Pods in the Kubernetes cluster from a local machine by using the local port as SOCKS proxy in Curl\n# Service name curl --socks5-hostname localhost:1080 party-clippy # Service name curl --socks5-hostname localhost:1080 http://party-clippy # FQDN curl --socks5-hostname localhost:1080 http://party-clippy.default.svc.cluster.local _________________________________ / It looks like you\u0026#39;re building a \\ \\ microservice. / --------------------------------- \\ \\ __ / \\ | | @ @ | | || | / || || |\\_/| \\___/ Use SOCKS5 Proxy in Google Chrome browser First, let\u0026rsquo;s configuring your Chrome browser to use SOCKS5 proxy like this:\nLinux\n/usr/bin/google-chrome \\ --user-data-dir=\u0026#34;$HOME/proxy-profile\u0026#34; \\ --proxy-server=\u0026#34;socks5://localhost:1080\u0026#34; macOS\n\u0026#34;/Applications/Google Chrome.app/Contents/MacOS/Google Chrome\u0026#34; \\ --user-data-dir=\u0026#34;$HOME/proxy-profile\u0026#34; \\ --proxy-server=\u0026#34;socks5://localhost:1080\u0026#34; Windows\n\u0026#34;C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe\u0026#34; ^ --user-data-dir=\u0026#34;%USERPROFILE%\\proxy-profile\u0026#34; ^ --proxy-server=\u0026#34;socks5://localhost:1080\u0026#34; See also How to Set up SSH SOCKS Tunnel for Private Browsing\nNOTE: The \u0026ndash;proxy-server=\u0026ldquo;socks5://yourproxy:1080\u0026rdquo; flag tells Chrome to send all http:// and https:// URL requests through the SOCKS proxy server \u0026ldquo;yourproxy:1080\u0026rdquo;, using version 5 of the SOCKS protocol. The hostname for these URLs will be resolved by the proxy server, and not locally by Chrome. ref: Configuring a SOCKS proxy server in Chrome\nNow you are ready to access Services or Pods in the Kubernetes cluster with your Chrome browser\nEnjoy the plugin!!\n","permalink":"https://unofficialism.info/posts/kubectl-plugin-socks5-proxy/","summary":"Iâ€™ve published a new kubectl plugin called kubectl-plugin-socks5-proxy. This is a kubectl plugin that creates a local SOCKS5 proxy through which you can access to Services or Pods in a Kubernetes cluster.\nWhat the plugin actually does is that it create a SOCKS proxy server Pod in a Kubernetes cluster and forwards a local port (default:1080) to the proxy. So you can access to Servcies or Pods in Kuberenetes cluster by using the local port as SOCKS5 proxy like this:","title":"kubectl plugin - SOCKS5 proxy to Services or Pods in the cluster"},{"content":"I\u0026rsquo;ve published a new GitHub Action called action-setup-kube-tools (View on Marketplace). The action installs Kubernetes tools (kubectl, kustomize, helm, kubeval, conftest, and yq) and cache them on the runner. This is a typescript version of stefanprodan/kube-tools with no command input param.\nUsage Inputs Parameter Required Default Value Description kubectl false 1.18.2 kubectl version. kubectl vesion can be found here kustomize false 3.5.5 kustomize version. kustomize vesion can be found here helm false 2.16.7 helm version. helm vesion can be found here helmv3 false 3.2.1 helm v3 version. helm v3 vesion can be found here kubeval false 0.15.0 kubeval version. kubeval vesion can be found here conftest false 0.19.0 conftest version. conftest vesion can be found here rancher false 2.4.10 Rancher CLI version. Rancher CLI vesion can be found here Supported Environments: Linux\nOutputs Parameter Description kubectl_path kubectl command path kustomize_path kustomize command path helm_path helm command path helmv3_path helm v3 command path kubeval_path kubeval command path conftest_path conftest command path yq_path yq command path rancher_path rancher command path Sample Workflow Specific versions for the commands can be setup by adding inputs parameters like this:\n{% raw %}\ntest: runs-on: ubuntu-latest steps: - uses: actions/checkout@v1 - uses: yokawasa/action-setup-kube-tools@v0.1.0 with: kubectl: \u0026#39;1.17.1\u0026#39; kustomize: \u0026#39;3.7.0\u0026#39; helm: \u0026#39;2.16.7\u0026#39; helmv3: \u0026#39;3.2.4\u0026#39; kubeval: \u0026#39;0.14.0\u0026#39; conftest: \u0026#39;0.18.2\u0026#39; rancher: \u0026#39;2.4.10\u0026#39; id: setup - run: | kubectl version --client kustomize version helm version --client helmv3 version kubeval --version conftest --version yq --version rancher --version {% endraw %}\nDefault versions for the commands will be setup if you don\u0026rsquo;t give any inputs like this:\n{% raw %}\ntest: runs-on: ubuntu-latest steps: - uses: actions/checkout@v1 - uses: yokawasa/action-setup-kube-tools@v0.1.0 id: setup - run: | kubectl version --client kustomize version helm version --client helmv3 version kubeval --version conftest --version yq --version rancher --version {% endraw %}\nDeveloping the action Install the dependencies\nnpm install Build the typescript and package it for distribution by running ncc\nnpm run build \u0026amp;\u0026amp; npm run pack Finally push the resutls\ngit add dist git commit -a -m \u0026#34;prod dependencies\u0026#34; git push origin releases/v0.1.0 Enjoy the action!\n","permalink":"https://unofficialism.info/posts/action-setup-kube-tools/","summary":"I\u0026rsquo;ve published a new GitHub Action called action-setup-kube-tools (View on Marketplace). The action installs Kubernetes tools (kubectl, kustomize, helm, kubeval, conftest, and yq) and cache them on the runner. This is a typescript version of stefanprodan/kube-tools with no command input param.\nUsage Inputs Parameter Required Default Value Description kubectl false 1.18.2 kubectl version. kubectl vesion can be found here kustomize false 3.5.5 kustomize version. kustomize vesion can be found here helm false 2.","title":"GitHub Actions - Kubernetes tools installer"},{"content":"I\u0026rsquo;ve published a new GitHub Action called action-setup-ecctl (View on Marketplace). The action installs a specific version of ecctl (Elastic Cloud control tool) and cache it on the runner.\nUsage Inputs Parameter Required Default Value Description version false latest Ecctl tool version such as v1.0.0-beta3. Ecctl vesion can be found here. Supported Environments: Linux and macOS\nOutputs Parameter Description ecctl-path ecctl command path Sample Workflow A specific version of ecctl can be setup by giving an input - version like this: {% raw %}\n- uses: yokawasa/action-setup-ecctl@v0.1.0 with: version: \u0026#39;v1.0.0-beta3\u0026#39; # default is \u0026#39;latest\u0026#39; id: setup - run: | ecctl version {% endraw %}\nThe latest version of ecctl will be setup if you don\u0026rsquo;t give an input like this:\n{% raw %}\n- uses: yokawasa/action-setup-ecctl@v0.1.0 id: setup - run: | ecctl version {% endraw %}\nDeveloping the action Install the dependencies\nnpm install Build the typescript and package it for distribution by running ncc\nnpm run build \u0026amp;\u0026amp; npm run pack Finally push the resutls\ngit add dist git commit -a -m \u0026#34;prod dependencies\u0026#34; git push origin releases/v0.1.0 Enjoy the action!\n","permalink":"https://unofficialism.info/posts/action-setup-ecctl/","summary":"I\u0026rsquo;ve published a new GitHub Action called action-setup-ecctl (View on Marketplace). The action installs a specific version of ecctl (Elastic Cloud control tool) and cache it on the runner.\nUsage Inputs Parameter Required Default Value Description version false latest Ecctl tool version such as v1.0.0-beta3. Ecctl vesion can be found here. Supported Environments: Linux and macOS\nOutputs Parameter Description ecctl-path ecctl command path Sample Workflow A specific version of ecctl can be setup by giving an input - version like this: {% raw %}","title":"GitHub Actions - Elastic Cloud Control (ecctl) tool installer"},{"content":"A scene at wedding ceremony of my old collage roommate\nJan 18, 2020 at Brooklyn NY\n","permalink":"https://unofficialism.info/posts/my-old-collage-roommate/","summary":"A scene at wedding ceremony of my old collage roommate\nJan 18, 2020 at Brooklyn NY","title":"College Roommate"},{"content":"A book, I co-authored with @hoisjp and @_Dr_ASA, was recently published. Today I went to a bookstore to see if it was actually displayed. It was real!! ğŸ‰ğŸ‰ğŸ‰\nã€ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®ãŸã‚ã®Visual Studio Codeã®æ•™ç§‘æ›¸ã€ï¼ˆãƒã‚¤ãƒŠãƒ“å‡ºç‰ˆï¼‰/ Visual Studio Code textbooks for programmers\nSoftcover version Kindle version ","permalink":"https://unofficialism.info/posts/visual-studio-code-textbook/","summary":"A book, I co-authored with @hoisjp and @_Dr_ASA, was recently published. Today I went to a bookstore to see if it was actually displayed. It was real!! ğŸ‰ğŸ‰ğŸ‰\nã€ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®ãŸã‚ã®Visual Studio Codeã®æ•™ç§‘æ›¸ã€ï¼ˆãƒã‚¤ãƒŠãƒ“å‡ºç‰ˆï¼‰/ Visual Studio Code textbooks for programmers\nSoftcover version Kindle version ","title":"Visual Studio Code Textbook for programmer was published!"},{"content":"I\u0026rsquo;ve published a new GitHub Action called SQLCheck Action (View on Marketplace). The action automatically identifies anti-patterns in SQL queries using sqlcheck when PR is requested and comment on the PR if risks are found in the queries.\nUsage Supports pull_request event type.\nInputs Parameter Required Default Value Description post-comment false true Post comment to PR if it\u0026rsquo;s true token true \u0026quot;\u0026quot; GitHub Token in order to add comment to PR risk-level false 3 Set of SQL anti-patterns to check: 1,2, or 3- 1 (all anti-patterns, default)- 2 (only medium and high risk anti-patterns) - 3 (only high risk anti-patterns) verbose false false Add verbose warnings to SQLCheck analysis result postfixes false \u0026ldquo;sql\u0026rdquo; List of file postfix to match ( separator: comma ) Sample Workflow .github/workflows/test.yml\nname: sqlcheck workflow on: pull_request jobs: sqlcheck: name: sqlcheck job runs-on: ubuntu-latest steps: - uses: actions/checkout@master - uses: yokawasa/action-sqlcheck@v1.2.1 with: post-comment: true risk-level: 3 verbose: false token: $ï½›ï½› secrets.GITHUB_TOKEN ï½ï½ Enjoy the action!\n","permalink":"https://unofficialism.info/posts/action-sqlcheck/","summary":"I\u0026rsquo;ve published a new GitHub Action called SQLCheck Action (View on Marketplace). The action automatically identifies anti-patterns in SQL queries using sqlcheck when PR is requested and comment on the PR if risks are found in the queries.\nUsage Supports pull_request event type.\nInputs Parameter Required Default Value Description post-comment false true Post comment to PR if it\u0026rsquo;s true token true \u0026quot;\u0026quot; GitHub Token in order to add comment to PR risk-level false 3 Set of SQL anti-patterns to check: 1,2, or 3- 1 (all anti-patterns, default)- 2 (only medium and high risk anti-patterns) - 3 (only high risk anti-patterns) verbose false false Add verbose warnings to SQLCheck analysis result postfixes false \u0026ldquo;sql\u0026rdquo; List of file postfix to match ( separator: comma ) Sample Workflow .","title":"GitHub Actions - SQLCheck Action"},{"content":"Today is my last day at Microsoft. About 9 years and 2 months have passed since I joined MS. I\u0026rsquo;ve had wonderful years filled with various experiences on business.\nIn the first 4 years, as FAST Search engineer \u0026amp; consultant, I specialized in Fast search and provided customers in Japan and sometimes in South East Asia \u0026amp; South Korea area with proactive consulting \u0026amp; support. For the next 3 years after that, as a part of Azure Solution Architect teams, I provided architectural guidance \u0026amp; design session, PoC and prototyping support, knowledge transfer trainings with Japanease enterprise customers, collaborating with Azure engineering teams, Azure sales teams and many other stakeholders. I also engaged with communities inside/outside Microsoft, participating in Microsoft hosting conferences / industry showcase events, and contributing OSS communities. In the latest 2 years, as a part of global technical SWAT team in enterprise sales organization internally called â€˜Global Black Belt, I was responsible for leading technical engagements to win based on solutions leveraging the Microsoft Azure and OSS with a specialization in cloud native application architecture and development such as Microservices, Containers/Serverless, PaaS, DevOps, and so on. Along with my everyday job I had awesome opportunities to speak at conferences and meetups about many technical topics mostly on Cloud Native tech and architectures. It was awesome 9 years and 2 months!!\nI would like to extend my sincerest thanks to all the my customers and partners I have worked with so far. I also thank, each one of my colleague and managers who made my journey a memorable one in Microsoft.Â I will start a new phase of my career from tomorrow. But it is indeed a small world in our industry. I hope our paths cross again, and it would be great if we may be able to work together again somewhere.Â PleaseÂ reach out to meÂ if you ever want to catch up.\nMy personal contacts: yokawasa @ linkedin, twitter, facebook \u0026amp; github\n","permalink":"https://unofficialism.info/posts/my-last-day-at-microsoft/","summary":"Today is my last day at Microsoft. About 9 years and 2 months have passed since I joined MS. I\u0026rsquo;ve had wonderful years filled with various experiences on business.\nIn the first 4 years, as FAST Search engineer \u0026amp; consultant, I specialized in Fast search and provided customers in Japan and sometimes in South East Asia \u0026amp; South Korea area with proactive consulting \u0026amp; support. For the next 3 years after that, as a part of Azure Solution Architect teams, I provided architectural guidance \u0026amp; design session, PoC and prototyping support, knowledge transfer trainings with Japanease enterprise customers, collaborating with Azure engineering teams, Azure sales teams and many other stakeholders.","title":"My last day at Microsoft"},{"content":"azping is a command line tools that help you find the lowest latency Azure Region from your place. It acutally reports median latency to Azure regions. It is a fork of gcping.\nWhat does azping actually evalulate? azping evalulate the median latecy of http requests to Azure blob storage endpoints located in each of Azure reagions from your place. Number of requests to be made to each region is 5 by default, but it can be changed with -n parameter that you can give in executing azping command.\nHere is a list of Azure blob storage endpoints that azping evalulates:\nregion endpoint eastasia azpingeastasia.blob.core.windows.net/ping southeastasia azpingsoutheastasia.blob.core.windows.net/ping centralus azpingcentralus.blob.core.windows.net/ping eastus azpingeastus.blob.core.windows.net/ping eastus2 azpingeastus2.blob.core.windows.net/ping westus azpingwestus.blob.core.windows.net/ping northcentralus azpingnorthcentralus.blob.core.windows.net/ping southcentralus azpingsouthcentralus.blob.core.windows.net/ping northeurope azpingnortheurope.blob.core.windows.net/ping westeurope azpingwesteurope.blob.core.windows.net/ping japanwest azpingjapanwest.blob.core.windows.net/ping japaneast azpingjapaneast.blob.core.windows.net/ping brazilsouth azpingbrazilsouth.blob.core.windows.net/ping australiaeast azpingaustraliaeast.blob.core.windows.net/ping australiasoutheast azpingaustraliasoutheast.blob.core.windows.net/ping southindia azpingsouthindia.blob.core.windows.net/ping centralindia azpingcentralindia.blob.core.windows.net/ping westindia azpingwestindia.blob.core.windows.net/ping canadacentral azpingcanadacentral.blob.core.windows.net/ping canadaeast azpingcanadaeast.blob.core.windows.net/ping uksouth azpinguksouth.blob.core.windows.net/ping ukwest azpingukwest.blob.core.windows.net/ping westcentralus azpingwestcentralus.blob.core.windows.net/ping westus2 azpingwestus2.blob.core.windows.net/ping koreacentral azpingkoreacentral.blob.core.windows.net/ping koreasouth azpingkoreasouth.blob.core.windows.net/ping francecentral azpingfrancecentral.blob.core.windows.net/ping australiacentral azpingaustraliacentral.blob.core.windows.net/ping uaenorth azpinguaenorth.blob.core.windows.net/ping southafricanorth azpingsouthafricanorth.blob.core.windows.net/ping NOTE All blob storage endpoints are created with the following scripts (Just in case I leave the procedures):\n$ git clone https://github.com/yokawasa/azping.git $ cd setup # Edit RESOURCE_GROUP and REGION_LIST variables in env.sh $ vi env.sh # Read variables as enviroment variables $ source env.sh # Execute the following script that execute the following| # (1) Create resource group for azping # (2) Create blob storage accounts in each of Azure regions # (3) Create $root container and upload ping file to the container # (4) Check accessibility to all blob storage endpoints $ ping-entrypoint.sh How to install Linux 64-bit|https://azpingrelease.blob.core.windows.net/azping_linux_amd64\n$ curl https://azpingrelease.blob.core.windows.net/azping_linux_amd64 \u0026gt; azping \u0026amp;\u0026amp; chmod +x azping Mac 64-bit|https://azpingrelease.blob.core.windows.net/azping_darwin_amd64\n$ curl https://azpingrelease.blob.core.windows.net/azping_darwin_amd64 \u0026gt; azping \u0026amp;\u0026amp; chmod +x azping Windows 64-bit|https://azpingrelease.blob.core.windows.net/azping_windows_amd64\n# use WSL-bash $ curl https://azpingrelease.blob.core.windows.net/azping_windows_amd64 \u0026gt; azping \u0026amp;\u0026amp; chmod +x azping Or, you can always build the binary from the source code like this:\n$ git clone https://github.com/yokawasa/azping.git $ cd azping $ make $ tree bin bin â”œâ”€â”€ azping_darwin_amd64 â”œâ”€â”€ azping_linux_amd64 â””â”€â”€ azping_windows_amd64 Usage $ azping [options...] Options: -n Number of requests to be made to each region. By default 5; can\u0026#39;t be negative. -c Max number of requests to be made at any time. By default 10; can\u0026#39;t be negative or zero. -t Timeout. By default, no timeout. Examples|\u0026#34;500ms\u0026#34;, \u0026#34;1s\u0026#34;, \u0026#34;1s500ms\u0026#34;. -top If true, only the top region is printed. -csv CSV output; disables verbose output. -v Verbose output. Screenshot Here is an output of azping when I executed azping from my home in Tokyo\nEnjoy azping!\n","permalink":"https://unofficialism.info/posts/find-the-lowest-latency-azure-regions-from-your-place-using-azping/","summary":"azping is a command line tools that help you find the lowest latency Azure Region from your place. It acutally reports median latency to Azure regions. It is a fork of gcping.\nWhat does azping actually evalulate? azping evalulate the median latecy of http requests to Azure blob storage endpoints located in each of Azure reagions from your place. Number of requests to be made to each region is 5 by default, but it can be changed with -n parameter that you can give in executing azping command.","title":"Find the lowest latency Azure regions from your place using azping"},{"content":"I\u0026rsquo;ve taken both Certified Kubernetes Administrator (CKA) and Certified Kubernetes Application Developer (CKAD) exams in the past 2 weeks and fortunately passed both. This is a blog article on tips for both exams based on my experiences.\nAbout the exam and its curriculum CKA focus on managing and operating kubernetes cluster including troubleshooting while CKAD forcus on managing and deploying applicaionts to kubernetes cluster.\nIt\u0026rsquo;s very important to read and understand the exam curriculum and their relevant pages on kubernetes.io as all topics you\u0026rsquo;re expected to understand are inlcuded in the curriculum and they are definitly going to be on the exam.\nCKA and CKAD Curriculums https://kubernetes.io Tips for the exams Read and understand the exam curriculum and their relevant pages on kubernetes.io. You are allowed to look up the following sites during the exam kubernetes.io/docs kubernetes.io/blog/ github.com/kubernetes For both CKA and CKAD: the following are books that I found useful for CKA and CKAD. They are defenitly helpful to understand how to manage and operate the kubernetes cluster. Pick one or two that you think good fit and read through: Book: Kubernetes: Up and Running Book: Managing Kubernetes (Free PDF by Heptio is here) Book(æ—¥æœ¬èª): Kuberneteså®Œå…¨ã‚¬ã‚¤ãƒ‰ Book(æ—¥æœ¬èª): ã—ãã¿ãŒã‚ã‹ã‚‹Kubernetes Azureã§å‹•ã‹ã—ãªãŒã‚‰å­¦ã¶ã‚³ãƒ³ã‚»ãƒ—ãƒˆã¨å®Ÿè·µçŸ¥è­˜ Book(æ—¥æœ¬èª): Kuberneteså®Ÿè·µå…¥é–€ ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ¬ãƒ‡ã‚£ãªã‚³ãƒ³ãƒ†ãƒŠï¼†ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œã‚Šæ–¹ For CKA: learn how to install, configure \u0026amp; validate kubernetes cluster. These are good materials to go through: Kubernetes the hard way (GCP) Kubernetes the hard way on Azure (Azure) For CKA: learn how to troubleshoot the cluster. I recommend to read the following pages in kubernetes.io Determine the Reason for Pod Failure Application Introspection and Debugging Debug Services For CKA: these below are Github repo that I though very useful for CKA exam preps: Kubernetes-Certified-Administrator For CKAD: these below are Github repo that I thought very very useful for CKAD exam preps: CKAD Exercises For both: it\u0026rsquo;s very important to know a quick way to achieve goals by using kubectl. You can lookup kubernetes.io during the exam but it\u0026rsquo;s always good to know shortcut ways as the exam time is limited (CKA = 3hrs / CKAD = 2hrs) Kubectl Cheat Sheet Creating template YAML using kubectl dry-run and edit it instead of creating YAML from scratch # Pod template $ kubectl run nginx --image=nginx --restart=Never --dry-run -o yaml # Deployment template $ kubectl run nginx --image=nginx --dry-run -o yaml # Servcie template $ kubectl expose deployment nginx --type=NodePort --port 8080 --dry-run -o yaml # [NOTE1] # You can change resource to release by changing --restart option: # kind | option # --------------------------------------------- # deployment | none # pod | --restart=Never # job | --restart=OnFailure # cronjob | --schedule=\u0026#39;cron format(0/5 * * * ? ãªã©)\u0026#39; # [NOTE2] # In case that kubectl run will be deprecated in the future, $ kubectl create deployment nginx --image=nginx --dry-run -o yaml Tips during the exam ID: Candidates are required to provide government-issued photo identification before the Exam (Read Candidate Handbook). For non-english language folks, Passport would be the best! Testing Room: you need to prepare a room for testing which must be quiet, private and well lit. Virtual screen: you can virtual screen like tmux and screen. It would be very helpful to use multple screens like using one for deploying kuberenetes resources while using the other one for looking up kuberentes resource state and logs. For example, I\u0026rsquo;m a tmux user, and added the following .tmux.conf before starting tackling with questions: set-option -g prefix C-z Command alias: Setting up alias definitly help you to shorten the time you need to type in commands. For examples, alias k=kubectl Time management: Don\u0026rsquo;t spend too much time on difficult questions. Try to finish all easy questions first and spend the rest for difficult ones. You don\u0026rsquo;t have to beat everything to pass the exam!! - A score of at least 74% for CKA and 66% for CKAD to pass the exam Searchability: you can use and search the kubernetes.io pages. Even if you have no idea on questions on the exam, don\u0026rsquo;t give up and try to type some keywords to search the kubernetes.io pages. You may be lucky enough to find some hints or right answers on the site. Final comments Again, the most important tip for both exams is to read and understand the exam curriculum and all relevant pages on kubernetes.io. You don\u0026rsquo;t have to memorize but understand them. Event if you don\u0026rsquo;t come up with exact command options or kubernetes resource objects for questions in the exam, you can lookup and point to appropriate pages during the exam. In addition, get familiar with basic linux commands and cluster operations and management commands. If you have any questions, send DM to me @yokawasa.\nGood luck with your exams!\nps. Here are my Certificate IDs\n","permalink":"https://unofficialism.info/posts/unofficial-tips-for-cka-and-ckad-exams/","summary":"I\u0026rsquo;ve taken both Certified Kubernetes Administrator (CKA) and Certified Kubernetes Application Developer (CKAD) exams in the past 2 weeks and fortunately passed both. This is a blog article on tips for both exams based on my experiences.\nAbout the exam and its curriculum CKA focus on managing and operating kubernetes cluster including troubleshooting while CKAD forcus on managing and deploying applicaionts to kubernetes cluster.\nIt\u0026rsquo;s very important to read and understand the exam curriculum and their relevant pages on kubernetes.","title":"Unofficial tips for CKA and CKAD exams"},{"content":"This is an article on how you can SSH into Azure Kubernetes Service (AKS) cluster node VMs using kubectl-plugin-ssh-jump.\nMotivation I wanted to SSH into Azure Kubernetes Service (AKS) cluster node VMs, then looking up azure docs I found a relevant page - Connect with SSH to Azure Kubernetes Service (AKS) cluster nodes for maintenance or troubleshooting. But when I first saw this procedure, I thought this was very troublesome. Lazy person like me couldn\u0026rsquo;t accept going thourgh all the steps just to SSH into AKS cluster nodes VMs. This is why I decided to create kubectl-plugin-ssh-jump, a kubectl plugin to SSH into Kubernetes nodes using a SSH jump host Pod.\nAKS node access control and SSH access strategy By default, AKS nodes are not exposed to the internet, and they are completely isolated to their own virtual network. This is why I took a strategy to go through a jump host Pod to connect to the Kubernetes nodes. I believe this is pretty a general strategy in dealing with firewalling, access privileges, etc.\nRegarding SSH key with which you access the nodes via SSH, you need to use the SSH key that you chosen in creating your AKS cluster. Or in the case that you lose the key, you can update SSH Key by using az command like this (See this for more detail):\naz vm user update \\ --resource-group myResourceGroup \\ --name myVM \\ --username azureuser \\ --ssh-key-value ~/.ssh/id_rsa.pub As an additional security enhancement, you can configure Access Control(IAM) on the AKS cluster to set permissions on the nodes on who can access them. Please see What is role-based access control (RBAC)? for the detail on RBAC.\nSSH into AKS node VMs using kubectl-plugin-ssh-jump Pre-requistes This plugin needs the following programs:\nssh(1) ssh-agent(1) Installation Install through krew This is a way to install kubectl-ssh-jump through krew. After installing krew by following this, you can install kubectl-ssh-jump like this:\n$ kubectl krew install ssh-jump Expected output would be like this:\nUpdated the local copy of plugin index. Installing plugin: ssh-jump CAVEATS: \\ | This plugin needs the following programs: | * ssh(1) | * ssh-agent(1) | | Please follow the documentation: https://github.com/yokawasa/kubectl-plugin-ssh-jump / Installed plugin: ssh-jump Once it\u0026rsquo;s installed, run:\n$ kubectl plugin list The following kubectl-compatible plugins are available: /Users/yoichika/.krew/bin/kubectl-krew /Users/yoichika/.krew/bin/kubectl-ssh_jump $ kubectl ssh-jump Manual Installation Install the plugin by copying the script in the $PATH of your shell.\n# Get source $ git clone https://github.com/yokawasa/kubectl-plugin-ssh-jump.git $ cd kubectl-plugin-ssh-jump $ chmod +x kubectl-ssh-jump # Add kubeclt-ssh-jump to the install path. $ sudo cp -p kubectl-ssh-jump /usr/local/bin Once in the $PATH, run:\n$ kubectl plugin list The following kubectl-compatible plugins are available: /usr/local/bin/kubectl-ssh-jump $ kubectl ssh-jump How to use Usage Usage: kubectl ssh-jump \u0026lt;dest_node\u0026gt; [options] Options: \u0026lt;dest_node\u0026gt; Destination node IP -u, --user \u0026lt;sshuser\u0026gt; SSH User name -i, --identity \u0026lt;identity_file\u0026gt; Identity key file -p, --pubkey \u0026lt;pub_key_file\u0026gt; Public key file --skip-agent Skip automatically starting SSH agent and adding SSH Identity key into the agent before SSH login (=\u0026gt; You need to manage SSH agent by yourself) --cleanup-agent Clearning up SSH agent at the end The agent is NOT cleaned up in case that --skip-agent option is given --cleanup-jump Clearning up sshjump pod at the end Default: Skip cleaning up sshjump pod -h, --help Show this message Option parameters Cache username, identity, pubkey options are cached, therefore you can omit these options afterward. The options are stored in a file named $HOME/.kube/kubectlssh/options\n$ cat $HOME/.kube/kubectlssh/options sshuser=azureuser identity=/Users/yokawasa/.ssh/id_rsa_k8s pubkey=/Users/yokawasa/.ssh/id_rsa_k8s.pub SSH Agent (ssh-agent) The plugin automatically check if there are any ssh-agents started running by the plugin, and starts ssh-agentif it doesn\u0026rsquo;t find any ssh-agent running and adds SSH Identity key into the agent before SSH login. If the command find that ssh-agent is already running, it doesn\u0026rsquo;t start a new agent, and re-use the agent. Add --cleanup-agent option if you want to kill the created agent at the end of command.\nIn addtion, add --skip-agent option if you want to skip automatic starting ssh-agent. This is actually a case where you already have ssh-agent managed or you want to manually start the agent.\nExamples Show all node list. Simply executing kubectl ssh-jump gives you the list of destination nodes as well as command usage\n$ kubectl ssh-jump Usage: kubectl ssh-jump \u0026lt;dest_node\u0026gt; [options] Options: \u0026lt;dest_node\u0026gt; Destination node IP -u, --user \u0026lt;sshuser\u0026gt; SSH User name -i, --identity \u0026lt;identity_file\u0026gt; Identity key file -p, --pubkey \u0026lt;pub_key_file\u0026gt; Public key file --skip-agent Skip automatically starting SSH agent and adding SSH Identity key into the agent before SSH login (=\u0026gt; You need to manage SSH agent by yourself) --cleanup-agent Clearning up SSH agent at the end The agent is NOT cleaned up in case that --skip-agent option is given --cleanup-jump Clearning up sshjump pod at the end Default: Skip cleaning up sshjump pod -h, --help Show this message Example: .... List of destination node... Hostname aks-nodepool1-18558189-0 aks-nodepool1-18558189-1 aks-nodepool1-18558189-2 Then, SSH into a node aks-nodepool1-18558189-0 with options like:\nusernaem: azureuser identity:~/.ssh/id_rsa_k8s pubkey:~/.ssh/id_rsa_k8s.pub) $ kubectl ssh-jump aks-nodepool1-18558189-0 \\ -u azureuser -i ~/.ssh/id_rsa_k8s -p ~/.ssh/id_rsa_k8s.pub As explained in usage secion, username, identity, pubkey options are cached, therefore you can omit these options afterward.\n$ kubectl ssh-jump aks-nodepool1-18558189-0 You can pass the commands to run in the destination node like this (Suppose that username, identity, pubkey options are cached):\necho \u0026#34;uname -a\u0026#34; | kubectl ssh-jump aks-nodepool1-18558189-0 (Output) Linux aks-nodepool1-18558189-0 4.15.0-1035-azure #36~16.04.1-Ubuntu SMP Fri Nov 30 15:25:49 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux You can clean up sshjump pod at the end of the command with --cleanup-jump option, otherwise, the sshjump pod stay running by default.\n$ kubectl ssh-jump aks-nodepool1-18558189-0 \\ -u azureuser -i ~/.ssh/id_rsa_k8s -p ~/.ssh/id_rsa_k8s.pub \\ --cleanup-jump You can clean up ssh-agent at the end of the command with --cleanup-agent option, otherwise, the ssh-agent process stay running once it\u0026rsquo;s started.\n$ kubectl ssh-jump aks-nodepool1-18558189-0 \\ -u azureuser -i ~/.ssh/id_rsa_k8s -p ~/.ssh/id_rsa_k8s.pub \\ --cleanup-agent You can skip starting ssh-agent by giving --skip-agent. This is actually a case where you already have ssh-agent managed. Or you can start new ssh-agent and add an identity key to the ssh-agent like this:\n# Start ssh-agent manually $ eval `ssh-agent` # Add an arbitrary private key, give the path of the key file as an argument to ssh-add $ ssh-add ~/.ssh/id_rsa_k8s # Then, run the plugin with --skip-agent $ kubectl ssh-jump aks-nodepool1-18558189-0 \\ -u azureuser -i ~/.ssh/id_rsa_k8s -p ~/.ssh/id_rsa_k8s.pub \\ --skip-agent # At the end, run this if you want to kill the current agent $ ssh-agent -k ","permalink":"https://unofficialism.info/posts/easy-way-ssh-into-aks-cluster-node/","summary":"This is an article on how you can SSH into Azure Kubernetes Service (AKS) cluster node VMs using kubectl-plugin-ssh-jump.\nMotivation I wanted to SSH into Azure Kubernetes Service (AKS) cluster node VMs, then looking up azure docs I found a relevant page - Connect with SSH to Azure Kubernetes Service (AKS) cluster nodes for maintenance or troubleshooting. But when I first saw this procedure, I thought this was very troublesome. Lazy person like me couldn\u0026rsquo;t accept going thourgh all the steps just to SSH into AKS cluster nodes VMs.","title":"Easy way to SSH into Azure Kubernetes Service cluster node VMs"},{"content":"Set of demos to demonstrate Envoy Proxy features\nHTTP Routing: Simple Match Routing All traffic is routed by the front envoy to the service containers. Internally the traffic is routed to the service envoys, then the service envoys route the request to the flask app via the loopback address. In this demo, all traffic is routed to the service envoys like this:\nA request (path /service/blue \u0026amp; port 8000) is routed to service_blue A request (path /service/green \u0026amp; port 8000) is routed to service_green A request (path /service/red \u0026amp; port 8000) is routed to service_red Key definition 1 - virtual_hosts in front-envoy.yaml\nvirtual_hosts: - name: backend domains: - \u0026#34;*\u0026#34; routes: - match: prefix: \u0026#34;/service/blue\u0026#34; route: cluster: service_green - match: prefix: \u0026#34;/service/blue\u0026#34; route: cluster: service_blue - match: prefix: \u0026#34;/service/red\u0026#34; route: cluster: service_red Key definition 2 - clusters in front-envoy.yaml\nclusters: - name: service_blue connect_timeout: 0.25s type: strict_dns lb_policy: round_robin http2_protocol_options: {} hosts: - socket_address: address: service_blue port_value: 80 - name: service_green connect_timeout: 0.25s type: strict_dns lb_policy: round_robin http2_protocol_options: {} hosts: - socket_address: address: service_green port_value: 80 - name: service_red connect_timeout: 0.25s type: strict_dns lb_policy: round_robin http2_protocol_options: {} hosts: - socket_address: address: service_red port_value: 80 To continue, go to github\nHTTP Routing: Routing based on Header Condition Key definition 1 - virtual_hosts in front-envoy.yaml\nvirtual_hosts: - name: backend domains: - \u0026#34;*\u0026#34; routes: - match: prefix: \u0026#34;/service/blue\u0026#34; headers: - name: \u0026#34;x-canary-version\u0026#34; exact_match: \u0026#34;service_green\u0026#34; route: cluster: service_green - match: prefix: \u0026#34;/service/blue\u0026#34; route: cluster: service_blue - match: prefix: \u0026#34;/service/red\u0026#34; route: cluster: service_red Key definition 2 - clusters in front-envoy.yaml\nclusters: - name: service_blue connect_timeout: 0.25s type: strict_dns lb_policy: round_robin http2_protocol_options: {} hosts: - socket_address: address: service_blue port_value: 80 - name: service_green connect_timeout: 0.25s type: strict_dns lb_policy: round_robin http2_protocol_options: {} hosts: - socket_address: address: service_green port_value: 80 - name: service_red connect_timeout: 0.25s type: strict_dns lb_policy: round_robin http2_protocol_options: {} hosts: - socket_address: address: service_red port_value: 80 To continue, go to github\nHTTP Routing: Blue Green Traffic Splitting Key definition 1 - virtual_hosts in front-envoy.yaml\nvirtual_hosts: - name: backend domains: - \u0026#34;*\u0026#34; routes: - match: prefix: \u0026#34;/service/blue\u0026#34; route: weighted_clusters: clusters: - name: service_green weight: 10 - name: service_blue weight: 90 - match: prefix: \u0026#34;/service/red\u0026#34; route: cluster: service_red Key definition 2 - clusters in front-envoy.yaml\nclusters: - name: service_blue connect_timeout: 0.25s type: strict_dns lb_policy: round_robin http2_protocol_options: {} hosts: - socket_address: address: service_blue port_value: 80 - name: service_green connect_timeout: 0.25s type: strict_dns lb_policy: round_robin http2_protocol_options: {} hosts: - socket_address: address: service_green port_value: 80 - name: service_red connect_timeout: 0.25s type: strict_dns lb_policy: round_robin http2_protocol_options: {} hosts: - socket_address: address: service_red port_value: 80 To continue, go to github\nFault Injection Fault injection is a technique for improving the coverage of a test by introducing faults to test code paths, in particular error handling code paths, that might otherwise rarely be followed. The filter ( http_filters in the demo ) can be used to inject delays and abort requests with user-specified error codes.\nFront-proxy configurations are the same as the ones in HTTP Routing: Simple Match Routing. Differences from HTTP Routing: Simple Match Routing are the following 2 fault injections:\nFault injection abort (50% of requests will be aborted with 503 error code) for the requests to service_red Fault injection delay (50% of requests will be 10 seconds delayed) for the requests to service_blue Key definition 1 - http_filters in service-envoy-fault-injection-abort.yaml\nhttp_filters: - name: envoy.fault config: abort: http_status: 503 percentage: numerator: 50 denominator: HUNDRED For numerator and denominator of percentage, see type.FractionalPercent\nKey definition 2 - http_filters in service-envoy-fault-injection-delay.yaml\nhttp_filters: - name: envoy.fault config: delay: type: fixed fixed_delay: 10s percentage: numerator: 50 denominator: HUNDRED For fixed_delay and percentage of delay injection, see config.filter.fault.v2.FaultDelay\nTo continue, go to github\nCircuit Breaker Circuit Breaking lets you configure failure thresholds that ensure safe maximums after which these requests stop. This allows for a more graceful failure, and time to respond to potential issues before they become larger.\nCircuit Breaker is configured in service_red such that Circuit Breaker will be triggered with the following conditions: Envoy makes more than max connection#:1 Envoy makes more than max parallel requests#:1 Key definition - clusters in service-envoy-circuitbreaker.yaml\nclusters: - name: local_service connect_timeout: 0.25s type: strict_dns lb_policy: round_robin circuit_breakers: thresholds: max_connections: 1 max_pending_requests: 1 max_requests: 1 hosts: - socket_address: address: 127.0.0.1 port_value: 8080 For the detail of circuit_breakers configuration, see cluster.CircuitBreakers\nTo continue, go to github\nTimeouts and Retries Front-proxy configurations are the same as the ones in HTTP Routing: Simple Match Routing. Differences from HTTP Routing: Simple Match Routing are the following 2 additional behaviors:\nTimeouts (5 seconds) for the request to service_blue Retries that Envoy will attempt to do if service_red responds with any 5xx response code For Service Containers, delay fault injection and abort fault injection are configured in service_blue and service_red respectively (which are the same configuration as the ones in Fault Injection Demo)\nKey definition - virtual_hosts in front-envoy.yaml\nvirtual_hosts: - name: backend domains: - \u0026#34;*\u0026#34; routes: - match: prefix: \u0026#34;/service/blue\u0026#34; route: cluster: service_blue timeout: 5s - match: prefix: \u0026#34;/service/green\u0026#34; route: cluster: service_green - match: prefix: \u0026#34;/service/red\u0026#34; route: cluster: service_red retry_policy: retry_on: \u0026#34;5xx\u0026#34; num_retries: 3 per_try_timeout: 5s timeout: (Duration) Specifies the timeout for the route. If not specified, the default is 15s. For more detail, see timeout section in RouteAction retry_policy indicates the retry policy for all routes in this virtual host. For more detail on retry_policy, see route.RetryPolicy To continue, go to github\n","permalink":"https://unofficialism.info/posts/envoy-proxy-demos/","summary":"Set of demos to demonstrate Envoy Proxy features\nHTTP Routing: Simple Match Routing All traffic is routed by the front envoy to the service containers. Internally the traffic is routed to the service envoys, then the service envoys route the request to the flask app via the loopback address. In this demo, all traffic is routed to the service envoys like this:\nA request (path /service/blue \u0026amp; port 8000) is routed to service_blue A request (path /service/green \u0026amp; port 8000) is routed to service_green A request (path /service/red \u0026amp; port 8000) is routed to service_red Key definition 1 - virtual_hosts in front-envoy.","title":"Set of Envoy Proxy features demos"},{"content":"Today (Sept 25, 2018 JST), Azure Functions supports Python development using Python 3.6 on the Functions v2 (cross-platform) runtime. You can now use your Python code and dependencies on Linux-based Functions. This is an article on quick start with Azure Functions V2 Python (Preview) showing how you can quickly start Python function development on Azure Function V2 runtime.\n1. Prerequisites for Buidling \u0026amp; Testing Locally Python 3.6 (For Python function apps, you have to be running in a venv) Azure Functions Core Tools 2.0.3 or later Prerequisite 1 - Python version This is how you switch your python version using venv.\nFirst of all, install Python 3.6 if you don\u0026rsquo;t have on your local environemnt.\n$ python3.6 -V Python 3.6.1 Then, to build and test Python function with Azure Functions Core Tools (you\u0026rsquo;ll install after this), you need to setup a Python 3.6 virtual environemnt using venv (NOT, pyenv or some other virtual env tools).\n$ python -V Python 2.7.1 # create and activate virutal environemnt named \u0026#34;venv3.6\u0026#34; $ python3.6 -m venv venv3.6 $ source venv3.6/bin/activate $ Python -V Python 3.6.1 [NOTE] As virtualenv (venv) was included in Python3.3, you don\u0026rsquo;t need to install venv separately. It\u0026rsquo;s already in your Python 3.6\nPrerequisite 2 - Azure Functions Core Tools You need to install azure-functions-core-tools version 2.0.3 or later for buiding \u0026amp; testing Python functions on Azure Functions V2 runtime.\n# Check current package version (only if you already have azure-functions-core-tools installed) $ func --version 2.0.1-beta.35 $ npm list -g --depth=0 |grep azure-functions-core-tools â”œâ”€â”€ azure-functions-core-tools@2.0.1-beta.35 # Check available package versions $ npm info azure-functions-core-tools versions \u0026#39;2.0.1-beta.31\u0026#39;, \u0026#39;2.0.1-beta.32\u0026#39;, \u0026#39;2.0.1-beta.33\u0026#39;, \u0026#39;2.0.1-beta.34\u0026#39;, \u0026#39;2.0.1-beta.35\u0026#39;, \u0026#39;2.0.1-beta.37\u0026#39;, \u0026#39;2.0.1-beta.38\u0026#39;, \u0026#39;2.0.1-beta.39\u0026#39;, \u0026#39;2.0.1-beta.23-1\u0026#39;, \u0026#39;2.0.1-beta1.15\u0026#39;, \u0026#39;2.0.2\u0026#39;, \u0026#39;2.0.3\u0026#39; ] # Install speicific package version - 2.0.3 $ npm install -g azure-functions-core-tools@2.0.3 $ func --version 2.0.3 2. Create Python Function and run locally 2-1. Create Python Functions Project Create a local Python Functions project - v2projects\n$ func init v2projects --worker-runtime python Installing wheel package Installing azure-functions==1.0.0a4 package Installing azure-functions-worker==1.0.0a4 package Running pip freeze Writing .gitignore Writing host.json Writing local.settings.json Writing /Users/yoichika/dev/github/azure-functions-python-samples/v2projects/.vscode/extensions.json A new folder named v2projects is created. Then, change directory to this folder\n$ cd v2projects 2-2. Create a python function Check function template list\n$ func templates list C# Templates: Blob trigger Cosmos DB trigger Durable Functions activity Durable Functions HTTP starter Durable Functions orchestrator Event Grid trigger Event Hub trigger HTTP trigger Outlook message webhook creator Outlook message webhook deleter Outlook message webhook handler Outlook message webhook refresher Microsoft Graph profile photo API Queue trigger SendGrid Service Bus Queue trigger Service Bus Topic trigger Timer trigger JavaScript Templates: Blob trigger Cosmos DB trigger Event Grid trigger HTTP trigger Queue trigger SendGrid Service Bus Queue trigger Service Bus Topic trigger Timer trigger Python Templates: Blob trigger Cosmos DB trigger Event Grid trigger Event Hub trigger HTTP trigger Queue trigger Service Bus Queue trigger Service Bus Topic trigger Timer trigger Create a python funciton with \u0026ldquo;HTTP trigger\u0026rdquo; template\n$ func new --language Python --template \u0026#34;HTTP trigger\u0026#34; --name HttpTriggerPython Select a template: HTTP trigger Function name: [HttpTriggerPython] Writing /Users/yoichika/dev/github/azure-functions-python-samples/v2projects/HttpTriggerPython/sample.dat Writing /Users/yoichika/dev/github/azure-functions-python-samples/v2projects/HttpTriggerPython/__init__.py Writing /Users/yoichika/dev/github/azure-functions-python-samples/v2projects/HttpTriggerPython/function.json The function \u0026#34;HttpTriggerPython\u0026#34; was created successfully from the \u0026#34;HTTP trigger\u0026#34; template. 2-3. Local Testing Run the Functions host locally.\n$ func host start Then, send a test requst to the given endpoint for the HttpTrigger function\n$ curl http://localhost:7071/api/HttpTriggerPython?name=AzureFunctionV2 Hello AzureFunctionV2! 3. Create Linux FunctionApps (Preview Consumption App) Now you create Functions App to deploy and run your Python functions on Azure. You actually need Linux V2 Function Apps as publishing Python functions is only supported for Linux Function Apps. So let\u0026rsquo;s create the Azure Functions Linux Consumption App (which is in preview as of today Sept 25, 2018 JST).\n3-1. Whitelist request for accessing the Azure Functions Linux Consumption (preview) As guided in Azure Functions on Linux Preview, you need to email linuxazurefunctions at Microsoft dot com with your Azure subscription ID to get your ID whitelisted to access the Azure Functions Linux Consumption (Preview). [NOTE] This is only needed during its preview preriod.\n3-2. Install the Azure CLI extension for the Azure Functions Linux Consumption preview As a prerequisite, you need to install the Azure CLI extension for the Azure Functions Linux Consumption preview. Here is how you do:\n$ curl \u0026#34;https://functionscdn.azureedge.net/public/docs/functionapp-0.0.1-py2.py3-none-any.whl\u0026#34; \\ -o functionapp-0.0.1-py2.py3-none-any.whl $ az extension add --source functionapp-0.0.1-py2.py3-none-any.whl For more detail, see this doc\n3-3. Create a resource group RESOURCE_GROUP=\u0026#34;RG-azfuncv2\u0026#34; REGION=\u0026#34;eastus\u0026#34; az group create --name $RESOURCE_GROUP --location $REGION 3-4. Create an Azure Storage Account STORAGE_ACCOUNT=\u0026#34;azfuncv2linuxstore\u0026#34; az storage account create --name $STORAGE_ACCOUNT \\ --location $REGION \\ --resource-group $RESOURCE_GROUP \\ --sku Standard_LRS 3-5. Create a Empty Function App on Linux (Consumption Plan) Give your function app name to APP_NAME variable, and execute az command like this.\nAPP_NAME=\u0026#34;yoichikaazfuncv2linux001\u0026#34; az functionapp createpreviewapp --name $APP_NAME \\ --resource-group $RESOURCE_GROUP \\ --storage-account $STORAGE_ACCOUNT \\ -l $REGION \\ --runtime python \\ --is-linux (output) Your Linux, cosumption plan, function app \u0026#39;yoichikaazfuncv2linux001\u0026#39; has been successfully created but is not active until content is published usingAzure Portal or the Functions Core Tools. [NOTE] The Function App name needs to be unique across all apps in Azure.\nNow you\u0026rsquo;re ready to publish your functions to the App!\n4. Publish the Python Function You publish the Python functions to the function app ( named yoichikaazfuncv2linux001 here )\n# func azure functionapp publish \u0026lt;app_name\u0026gt; $ func azure functionapp publish yoichikaazfuncv2linux001 --force Getting site publishing info... pip download -r /Users/yoichika/dev/github/azure-functions-python-samples/v2projects/requirements.txt --dest /var/folders/mn/xw3hp_854lvb5yr2m_00s7sm0000gn/T/azureworkerry44_fwz pip download --no-deps --only-binary :all: --platform manylinux1_x86_64 --python-version 36 --implementation cp --abi cp36m --dest /var/folders/mn/xw3hp_854lvb5yr2m_00s7sm0000gn/T/azureworkerpcdk1t4g azure_functions_worker==1.0.0a4 pip download --no-deps --only-binary :all: --platform manylinux1_x86_64 --python-version 36 --implementation cp --abi cp36m --dest /var/folders/mn/xw3hp_854lvb5yr2m_00s7sm0000gn/T/azureworkerpcdk1t4g azure_functions==1.0.0a4 pip download --no-deps --only-binary :all: --platform manylinux1_x86_64 --python-version 36 --implementation cp --abi cp36m --dest /var/folders/mn/xw3hp_854lvb5yr2m_00s7sm0000gn/T/azureworkerpcdk1t4g protobuf==3.6.1 pip download --no-deps --only-binary :all: --platform manylinux1_x86_64 --python-version 36 --implementation cp --abi cp36m --dest /var/folders/mn/xw3hp_854lvb5yr2m_00s7sm0000gn/T/azureworkerpcdk1t4g grpcio_tools==1.14.2 pip download --no-deps --only-binary :all: --platform manylinux1_x86_64 --python-version 36 --implementation cp --abi cp36m --dest /var/folders/mn/xw3hp_854lvb5yr2m_00s7sm0000gn/T/azureworkerpcdk1t4g setuptools==40.4.3 pip download --no-deps --only-binary :all: --platform manylinux1_x86_64 --python-version 36 --implementation cp --abi cp36m --dest /var/folders/mn/xw3hp_854lvb5yr2m_00s7sm0000gn/T/azureworkerpcdk1t4g grpcio==1.14.2 pip download --no-deps --only-binary :all: --platform manylinux1_x86_64 --python-version 36 --implementation cp --abi cp36m --dest /var/folders/mn/xw3hp_854lvb5yr2m_00s7sm0000gn/T/azureworkerpcdk1t4g six==1.11.0 Preparing archive... Uploading content... Upload completed successfully. Deployment completed successfully. Removing \u0026#39;WEBSITE_CONTENTSHARE\u0026#39; from \u0026#39;yoichikaazfuncv2linux001\u0026#39; Removing \u0026#39;WEBSITE_CONTENTAZUREFILECONNECTIONSTRING\u0026#39; from \u0026#39;yoichikaazfuncv2linux001\u0026#39; Syncing triggers... [NOTE]\nif you run func azure functionapp publish without --force opiton, you\u0026rsquo;ll come up with the following the message: Your app is configured with Azure Files for editing from Azure Portal. To force publish use --force. This will remove Azure Files from your app. Please be noted that when deployging from func command( ie, running from a package), the file system in Azure Function App is read-only and no changes can be made to the files. To make any changes update the content in your zip file and WEBSITE_RUN_FROM_PACKAGE app setting. Looks like pulishing has completed successfully, so let\u0026rsquo;s access to the function on Azure\n$ curl https://yoichikaazfuncv2linux001.azurewebsites.net/api/HttpTriggerPython?name=AzureFunctionV2 Hello AzureFunctionV2! Enjoy Azure Functions V2 Python!\nLINKS azure-functions-python-worker wiki: Create your first Python function Azure Functions on Linux Preview Create your first function running on Linux using the Azure CLI (preview) ","permalink":"https://unofficialism.info/posts/quick-start-with-azure-function-v2-python-preview/","summary":"Today (Sept 25, 2018 JST), Azure Functions supports Python development using Python 3.6 on the Functions v2 (cross-platform) runtime. You can now use your Python code and dependencies on Linux-based Functions. This is an article on quick start with Azure Functions V2 Python (Preview) showing how you can quickly start Python function development on Azure Function V2 runtime.\n1. Prerequisites for Buidling \u0026amp; Testing Locally Python 3.6 (For Python function apps, you have to be running in a venv) Azure Functions Core Tools 2.","title":"Quick Start with Azure Functions V2 Python (Preview)"},{"content":"This is an article on how you can configure Service Account and RoleBinding in order to make Dashbaord work. As of release Kubernetes v1.7, Dashboard no longer has full admin privileges granted by default. All the privileges are revoked and only minimal privileges granted, that are required to make Dashboard work. With default priviledge, you\u0026rsquo;ll see the following errors showed up on the Dashboard.\n[Azure Kubernetes Service (AKS)] RBAC is enabled by default Since Azure CLI version 2.0.40, RBAC is enabled by default. As you can see in the Azure command help, your cluster is RBAC enabled unless you specify --disable-rbac during the creation of the cluster.\n$ az --version azure-cli (2.0.43) $ az aks create --help --disable-rbac : Disable Kubernetes Role-Based Access Control. --enable-rbac -r [Deprecated] : Enable Kubernetes Role-Based Access Control. Default: enabled. Argument \u0026#39;enable_rbac\u0026#39; has been deprecated and will be removed in a future release. Use \u0026#39;--disable-rbac\u0026#39; instead. Option 1: Access to Dashboard with your Service Account In option 1, I introduce how to give priviledge your Service Account and access to the Dashboard with the account. Actually there are a couple of authorization options, and here I introduce how to authorize with Bear Token\n[NOTE] According to this,\nAs of release 1.7 Dashboard supports user authentication based on:\nAuthorization: Bearer header passed in every request to Dashboard. Supported from release 1.6. Has the highest priority. If present, login view will not be shown. Bearer Token that can be used on Dashboard login view. Username/password that can be used on Dashboard login view (Disabled by default) Kubeconfig file that can be used on Dashboard login view 1-1. Create your Service Account for Dashboard access First of all, create your Service Account my-admin-user like this:\n$ kubectl create serviceaccount my-admin-user -n kube-system Or you can create the Service Account with the following YAML my-sa.yaml and deploying it with kubectl create -f my-sa.yaml:\n# my-sa.yaml apiVersion: v1 kind: ServiceAccount metadata: name: my-admin-user namespace: kube-system Check if your Service Account (my-admin-user) has been added.\n$ kubectl get sa -n kube-system NAME SECRETS AGE addon-http-application-routing-external-dns 1 9d addon-http-application-routing-nginx-ingress-serviceaccount 1 9d attachdetach-controller 1 9d certificate-controller 1 9d clusterrole-aggregation-controller 1 9d cronjob-controller 1 9d daemon-set-controller 1 9d default 1 9d deployment-controller 1 9d disruption-controller 1 9d endpoint-controller 1 9d generic-garbage-collector 1 9d heapster 1 9d horizontal-pod-autoscaler 1 9d job-controller 1 9d kube-dns 1 9d kube-proxy 1 9d kube-svc-redirector 1 9d kubernetes-dashboard 1 9d my-admin-user 1 15s namespace-controller 1 9d node-controller 1 9d persistent-volume-binder 1 9d pod-garbage-collector 1 9d pv-protection-controller 1 9d pvc-protection-controller 1 9d replicaset-controller 1 9d replication-controller 1 9d resourcequota-controller 1 9d route-controller 1 9d service-account-controller 1 9d service-controller 1 9d statefulset-controller 1 9d ttl-controller 1 9d tunnelfront 1 9d 1-2. Binding the role cluster-admin to the Service Account Create a ClusterRoleBinding which gives the role cluster-admin (= full admin priviledge) to the ServiceAccount my-admin-user\n$ kubectl create clusterrolebinding my-admin-user -n kube-system --clusterrole=cluster-admin --serviceaccount=kube-system:my-admin-user Or you can grant the priviledges with the following YAML my-sa-binding.yaml and deploying it with kubectl create -f my-sa-binding.yaml:\n# my-sa-binding.yaml apiVersion: rbac.authorization.k8s.io/v1beta1 kind: ClusterRoleBinding metadata: name: my-admin-user roleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: cluster-admin subjects: - kind: ServiceAccount name: my-admin-user namespace: kube-system 1-3. Authentication Option - Give Bear Token at Dashboard login view 1-3-1. Get the Token of the ServiceAccount $ kubectl get secret $(kubectl get serviceaccount my-admin-user -n kube-system -o jsonpath=\u0026#34;{.secrets[0].name}\u0026#34;) -o jsonpath=\u0026#34;{.data.token}\u0026#34; -n kube-system | base64 --decode Or you can obtain the token step by step like this:\n# Get secret name for my-admin-user $ kubectl get serviceaccount my-admin-user -n kube-system -o yaml apiVersion: v1 kind: ServiceAccount metadata: creationTimestamp: 2018-08-11T06:53:34Z name: my-admin-user namespace: kube-system resourceVersion: \u0026#34;1075968\u0026#34; selfLink: /api/v1/namespaces/kube-system/serviceaccounts/my-admin-user uid: 44142169-9d33-11e8-b7d0-de454880a5dc secrets: - name: my-admin-user-token-nzp4f # Get secret string and base64 decoded it $ kubectl get secret my-admin-user-token-nzp4f -n kube-system -o jsonpath=\u0026#34;{.data.token}\u0026#34; | base64 --decode eyJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJteS1hZG1pbi11c2VyLXRva2VuLW56cDRmIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6Im15LWFkbWluLXVzZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiI0NDE0MjE2OS05ZDMzLTExZTgtYjdkMC1kZTQ1NDg4MGE1ZGMiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZS1zeXN0ZW06bXktYWRtaW4tdXNlciJ9.2ulwCWd7MOnQjoecAY2NoleIxcHD8tda97ud3cK-kHWmdCodAejvddA4YjYozzBu2bWNA83aVTvKAn5-Uv1DC47U5FPh2LXAXNPXn4PyrdLO7TFZdHYmkvUgJKsg25vJvJmsWF9eQOinjjh_g16aGgdxrWz0NGJz5d1eE5GDP5NXXTTgxXlD_GFQduhlq8kc89dhpDUXMYe60-KzZvNaQhIskPsnxHMix1JrHEdtfciFhHRb2CBNjPWfcg455NGoS9S-k0qTfoIHYJC627p75E8TGqyTIa8TSg8vaif4XWgeg_OZWqEIGHTIrhEAGO4ElFijdZuzAg2-v9BGWe8i4q1i70ca5CwReJTG8t13eeOoEkq--VbhDAMY6rxmx-hi9dwf-zjsD233MdHJLh1yRi0eo_k5ov7fwDDsLQXeCTBIjSAzorvXseWr5m9sQ7yREbjDXCOsHbYo5xNV5ii-yOlxYyiqPxZZnnSwzllj1lwPDLSL0MyxkR9siF52vbkNDe6qdYYMqPtA-jTMIw_iLlB-WeN1Fx8423c4x5wV6IGPJZFuOYZhB0ra4jfRSS39vesaNodW8RjHUiuOSVA8_j-DxwOxa8prynALFWGswSMy6PfVQydouU6vammeqPBel9-IqBeTXY-57YumELG1PdcOcxdrBCZUlxBvJWbItxA 1-3-2. Give Bear Token at Dashboard login view Now that you have a bear token that you need to grant the full priviledges to your Service Account, let\u0026rsquo;s access to the Dashboard login view.\nFirst of all, create a proxy to the dashboard:\n$ kubectl proxy Starting to serve on 127.0.0.1:8001 Then, access to the Dashboard login page:\n$ open http://localhost:8001/api/v1/namespaces/kube-system/services/kubernetes-dashboard/proxy/#!/login Or if it\u0026rsquo;s on Azure, you can leverage Azure CLI command to access the Dashboard like this:\n$ az aks browse --resource-group \u0026lt;RESOURCE_GROUP\u0026gt; --name \u0026lt;CLUSTER_NAME\u0026gt; $ open http://127.0.0.1:8001/#!/login You will see the following Dashboard login view. Choose Token option and enter the bear token you got above. You will be able to access and operate with the Dashboard without any errors. Easy login by giving Authorization header using Browser extention As introduced in here, install Requestly browser plugin and configure to make Dashboard use authorization header. You simply need to configure the plugin to pass the following header in accessing the dashboard:\nAuthorization: Bearer \u0026lt;token\u0026gt; HERE is the example screen shot:\nOption2: Granting admin privileges to Dashboard\u0026rsquo;s Service Account In Option 2, I introduce how to give full privilege (role: cluster-admin) to the Dashboard\u0026rsquo;s Service Account kubernetes-dashboard. With this option, you can skip the authorization process that you do in the option 1 to access Dashboard. However, as mentioned here, granting admin privileges to Dashboard\u0026rsquo;s Service Account might be a security risk.\nFirst of all, create a ClusterRoleBinding which gives the role cluster-admin (= full admin priviledge) to the ServiceAccount kubernetes-dashboard\n$ kubectl create clusterrolebinding kubernetes-dashboard -n kube-system --clusterrole=cluster-admin --serviceaccount=kube-system:kubernetes-dashboard Or you can do the same with the following YAML dashboard-sa-binding.yaml and deploying it with kubectl create -f dashboard-sa-binding.yaml:\n# dashboard-sa-binding.yaml apiVersion: rbac.authorization.k8s.io/v1beta1 kind: ClusterRoleBinding metadata: name: kubernetes-dashboard labels: k8s-app: kubernetes-dashboard roleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: cluster-admin subjects: - kind: ServiceAccount name: kubernetes-dashboard namespace: kube-system Finally, access to the Dashboard. You\u0026rsquo;ll be able to access and operate without any errors.\nLINKS Access Control for Dashboard Service Account Permissions in Using RBAC Authorization @ kubernetesio, ","permalink":"https://unofficialism.info/posts/accessing-rbac-enabled-kubernetes-dashboard/","summary":"This is an article on how you can configure Service Account and RoleBinding in order to make Dashbaord work. As of release Kubernetes v1.7, Dashboard no longer has full admin privileges granted by default. All the privileges are revoked and only minimal privileges granted, that are required to make Dashboard work. With default priviledge, you\u0026rsquo;ll see the following errors showed up on the Dashboard.\n[Azure Kubernetes Service (AKS)] RBAC is enabled by default Since Azure CLI version 2.","title":"Accessing RBAC enabled Kubernetes Dashboard"},{"content":"Iâ€™ve moved my blog site from Wordpress to Jekyll based Github page. There are a few reasons for this:\nI wanted to manage my blog data on Github I wanted to switch from HTML based to Markdown I wanted more static approach like generating once, not dynamically rendering for every request (for performance reason) After a few minutes of googling, I came up with Jekyll and found it much easier to manage my blog data with Jekyll than with Wordpress. I love Jekyll\u0026rsquo;s simplicity. For the one who want to do the same migration, I\u0026rsquo;d like to share memo on how I migrated the blog site from Wordpress to Jekyll based Github page.\nWhat to do (What I\u0026rsquo;ve done) [ENV] Wordpress is running on Ubuntu 16.04, and I work on all migration works on MacOS (10.13.5) Importing my posts from a self-hosted Wordpress Install jekyll-import ruby gem and all additional packages needed to import my posts from a self-hosted Wordpress Import my posts from the Wordpress Convert HTML files to Markdown format files (including manual works) Publish the site uisng Jekyll and Github Pages Check ruby and github-pages version used in Github page, and install the same github-pages gem on the same ruby version Run Jekyll locally and verify the site content Create Github project for hosting the site Publish the site to Github uisng git Setup Custom domain Tips Importing my posts from a self-hosted Wordpress Install ruby gem packages to import posts from Wordpress First, check ruby version as jekyll require \u0026gt; ruby-2.X, and upgrade its version if it\u0026rsquo;s not \u0026gt; ruby-2.X (I use rbenv to manage multiple ruby versions on MacOS)\n$ ruby --version ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-darwin17] Install jekyll-import ruby gem and all additional packages needed to import my posts from a self-hosted Wordpress\n$ gem install jekyll-import # Additional packages for importing from Wordpress $ gem install sequel $ gem install unidecode $ gem install htmlentities $ gem install mysql2 Import my posts from the Wordpress Run the following command to import my posts from the hosted Wordpress. Make sure that MySQL server used in Wordpress is accessible\nruby -rubygems -e \u0026#39;require \u0026#34;jekyll-import\u0026#34;; JekyllImport::Importers::WordPress.run({ \u0026#34;dbname\u0026#34; =\u0026gt; \u0026#34;\u0026lt;db name\u0026gt;\u0026#34;, \u0026#34;user\u0026#34; =\u0026gt; \u0026#34;\u0026lt;db user\u0026gt;\u0026#34;, \u0026#34;password\u0026#34; =\u0026gt; \u0026#34;\u0026lt;db password\u0026gt;\u0026#34;, \u0026#34;host\u0026#34; =\u0026gt; \u0026#34;\u0026lt;db host or IP\u0026gt;\u0026#34;, \u0026#34;port\u0026#34; =\u0026gt; \u0026#34;\u0026lt;db port: 3306\u0026gt;\u0026#34;, \u0026#34;socket\u0026#34; =\u0026gt; \u0026#34;\u0026#34;, \u0026#34;table_prefix\u0026#34; =\u0026gt; \u0026#34;wp_\u0026#34;, \u0026#34;site_prefix\u0026#34; =\u0026gt; \u0026#34;\u0026#34;, \u0026#34;clean_entities\u0026#34; =\u0026gt; true, \u0026#34;comments\u0026#34; =\u0026gt; false, \u0026#34;categories\u0026#34; =\u0026gt; true, \u0026#34;tags\u0026#34; =\u0026gt; true, \u0026#34;more_excerpt\u0026#34; =\u0026gt; true, \u0026#34;more_anchor\u0026#34; =\u0026gt; true, \u0026#34;status\u0026#34; =\u0026gt; [\u0026#34;publish\u0026#34;] })\u0026#39; All imported blog ports (in HTML) are stored in _posts directory. See also Jekyll documentation\nConvert HTML files to Markdown format files (including manual works) Frist, I converted all HTML files stored in _posts directory to markdown using h2m npm package\n# Install h2m npm package $ npm install h2m -g # Here is how to conver html to markdown using h2m # h2m test.html \u0026gt; test.md # Run the following one liner converted all HTML files to markdown for h in `ls -1 *.html`;do echo $h; m=$(echo $h | sed s/\\.html//g).md; h2m $h \u0026gt; $m; ;done Then, do some manual modification to *.md files. Markdown don\u0026rsquo;t support all HTML components such as embeded, iframe, align, etc. What I did for this modification parts are basically:\nAll embeded parts such as Youtube video, slideshare, and gist links (Markdown doesn\u0026rsquo;t support embeded tags) Table tags part (I used Wordpress Table plugin that express table with very special tag, which of course can not be automatically convered to Markdown ) Markdown CheatSheet was very helpful in this part\nPublish the site uisng Jekyll and Github Pages Install the same github-pages gem and ruby as the ones used in Github page Go to this page to get ruby and github-pages version used in Github page. This time it was\nruby: 2.4.2 github-pages: 186 Then, I installed the exactly the same version of ruby and github-pages gem on my local\n# Install Ruby using rbenv $ rbenv install 2.4.2 $ rbenv global 2.4.2 # Install github-pages ruby gem package $ gem install github-pages -v 186 Run Jekyll locally and verify the site content Create Jekyll template site and copy all blog pages (Markdown) on to _posts directory under the site template root\n# Check jekyll version $ jekyll -v jekyll 3.7.3 # Create new Jekyll template site with jekyll command (here I create template site named `myblog`) $ jekyll new myblog $ tree myblog myblog â”œâ”€â”€ 404.html â”œâ”€â”€ Gemfile â”œâ”€â”€ _config.yml â”œâ”€â”€ _posts â”‚Â â””â”€â”€ 2018-07-06-welcome-to-jekyll.markdown â”œâ”€â”€ about.md â””â”€â”€ index.md # Remove Gemfile # Ruby will use the contents of your Gemfile to build your Jekyll site. So you basically add the same version of github-pages and ruby to Gemfile as the ones in Github Pages, but I removed it to make life simple as I\u0026#39;ve already synced the local version of github-pages and ruby with the ones in Github Pages but. If you possibly run Jekyll site on multiple environments, it\u0026#39;s definitly better to manage package versions with Gemfile $ rm Gemfile # Copy all blog pages (Markdown) on to `_posts` directory under the site template root $ cp *.md _posts/ Run the local webserver like this and verify the site content:\n$ jekyll s $ curl http://localhost:4000 See also Setting up your GitHub Pages site locally with Jekyll\nCreate Github project for hosting the site Create my user site by following instructions in https://pages.github.com/. In this case, I\u0026rsquo;ve created yokawasa.github.io under my account https://github.com/yokawasa, by which I can access *.html|*.md in github.com/yokawasa/yokawasa.github.io with the URL of https://yokawasa.github.io/(*.html|*.md)\nPublish the site to Github uisng git Copy all files under Jekyll site content that I\u0026rsquo;ve verified onto yokawasa.github.io and push them to Github\n$ git clone https://github.com/yokawasa/yokawasa.github.io $ cp -pr myblog/* yokawasa.github.io/ # make sure to copy .gitignore file as well $ cd yokawasa.github.io $ git add -all $ git commit -m \u0026#34;Initial commit\u0026#34; $ git push -u origin master $ open https://yokawasa.github.io Setup Custom domain I added my custom domain (unofficialism.info) to my Github page site by following Quick start: Setting up a custom domain. Here are what I\u0026rsquo;ve actually done:\nFirst, check my current DNS record for my custom domain\n$ dig +noall +answer unofficialism.info unofficialism.info. 146 IN A XX.XXX.XXX.XX Then, follow my DNS provider\u0026rsquo;s instructions to create A records that point my custom domain to the following IP addresses (These are fixed IPs but these IPs can be obtained simply by running dig for username.github.com):\n185.199.108.153 185.199.109.153 185.199.110.153 185.199.111.153 Confirm that the DNS record is set up correctly\n$ dig +noall +answer unofficialism.info unofficialism.info. 430 IN A 185.199.108.153 unofficialism.info. 430 IN A 185.199.109.153 unofficialism.info. 430 IN A 185.199.110.153 unofficialism.info. 430 IN A 185.199.111.153 In addition, add my custom domain for my GitHub Pages site in Github Page setting page by following Adding or removing a custom domain for your GitHub Pages site\nFinally, confirm the access to my Github page with my custom domain\n$ curl https://unofficialism.info ","permalink":"https://unofficialism.info/posts/moving-to-jekyll-based-github-page/","summary":"Iâ€™ve moved my blog site from Wordpress to Jekyll based Github page. There are a few reasons for this:\nI wanted to manage my blog data on Github I wanted to switch from HTML based to Markdown I wanted more static approach like generating once, not dynamically rendering for every request (for performance reason) After a few minutes of googling, I came up with Jekyll and found it much easier to manage my blog data with Jekyll than with Wordpress.","title":"Moving to Jekyll based Github page"},{"content":"å…ˆæ—¥ã€4æœˆ19æ—¥ã«é–‹å‚¬ã•ã‚ŒãŸJapan Container Days v18.04ã«ã¦ã€ŒKubernetes x PaaS â€“ ã‚³ãƒ³ãƒ†ãƒŠã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®NoOpsã¸ã®æŒ‘æˆ¦ã€ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«ã§ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’æ‹…å½“ã•ã›ã¦ã„ãŸã ã„ãŸã€‚ãã®åã®é€šã‚Šãƒ¡ã‚¤ãƒ³ãŒKubernetesã§ã€Kubernetesã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã„ã¦NoOpsï¼ˆé‹ç”¨ãƒ¬ã‚¹ï¼‰ã‚’ç›®æŒ‡ã™ãŸã‚ã®ã«ã©ã†ã„ã£ãŸå·¥å¤«ãŒã§ãã‚‹ã®ã‹ã€ã©ã†ã„ã£ãŸã‚‚ã®ã‚’æ´»ç”¨ã—ã¦ã„ã‘ã°ã‚ˆã„ã®ã‹ã€ã¨ã„ã†å†…å®¹ã§ã™ã€‚ã“ã®ãƒ–ãƒ­ã‚°ã§ã¯Japan Container Daysã§ã®ç™ºè¡¨ã«ä½¿ç”¨ã—ãŸã‚¹ãƒ©ã‚¤ãƒ‰ã®å…±æœ‰ã¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ä¸­ã®ã‚µãƒ³ãƒ—ãƒ«ã‚„ãƒ‡ãƒ¢ã«ã¤ã„ã¦è£œè¶³ã•ã›ã¦ã„ãŸã ãã€‚\nSession Slides Kubernetes x PaaS â€“ ã‚³ãƒ³ãƒ†ãƒŠã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã® NoOpsã¸ã®æŒ‘æˆ¦ from Yoichi Kawasaki\nè£œè¶³æƒ…å ± 1. Open Service Broker for Azureã§Azure Database for MySQLã®åˆ©ç”¨ ã‚¹ãƒ©ã‚¤ãƒ‰ã§ãŠè¦‹ã›ã—ãŸå®Ÿéš›ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ã¦Azure Database for MySQLã®ã‚µãƒ¼ãƒ“ã‚¹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆã€ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã€ãã—ã¦å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ã®åˆ©ç”¨ã¾ã§ã®æµã‚Œã‚’ç´¹ä»‹ã•ã›ã¦ã„ãŸã ãã€‚\nOpen Service Broker for Azureãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®Githubã«ã‚ã‚‹ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«mysql-instance.yamlã¨mysql-binding.yamlã‚’ä½¿ã£ã¦ãã‚Œãã‚ŒServiceInstanceã¨ServiceBindingã‚’ä½œæˆã™ã‚‹ `\n# Provisioning the database, basic50 plan ... $ kubectl create -f mysql-instance.yaml # Wait until ServiceInstance named example-mysql-instance get ready \u0026#39;Status =\u0026gt; Ready\u0026#39;, # then execute the following to create a binding for this new database, $ kubectl create -f mysql-binding.yaml ã“ã‚Œã§example-mysql-secretã¨ã„ã†åå‰ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒä½œæˆã•ã‚Œã€ãã“ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒAzure Database for MySQLã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¨ã®æ¥ç¶šå¿…è¦ãªæƒ…å ±ãŒæ ¼ç´ã•ã‚Œã‚‹ã€‚ã“ã“ã§ã¯MySQLã«æ¥ç¶šã—ã¦å˜ç´”ãªå‡¦ç†ã‚’ã™ã‚‹ã ã‘ã®Pythonã‚¢ãƒ—ãƒªã§ãƒ†ã‚¹ãƒˆã™ã‚‹ã€‚ã‚¢ãƒ—ãƒªã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®ãŸã‚ã«ä¸‹è¨˜YAML (mysql-deploy.yaml)ã‚’ç”¨æ„ã—ãŸãŒæ³¨ç›®ã™ã¹ãã¯YAMLã®ä¸­ã§MySQLã®æ¥ç¶šå¿…è¦ãªæƒ…å ±ã‚’ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆexample-mysql-secretã‹ã‚‰å–å¾—ã—ã¦ã„ã‚‹ç‚¹ã€‚\napiVersion: apps/v1beta1 kind: Deployment metadata: name: sample-osba-mysql spec: replicas: 1 template: metadata: labels: app: sample-osba-mysql spec: containers: - name: osba-mysql-demo image: yoichikawasaki/sample-osba-mysql:0.0.1 ports: - containerPort: 80 env: - name: MYSQL_USER valueFrom: secretKeyRef: key: username name: example-mysql-secret - name: MYSQL_PASSWORD valueFrom: secretKeyRef: key: password name: example-mysql-secret - name: MYSQL_HOST valueFrom: secretKeyRef: key: host name: example-mysql-secret - name: MYSQL_DATABASE valueFrom: secretKeyRef: key: database name: example-mysql-secret ã¾ãŸã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¸­ã§ã¯YAMLã§æŒ‡å®šã•ã‚ŒãŸç’°å¢ƒå¤‰æ•°ã‹ã‚‰MySQLæ¥ç¶šã«å¿…è¦ãªæƒ…å ±ã‚’å–å¾—ã—ã¦ã„ã‚‹ã€‚ä»¥ä¸‹ã€ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã®ã‚³ãƒ¼ãƒ‰(sample-osba-mysql.py)ã€‚\nimport MySQLdb as db import os # MySQL configurations MYSQL_USER = os.environ[\u0026#39;MYSQL_USER\u0026#39;] MYSQL_PASSWORD = os.environ[\u0026#39;MYSQL_PASSWORD\u0026#39;] MYSQL_HOST = os.environ[\u0026#39;MYSQL_HOST\u0026#39;] MYSQL_DATABASE = os.environ[\u0026#39;MYSQL_DATABASE\u0026#39;] print(MYSQL_USER) print(MYSQL_PASSWORD) print(MYSQL_HOST) print(MYSQL_DATABASE) def main(): conn = db.connect( user=MYSQL_USER, passwd=MYSQL_PASSWORD, host=MYSQL_HOST, db=MYSQL_DATABASE ) c = conn.cursor() sql = \u0026#39;drop table if exists test\u0026#39; c.execute(sql) sql = \u0026#39;create table test (id int, content varchar(32))\u0026#39; c.execute(sql) sql = \u0026#39;show tables\u0026#39; c.execute(sql) print(\u0026#39;===== table list =====\u0026#39;) print(c.fetchone()) # insert records sql = \u0026#39;insert into test values (%s, %s)\u0026#39; c.execute(sql, (1, \u0026#39;hoge\u0026#39;)) datas = [ (2, \u0026#39;foo\u0026#39;), (3, \u0026#39;bar\u0026#39;) ] c.executemany(sql, datas) # select records sql = \u0026#39;select * from test\u0026#39; c.execute(sql) print(\u0026#39;===== Records =====\u0026#39;) for row in c.fetchall(): print(\u0026#39;Id:\u0026#39;, row[0], \u0026#39;Content:\u0026#39;, row[1]) conn.commit() c.close() conn.close() if __name__ == \u0026#39;__main__\u0026#39;: main() ãã‚Œã§ã¯æ¬¡ã®ã‚ˆã†ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹\n$ kubectl create -f mysql-deploy.yaml å…¨ã¦ã®éç¨‹ãŒå•é¡Œãªã‘ã‚Œã°ã€ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã®Podã®ãƒ­ã‚°ã‚’ã¿ã‚‹ã¨ã€ä¸‹è¨˜ã®ã‚ˆã†ãªå‡ºåŠ›ãŒç¢ºèªã§ãã‚‹ã¯ãšã ã€‚ã“ã‚Œã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒMySQLã¨ã®æ¥ç¶šã—ã¦å‡¦ç†ãŒè¡Œã‚ã‚ŒãŸã“ã¨ã‚’è¡¨ã™ã€‚ã“ã“ã§ã¯sternã‚’ä½¿ã£ã¦ãƒ­ã‚°ã‚’å‚ç…§ã—ã¦ã„ã‚‹ã€‚\n$ stern \u0026lt;ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®Podå\u0026gt; + sample-osba-mysql-684ccd679f-nl252 â€º osba-mysql-demo sample-osba-mysql-684ccd679f-nl252 osba-mysql-demo o36e6ivtni@8ae3fca5-9b5c-471b-99d8-0eeb567c6acb sample-osba-mysql-684ccd679f-nl252 osba-mysql-demo sE8UFm5cN4tgIeNF sample-osba-mysql-684ccd679f-nl252 osba-mysql-demo 8ae3fca5-9b5c-471b-99d8-0eeb567c6acb.mysql.database.azure.com sample-osba-mysql-684ccd679f-nl252 osba-mysql-demo v8i0xxlerz sample-osba-mysql-684ccd679f-nl252 osba-mysql-demo ===== table list ===== sample-osba-mysql-684ccd679f-nl252 osba-mysql-demo (\u0026#39;test\u0026#39;,) sample-osba-mysql-684ccd679f-nl252 osba-mysql-demo ===== Records ===== sample-osba-mysql-684ccd679f-nl252 osba-mysql-demo Id: 1 Content: hoge sample-osba-mysql-684ccd679f-nl252 osba-mysql-demo Id: 2 Content: foo sample-osba-mysql-684ccd679f-nl252 osba-mysql-demo Id: 3 Content: bar 2. ãƒ‡ãƒ¢ - Virtual Kubelet + Azure Container Instances Demo Video: Image Processing with Virtual Kubelet + ACI Demo Demo Code: https://github.com/rbitia/aci-demos 3. ãƒ‡ãƒ¢ - Traffic Routing with Istio Demo Video: Traffic Routing with Istio Demo ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸­ã«æ™‚é–“ãŒè¶³ã‚Šãªãã¦ãƒãƒ©è¦‹ã›ç¨‹åº¦ã—ã‹ãŠè¦‹ã›ã§ããªã‹ã£ãŸã‚µãƒ¼ãƒ“ã‚¹ãƒ¡ãƒƒã‚·ãƒ¥ã«Istioï¼ˆIstio-0.5.0ï¼‰ã‚’ä½¿ã£ãŸãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ‡ãƒ¢ã€‚ã›ã£ã‹ããªã®ã§ã“ã“ã§å…¨ã¦ã®æ‰‹é †ã‚’ç´¹ä»‹ã•ã›ã¦ã„ãŸã ãã€‚ã‚¢ãƒ—ãƒªãªå˜ç´”ãªã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®ã‚¿ã‚°åã‚’è¡¨ç¤ºã™ã‚‹ã ã‘ã®Flaskã‚¢ãƒ—ãƒªã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹\nå¿…è¦ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§\nmyversion-v1.yaml myversion-v2.yaml route-default-v1.yaml route-canary.yaml route-conditional-v2.yaml ã¾ãšã¯V1ã¨V2ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã€‚ã“ã“ã§ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®Manifestã«å¯¾ã—ã¦istioctlã®kube-injectã§Istioã®è¨­å®šãŒçµ„ã¿è¾¼ã¾ã‚ŒãŸManifestã‚’å…ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã—ã¦ã„ã‚‹ã€‚\n## ver1.0 $ kubectl apply -f \u0026lt;(istioctl kube-inject --debug -f myversion-v1.yaml) ## ver2.0 $ kubectl apply -f \u0026lt;(istioctl kube-inject --debug -f myversion-v2.yaml) ä¸Šè¨˜ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã§ä½œã‚‰ã‚ŒãŸIngressã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®IPã€PORTã‚’å–å¾—ã‚’æ¬¡ã®ã‚ˆã†ã«å–å¾—ã™ã‚‹ã€‚ã‚µãƒ³ãƒ—ãƒ«ã§ä½¿ç”¨ã—ã¦ã„ã‚‹Flaskã‚¢ãƒ—ãƒªã§æŒ‡å®šã—ã¦ã„ã‚‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒ/versionã§ã‚ã‚‹ã‹ã‚‰ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯GATEWAY_IP:GATEWAY_PORT/versionãŒã¨ãªã‚‹ã€‚\nGATEWAY_IP=$(kubectl get po -n istio-system -l \\ istio=ingress -n istio-system \\ -o \u0026#39;jsonpath={.items[0].status.hostIP}\u0026#39;) GATEWAY_PORT=$(kubectl get svc istio-ingress \\ -n istio-system -n istio-system \\ -o \u0026#39;jsonpath={.spec.ports[0].nodePort}\u0026#39;) GATEWAY_URL=$GATEWAY_IP:$GATEWAY_PORT echo $GATEWAY_URL ã¾ãšã¯ã€Istioã«å…¨ã¦ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’v1ã‚¢ãƒ—ãƒªã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã‚ˆã†ã«è¨­å®šã™ã‚‹\n$ istioctl create -f route-default-v1.yaml æ¬¡ã®ã‚ˆã†ã«é€£ç¶šã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦å…¨ã¦ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒV1ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª\n$ while true; do curl http://${GATEWAY_URL}/version; sleep 1; done I am v1.111111111 I am v1.111111111 I am v1.111111111 I am v1.111111111 ç¶šã„ã¦ã€Istioã«ã•ãã»ã©ã®100% V1ã®è¨­å®šã‚’å‰Šé™¤ã—ã¦ã€æ–°ã—ã90%ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’v1ã‚¢ãƒ—ãƒªã« 10%ã‚’V2ã‚¢ãƒ—ãƒªã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã‚ˆã†ã«è¨­å®šã™ã‚‹\n$ istioctl delete routerule myversion-default-v1 -n default $ istioctl create -f route-canary.yaml å‰ã¨åŒæ§˜ã«é€£ç¶šã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦90%ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã¯V1ã«ã€10ï¼…ã¯V2ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª\n$ while true; do curl http://${GATEWAY_URL}/version; sleep 1; done I am v1.111111111 I am v1.111111111 I am v1.111111111 I am v2.222222222 ... ãŸã¾ã«V2 I am v1.111111111 æœ€å¾Œã«ã€Istioã«ç‰¹å®šã®æ¡ä»¶ã§ã®ã¿100%ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’V2ã‚¢ãƒ—ãƒªå‘ã‘ã‚‹ã‚ˆã†ã«è¨­å®šã™ã‚‹ã€‚ä¸‹è¨˜è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«route-conditional-v2.yamlã«è¨˜è¿°ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€ã“ã“ã§ã¯HTTPãƒ˜ãƒƒãƒ€ã®userã®å€¤ãŒ\u0026quot;yoichi\u0026quot;ã§ã‚ã‚‹ã“ã¨ã‚’ç‰¹å®šã®æ¡ä»¶ã¨ã™ã‚‹ã€‚\n--- apiVersion: config.istio.io/v1alpha2 kind: RouteRule metadata: name: myversion-conditional-v2 spec: destination: name: myversion precedence: 2 match: request: headers: user: regex: \u0026#34;yoichi\u0026#34; route: - labels: version: v2.0 Istioã«ç‰¹å®šæ¡ä»¶ç”¨ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®šã‚’è¿½åŠ \n$ istioctl create -f route-conditional-v2.yaml æ¬¡ã®ã‚ˆã†ã«ãƒ˜ãƒƒãƒ€ãƒ¼ã«\u0026quot;user: yoichi\u0026quot;ã®æ¡ä»¶ã‚’è¿½åŠ ã—ã¦é€£ç¶šã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦å…¨ã¦ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒV2ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª\n$ while true; do curl -H \u0026#34;user: yoichi\u0026#34; http://${GATEWAY_URL}/version; sleep 1; done I am v2.222222222 I am v2.222222222 I am v2.222222222 I am v2.222222222 ä»¥ä¸Šã€è£œè¶³æƒ…å ±ã§ã—ãŸã€‚\nLinks Japan Container Days v18.04 Open Service Broker API Server for Azure Azure Container Instances Virtual Kubelet Istio-0.5.0 Document ","permalink":"https://unofficialism.info/posts/kubernetes-x-paas-noops-container-days-201804/","summary":"å…ˆæ—¥ã€4æœˆ19æ—¥ã«é–‹å‚¬ã•ã‚ŒãŸJapan Container Days v18.04ã«ã¦ã€ŒKubernetes x PaaS â€“ ã‚³ãƒ³ãƒ†ãƒŠã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®NoOpsã¸ã®æŒ‘æˆ¦ã€ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«ã§ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’æ‹…å½“ã•ã›ã¦ã„ãŸã ã„ãŸã€‚ãã®åã®é€šã‚Šãƒ¡ã‚¤ãƒ³ãŒKubernetesã§ã€Kubernetesã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã„ã¦NoOpsï¼ˆé‹ç”¨ãƒ¬ã‚¹ï¼‰ã‚’ç›®æŒ‡ã™ãŸã‚ã®ã«ã©ã†ã„ã£ãŸå·¥å¤«ãŒã§ãã‚‹ã®ã‹ã€ã©ã†ã„ã£ãŸã‚‚ã®ã‚’æ´»ç”¨ã—ã¦ã„ã‘ã°ã‚ˆã„ã®ã‹ã€ã¨ã„ã†å†…å®¹ã§ã™ã€‚ã“ã®ãƒ–ãƒ­ã‚°ã§ã¯Japan Container Daysã§ã®ç™ºè¡¨ã«ä½¿ç”¨ã—ãŸã‚¹ãƒ©ã‚¤ãƒ‰ã®å…±æœ‰ã¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ä¸­ã®ã‚µãƒ³ãƒ—ãƒ«ã‚„ãƒ‡ãƒ¢ã«ã¤ã„ã¦è£œè¶³ã•ã›ã¦ã„ãŸã ãã€‚\nSession Slides Kubernetes x PaaS â€“ ã‚³ãƒ³ãƒ†ãƒŠã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã® NoOpsã¸ã®æŒ‘æˆ¦ from Yoichi Kawasaki\nè£œè¶³æƒ…å ± 1. Open Service Broker for Azureã§Azure Database for MySQLã®åˆ©ç”¨ ã‚¹ãƒ©ã‚¤ãƒ‰ã§ãŠè¦‹ã›ã—ãŸå®Ÿéš›ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ã¦Azure Database for MySQLã®ã‚µãƒ¼ãƒ“ã‚¹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆã€ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã€ãã—ã¦å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ã®åˆ©ç”¨ã¾ã§ã®æµã‚Œã‚’ç´¹ä»‹ã•ã›ã¦ã„ãŸã ãã€‚\nOpen Service Broker for Azureãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®Githubã«ã‚ã‚‹ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«mysql-instance.yamlã¨mysql-binding.yamlã‚’ä½¿ã£ã¦ãã‚Œãã‚ŒServiceInstanceã¨ServiceBindingã‚’ä½œæˆã™ã‚‹ `\n# Provisioning the database, basic50 plan ... $ kubectl create -f mysql-instance.yaml # Wait until ServiceInstance named example-mysql-instance get ready \u0026#39;Status =\u0026gt; Ready\u0026#39;, # then execute the following to create a binding for this new database, $ kubectl create -f mysql-binding.","title":"Kubernetes x PaaS ã‚³ãƒ³ãƒ†ãƒŠã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®NoOpsã¸ã®æŒ‘æˆ¦ (Japan Container Days v18.04)"},{"content":"This is an article on how you can achieve Azure Media Services (AMS) streaming traffic distribution with Traffic Manager.\nThe process for a client to find target AMS streaming endpoints The figure shows how a client find target AMS streaming endpoints with Traffic Manager and requests from video players are distributed to streaming endpoints in AMS:\nWhen AMS endpoints are added to an Azure Traffic Manager profile, Azure Traffic Manager keeps track of the status of the endpoints (running, stopped, or deleted) so that it can decide which of those endpoints should receive traffic. You can configure the way to route network traffic to the endpoints by choosing traffic routing methods available in Traffic Manager.\nConfiguration procedure Suppose that you have 2 AMS accounts (amsaccount1, amsaccount2), and that you want to distribute requests to your Traffic Manager domain (myamsstreaming.trafficmanager.net) from video player clients to streaming endpoints in AMS. When AMS endpoints are added to an Azure Traffic Manager profile (myamsstreaming), Azure Traffic Manager keeps track of the status of your AMS streaming endpoints (running, stopped, or deleted) so that it can decide which of those endpoints should receive traffic. However, when it comes to AMS endpoints, it has to be toward a custom domain, NOT simply a Traffic Manager domain for clients\u0026rsquo; traffic to be distributed into AMS endpoints using Traffic Manager. So let\u0026rsquo;s suppose you prepare a custom domain: streaming.mydomain.com.\nExample accounts and domains\nAMS Account1: amsaccount1 (Streaming endpoint: amsaccount1.streaming.mediaservices.windows.net) AMS Account2: amsaccount2 (Streaming endpoint: amsaccount2.streaming.mediaservices.windows.net) Traffic Manager Domain: myamsstreaming.trafficmanager.net Custom Domain: streaming.mydomain.com (1) Point a custom domain to a Traffic Manager domain You add the following alias (CNAME) to point the custom domain to the traffic manager domain:\nstreaming.mydomain.com IN CNAME myamsstreaming.trafficmanager.net Useful Link for this step: Point a company Internet domain to an Azure Traffic Manager domain\n(2) Add Azure Media Services origin hosts to the Traffic Manager Add AMS endpoints to an Azure Traffic Manager profile as \u0026ldquo;External Endpoint\u0026rdquo; via either Azure Portal or Azure CLI / PowerShell. Here is an image of adding endpoints in Azure portal:\nUseful Link for this step: Add, disable, enable, or delete endpoints\n(3) Custom domain name ownership verification First of all, get Media Service Account IDs (GUID) for your AMS accounts in this step. To find the Azure Media Service ID , go to the Azure portal and select your Media Service account. The Azure Media Service ID appears on the right of the DASHBOARD page. Let\u0026rsquo;s suppose you get the following account IDs for AMS accounts (amsaccount1, amsaccount2):\nAccount ID: 8dcbe520-59c7-4591-8d98-1e765b7f3729 for AMS account: amsaccount1 Account ID: 5e0e6784-4ed0-40a0-8444-33da6d4f7171 for AMS account: amsaccount2 Then, create CNAME that maps (accountId).(parent custom domain) to verifydns.(mediaservices-dns-zone). This is necessary to proves that the Azure Media Services ID has the ownership of the custom domain. Here are CNAMEs to create in this step:\n## \u0026lt;MediaServicesAccountID\u0026gt;.\u0026lt;custom parent domain\u0026gt; IN CNAME verifydns.\u0026lt;mediaservices-dns-zone\u0026gt; ## Custom name Ownership verification for amsaccount1 8dcbe520-59c7-4591-8d98-1e765b7f3729.mydomain.com IN CNAME verifydns.mediaservices.windows.net ## Custom name Ownership verification for amsaccount2 5e0e6784-4ed0-40a0-8444-33da6d4f7171.mydomain.com IN CNAME verifydns.mediaservices.windows.net Refer to CustomHostNames section of StreamingEndpoint document to learn more about the configuration in this step.\n(4) Add Custom host name to each Azure Media Service streaming endpoint Once you completed \u0026ldquo;Custom domain name ownership verification\u0026rdquo; configuration, you then need to configure to add custom host name to each Azure Media Service streaming endpoint. Unfortunately new portal doesn\u0026rsquo;t include capability to add custom domain to the streaming endpoint. You can set it either using REST API directly or using Azure Media Explorer. Here is how you add custom host name to the streaming endpoint in Azure Media Explorer:\nChoose \u0026ldquo;Streaming endpoint\u0026rdquo; in the top menu, right click on your streaming endpoint, and select \u0026ldquo;Streaming endpoint information and settings\u0026rdquo;. In Streaming endpoint information form, type in your custom host name for the endpoint, and click \u0026ldquo;Update settings and close\u0026rdquo;. That\u0026rsquo;s it.\n(5) Test video playback with your custom domain Once all configurations above are completed (+ DNS settings are reflected), you will see the custom domain name lookup points to either of AMS endpoints added to the traffic manager like this:\n$ dig streaming.mydomain.com ;; ANSWER SECTION: streaming.mydomain.com. 600 IN CNAME myamsstreaming.trafficmanager.net. myamsstreaming.trafficmanager.net. 300 IN CNAME amsaccount1.streaming.mediaservices.windows.net. amsaccount1.streaming.mediaservices.windows.net. 60 IN CNAME wamsorigin-origin-903f1f37105244fba2270ae7b64021bd.cloudapp.net. wamsorigin-origin-903f1f37105244fba2270ae7b64021bd.cloudapp.net. 60 IN A 104.215.4.76 Make sure to check if the custom name lookup points to the other endpoint when one of the endpoints are down.\nFinally, check if you can playback video with your custom domain.\n$ curl http://amsaccount1.streaming.mediaservices.windows.net/ee2e5286-d3fa-40fc-a393-c3c2a3ca5a84/BigBuckBunny.ism/manifest \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt;\u0026lt;SmoothStreamingMedia MajorVersion=\u0026#34;2\u0026#34; MinorVersion=\u0026#34;2\u0026#34; Duration=\u0026#34;84693333\u0026#34; TimeScale=\u0026#34;10000000\u0026#34;\u0026gt;\u0026lt;StreamIndex Chunks=\u0026#34;2\u0026#34; Type=\u0026#34;audio\u0026#34; Url=\u0026#34;QualityLevels({bitrate})/Fragments(aac_eng_2_128={start time})\u0026#34; QualityLevels=\u0026#34;1\u0026#34; Language=\u0026#34;eng\u0026#34; Name=\u0026#34;aac_eng_2_128\u0026#34;\u0026gt;\u0026lt;QualityLevel AudioTag=\u0026#34;255\u0026#34; Index=\u0026#34;0\u0026#34; BitsPerSample=\u0026#34;16\u0026#34; Bitrate=\u0026#34;128000\u0026#34; FourCC=\u0026#34;AACL\u0026#34; CodecPrivateData=\u0026#34;1190\u0026#34; Channels=\u0026#34;2\u0026#34; PacketSize=\u0026#34;4\u0026#34; SamplingRate=\u0026#34;48000\u0026#34; /\u0026gt;\u0026lt;c t=\u0026#34;0\u0026#34; d=\u0026#34;60160000\u0026#34; /\u0026gt;\u0026lt;c d=\u0026#34;24533333\u0026#34; /\u0026gt;\u0026lt;/StreamIndex\u0026gt;\u0026lt;StreamIndex Chunks=\u0026#34;2\u0026#34; Type=\u0026#34;video\u0026#34; Url=\u0026#34;QualityLevels({bitrate})/Fragments(video={start time})\u0026#34; QualityLevels=\u0026#34;5\u0026#34;\u0026gt;\u0026lt;QualityLevel Index=\u0026#34;0\u0026#34; Bitrate=\u0026#34;2896000\u0026#34; FourCC=\u0026#34;H264\u0026#34; MaxWidth=\u0026#34;1280\u0026#34; MaxHeight=\u0026#34;720\u0026#34; CodecPrivateData=\u0026#34;000000016764001FACD9405005BB011000000300100000030300F18319600000000168EBECB22C\u0026#34; /\u0026gt;\u0026lt;QualityLevel Index=\u0026#34;1\u0026#34; Bitrate=\u0026#34;1789000\u0026#34; FourCC=\u0026#34;H264\u0026#34; MaxWidth=\u0026#34;960\u0026#34; MaxHeight=\u0026#34;540\u0026#34; CodecPrivateData=\u0026#34;000000016764001FACD940F0117EF011000003000100000300300F1831960000000168EBECB22C\u0026#34; /\u0026gt;\u0026lt;QualityLevel Index=\u0026#34;2\u0026#34; Bitrate=\u0026#34;946000\u0026#34; FourCC=\u0026#34;H264\u0026#34; MaxWidth=\u0026#34;640\u0026#34; MaxHeight=\u0026#34;360\u0026#34; CodecPrivateData=\u0026#34;000000016764001EACD940A02FF97011000003000100000300300F162D960000000168EBECB22C\u0026#34; /\u0026gt;\u0026lt;QualityLevel Index=\u0026#34;3\u0026#34; Bitrate=\u0026#34;612000\u0026#34; FourCC=\u0026#34;H264\u0026#34; MaxWidth=\u0026#34;480\u0026#34; MaxHeight=\u0026#34;270\u0026#34; CodecPrivateData=\u0026#34;0000000167640015ACD941E08FEB011000000300100000030300F162D9600000000168EBECB22C\u0026#34; /\u0026gt;\u0026lt;QualityLevel Index=\u0026#34;4\u0026#34; Bitrate=\u0026#34;324000\u0026#34; FourCC=\u0026#34;H264\u0026#34; MaxWidth=\u0026#34;320\u0026#34; MaxHeight=\u0026#34;180\u0026#34; CodecPrivateData=\u0026#34;000000016764000DACD941419F9F011000000300100000030300F14299600000000168EBECB22C\u0026#34; /\u0026gt;\u0026lt;c t=\u0026#34;0\u0026#34; d=\u0026#34;60000000\u0026#34; /\u0026gt;\u0026lt;c d=\u0026#34;24583333\u0026#34; /\u0026gt;\u0026lt;/StreamIndex\u0026gt;\u0026lt;/SmoothStreamingMedia\u0026gt; $ curl http://streaming.mydomain.com/ee2e5286-d3fa-40fc-a393-c3c2a3ca5a84/BigBuckBunny.ism/manifest \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;UTF-8\u0026#34;?\u0026gt;\u0026lt;SmoothStreamingMedia MajorVersion=\u0026#34;2\u0026#34; MinorVersion=\u0026#34;2\u0026#34; Duration=\u0026#34;84693333\u0026#34; TimeScale=\u0026#34;10000000\u0026#34;\u0026gt;\u0026lt;StreamIndex Chunks=\u0026#34;2\u0026#34; Type=\u0026#34;audio\u0026#34; Url=\u0026#34;QualityLevels({bitrate})/Fragments(aac_eng_2_128={start time})\u0026#34; QualityLevels=\u0026#34;1\u0026#34; Language=\u0026#34;eng\u0026#34; Name=\u0026#34;aac_eng_2_128\u0026#34;\u0026gt;\u0026lt;QualityLevel AudioTag=\u0026#34;255\u0026#34; Index=\u0026#34;0\u0026#34; BitsPerSample=\u0026#34;16\u0026#34; Bitrate=\u0026#34;128000\u0026#34; FourCC=\u0026#34;AACL\u0026#34; CodecPrivateData=\u0026#34;1190\u0026#34; Channels=\u0026#34;2\u0026#34; PacketSize=\u0026#34;4\u0026#34; SamplingRate=\u0026#34;48000\u0026#34; /\u0026gt;\u0026lt;c t=\u0026#34;0\u0026#34; d=\u0026#34;60160000\u0026#34; /\u0026gt;\u0026lt;c d=\u0026#34;24533333\u0026#34; /\u0026gt;\u0026lt;/StreamIndex\u0026gt;\u0026lt;StreamIndex Chunks=\u0026#34;2\u0026#34; Type=\u0026#34;video\u0026#34; Url=\u0026#34;QualityLevels({bitrate})/Fragments(video={start time})\u0026#34; QualityLevels=\u0026#34;5\u0026#34;\u0026gt;\u0026lt;QualityLevel Index=\u0026#34;0\u0026#34; Bitrate=\u0026#34;2896000\u0026#34; FourCC=\u0026#34;H264\u0026#34; MaxWidth=\u0026#34;1280\u0026#34; MaxHeight=\u0026#34;720\u0026#34; CodecPrivateData=\u0026#34;000000016764001FACD9405005BB011000000300100000030300F18319600000000168EBECB22C\u0026#34; /\u0026gt;\u0026lt;QualityLevel Index=\u0026#34;1\u0026#34; Bitrate=\u0026#34;1789000\u0026#34; FourCC=\u0026#34;H264\u0026#34; MaxWidth=\u0026#34;960\u0026#34; MaxHeight=\u0026#34;540\u0026#34; CodecPrivateData=\u0026#34;000000016764001FACD940F0117EF011000003000100000300300F1831960000000168EBECB22C\u0026#34; /\u0026gt;\u0026lt;QualityLevel Index=\u0026#34;2\u0026#34; Bitrate=\u0026#34;946000\u0026#34; FourCC=\u0026#34;H264\u0026#34; MaxWidth=\u0026#34;640\u0026#34; MaxHeight=\u0026#34;360\u0026#34; CodecPrivateData=\u0026#34;000000016764001EACD940A02FF97011000003000100000300300F162D960000000168EBECB22C\u0026#34; /\u0026gt;\u0026lt;QualityLevel Index=\u0026#34;3\u0026#34; Bitrate=\u0026#34;612000\u0026#34; FourCC=\u0026#34;H264\u0026#34; MaxWidth=\u0026#34;480\u0026#34; MaxHeight=\u0026#34;270\u0026#34; CodecPrivateData=\u0026#34;0000000167640015ACD941E08FEB011000000300100000030300F162D9600000000168EBECB22C\u0026#34; /\u0026gt;\u0026lt;QualityLevel Index=\u0026#34;4\u0026#34; Bitrate=\u0026#34;324000\u0026#34; FourCC=\u0026#34;H264\u0026#34; MaxWidth=\u0026#34;320\u0026#34; MaxHeight=\u0026#34;180\u0026#34; CodecPrivateData=\u0026#34;000000016764000DACD941419F9F011000000300100000030300F14299600000000168EBECB22C\u0026#34; /\u0026gt;\u0026lt;c t=\u0026#34;0\u0026#34; d=\u0026#34;60000000\u0026#34; /\u0026gt;\u0026lt;c d=\u0026#34;24583333\u0026#34; /\u0026gt;\u0026lt;/StreamIndex\u0026gt;\u0026lt;/SmoothStreamingMedia\u0026gt; Useful Links traffic routing methods Point a company Internet domain to an Azure Traffic Manager domain Add, disable, enable, or delete endpoints StreamingEndpoint CustomHostNames Configuration ","permalink":"https://unofficialism.info/posts/controlling-azure-media-services-traffic-with-traffic-manager/","summary":"This is an article on how you can achieve Azure Media Services (AMS) streaming traffic distribution with Traffic Manager.\nThe process for a client to find target AMS streaming endpoints The figure shows how a client find target AMS streaming endpoints with Traffic Manager and requests from video players are distributed to streaming endpoints in AMS:\nWhen AMS endpoints are added to an Azure Traffic Manager profile, Azure Traffic Manager keeps track of the status of the endpoints (running, stopped, or deleted) so that it can decide which of those endpoints should receive traffic.","title":"Controlling Azure Media Services traffic with Traffic Manager"},{"content":"UPDATED on Feb 3, 2018 - Elasticç¤¾ã‚¤ãƒ™ãƒ³ãƒˆã‚µã‚¤ãƒˆã‚’è¿½åŠ \nã‚¤ãƒ™ãƒ³ãƒˆé–‹å‚¬æ—¥ã‹ã‚‰å°‘ã€…æ™‚é–“ãŒçµŒéã—ãŸãŒã€Elastic {ON} Tour 2017 æ±äº¬ï¼ˆ2017å¹´12æœˆ14æ—¥é–‹å‚¬ï¼‰ã¨ã„ã†Elasticç¤¾ã‚ªãƒ•ã‚£ã‚·ãƒ£ãƒ«ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã«ã¦ç™»å£‡ã•ã›ã¦ã„ãŸã ãæ©Ÿä¼šãŒã‚ã‚Šã€ãã“ã§ã€Œ15åˆ†ã§ãŠå±Šã‘ã™ã‚‹ Elastic Stack on Azure è¨­è¨ˆãƒ»æ§‹ç¯‰ãƒã‚¦ãƒã‚¦ã€ã¨ã„ã†ãŠé¡Œã§ãŠè©±ã‚’ã•ã›ã¦ã„ãŸã ã„ãŸã€‚å€‹äººçš„ã«ã¨ã¦ã‚‚å¤§å¥½ããªãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãªã®ã§ã€ãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã§ãŠè©±ã‚’ã•ã›ã¦ã„ãŸã ã„ãŸã¨ã„ã†ã“ã¨ã¨ã€ãã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®Azureã§ã®åˆ©ç”¨ä¿ƒé€²ã«å¾®åŠ›ãªãŒã‚‰ã‚‚è²¢çŒ®ã§ããŸã¨ã„ã†ã“ã¨ã¯å…‰æ „è‡³æ¥µã§ã‚ã‚‹ã€‚ã“ã“ã§ã¯ãã®Elastic {ON} Tourã§ã®ç™ºè¡¨ã§ä½¿ç”¨ã—ãŸã‚¹ãƒ©ã‚¤ãƒ‰ã«è£œè¶³è§£èª¬ã‚’åŠ ãˆã¦å…±æœ‰ã•ã›ã¦ã„ãŸã ãã€‚\nã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒ©ã‚¤ãƒ‰ï¼ˆï¼‹ãƒ‡ãƒ¢å‹•ç”»ï¼‰ 15åˆ†ã§ãŠå±Šã‘ã™ã‚‹ Elastic Stack on Azure è¨­è¨ˆãƒ»æ§‹ç¯‰ãƒã‚¦ãƒã‚¦ from Yoichi Kawasaki\nè£œè¶³è§£èª¬ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ Azureã§ã®Elastic Stackã®åˆ©ç”¨ã¯å½“ç„¶ãªãŒã‚‰ä»®æƒ³ãƒã‚·ãƒ³ï¼ˆVMï¼‰ã‚’ä¸¦ã¹ã¦ãã“ã«ã‚¯ãƒ©ã‚¹ã‚¿ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ã«ãªã‚‹ã€‚æ®‹å¿µãªãŒã‚‰ç¾æ™‚ç‚¹ã§ãƒãƒãƒ¼ã‚¸ãƒ‰ã®Elasticã‚µãƒ¼ãƒ“ã‚¹ã¯Azureã«ã¯å­˜åœ¨ã—ãªã„ã€‚VMãƒ™ãƒ¼ã‚¹ã¨ã„ã†ã“ã¨ã§ç‰¹ã«ã‚ªãƒ³ãƒ—ãƒ¬ã¨å¤‰ã‚ã‚‰ãšãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã§ã‚ã£ãŸã‚Šã€Chefã‚„Ansibleãªã©ã®æ§‹æˆç®¡ç†ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã‚¯ãƒ©ã‚¹ã‚¿ã‚’çµ„ã‚“ã ã‚ŠæŸ”è»Ÿãªæ§‹ç¯‰ãŒå¯èƒ½ã§ã‚ã‚‹ã‚‚ã®ã®ã€ã“ã“ã§ã¯Azureã§ã®æ§‹ç¯‰ã¨ã„ã†ã“ã¨ã§ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã£ãŸãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¦ã„ã‚‹ã€‚\nAzure Marketplaceã‹ã‚‰ã®ãƒ‡ãƒ—ãƒ­ã‚¤ï¼šæœ€ã‚‚æ‰‹ã£å–ã‚Šæ—©ã„æ–¹æ³•ã€‚30æ—¥ã®X-Packãƒˆãƒ©ã‚¤ã‚¢ãƒ«ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãŒä»˜ã„ã¦ã„ã¦ã€ãƒˆãƒ©ã‚¤ã‚¢ãƒ«æœŸé–“ãŒéãã¦ã‚‚BYOLã§ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®æ›´æ–°ãŒå¯èƒ½ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã¯2017å¹´12æœˆæ™‚ç‚¹ã§v2.0.2 ã€œ v5.6.3ã®é¸æŠãŒå¯èƒ½ã€‚ä½•ã‚‚è€ƒãˆãšæœ€æ–°ç‰ˆã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚ Githubä¸Šã®ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ï¼šElasticç¤¾ãŒç”¨æ„ã—ãŸGithubä¸Šã®ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒã‚ã‚‹ã®ã§ãã‚Œã‚’è‡ªåˆ†ã®è¦ä»¶ã«å¿œã˜ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚’ã™ã‚‹ã€‚Azure CLIã‚„PowerShellãªã©ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ãŸãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆãŒå¯èƒ½ãªã®ã§æ§‹æˆç®¡ç†ãƒ„ãƒ¼ãƒ«ã«çµ„ã¿è¾¼ã‚“ã§å‘¨è¾ºç’°å¢ƒã‚’åˆã‚ã›ã¦è‡ªå‹•æ§‹ç¯‰è¨­å®šã‚‚å¯èƒ½ã€‚æ…£ã‚Œã¦ããŸã‚‰ã“ã¡ã‚‰ãŒã‚ˆã„ã§ã—ã‚‡ã†ã€‚ æ¨å¥¨ä»®æƒ³ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã¨DISK Elasticã‚¯ãƒ©ã‚¹ã‚¿å…¨ä½“ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å¼•ãå‡ºã™ãŸã‚ã«ã¯æ©Ÿèƒ½åˆ¥ã«é©æ­£ãªVMã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¨ã‚µã‚¤ã‚ºã‚’é¸æŠãã ã•ã„ã€‚ã¾ãŸVMã«ã‚¢ã‚¿ãƒƒãƒã™ã‚‹ãƒ‡ã‚£ã‚¹ã‚¯ã«ã¤ã„ã¦ã¯ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ã§å¯ç”¨æ€§è¨­å®šãŒã•ã‚Œã¦ã„ã‚‹Managed Diskã€ã‚‚ã—ãã¯Premium Managed Diskã‚’é¸æŠã™ã‚‹ã“ã¨ã‚’ãŠå¿˜ã‚Œãªãã€‚\nå¯ç”¨æ€§ã®è¨­å®šã«ã¤ã„ã¦ Azureã§IaaSã§å¯ç”¨æ€§ã®è¨­å®šã¨ã„ãˆã°ãŠãªã˜ã¿ã®å¯ç”¨æ€§ã‚»ãƒƒãƒˆï¼ˆAvailability Setï¼‰ã¨å¯ç”¨æ€§ã‚¾ãƒ¼ãƒ³ï¼ˆAvailability Zoneï¼‰ã€‚å½“ç„¶Elastic Stackã®ã‚¯ãƒ©ã‚¹ã‚¿ã‚’çµ„ã‚€æ™‚ã‚‚ã“ã‚Œã‚‰ã®è¨­å®šã‚’å…¥ã‚Œã¾ã—ã‚‡ã†ã¨ã„ã†ãŠè©±ã€‚å¯ç”¨æ€§ã‚¾ãƒ¼ãƒ³ã¯ã€ãã®å¯ç”¨æ€§ãƒ¬ãƒ™ãƒ«ã®é«˜ã•ã‹ã‚‰å°†æ¥çš„ã«ã¯å¯ç”¨æ€§ã‚¾ãƒ¼ãƒ³ãŒä¸»æµãªè¨­å®šã«ãªã£ã¦ã„ãã¯ãšã§ã‚ã‚‹ã‚‚ã®ã®ã€2017å¹´12æœˆæ™‚ç‚¹ã§Previewãƒªãƒªãƒ¼ã‚¹ã§ã‚ã‚Šã€åˆ©ç”¨å¯èƒ½ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ãŒç±³å›½æ±éƒ¨ç¬¬ï¼’ã€è¥¿ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘ã®ã¿ã¨ã„ã†ã¨ã¦ã‚‚é™å®šçš„ãªã‚‚ã®ã¨ãªã£ã¦ã„ã‚‹ã€‚ç¾æ™‚ç‚¹ã§ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç”¨é€”ã¨ãªã‚‹ã¨å¯ç”¨æ€§ã‚»ãƒƒãƒˆä¸€æŠãªã®ã§ä½•ã‚‚è€ƒãˆãšã«å¯ç”¨æ€§ã‚»ãƒƒãƒˆã‚’çµ„ã‚“ã§ãã ã•ã„ã€‚\nå¯ç”¨æ€§ã‚»ãƒƒãƒˆï¼ˆAvailability Setï¼‰\nä¸€ã¤ã®DCã®ä¸­ã§åŒä¸€ã®ç‰©ç†ãƒ©ãƒƒã‚¯ã‚„é›»æºãªã©ã‚’é…ç½®ã—ãªã„ã‚ˆã†ã«ã—ã¦ã€éšœå®³ãŒç™ºç”Ÿã—ã¦ã‚‚ã‚°ãƒ«ãƒ¼ãƒ—ã®ä¸­ã®ã©ã“ã‹ã®VMã¯ç”Ÿãã¦ã„ã‚‹ã‚ˆã†ã«ã™ã‚‹è¨­å®šã®ã“ã¨ VM SLA 99.95%ã§æä¾› å¯ç”¨æ€§ã‚¾ãƒ¼ãƒ³ï¼ˆAvailability Zoneï¼‰\nå„VMã‚’åˆ¥ã€…ã®ã‚¾ãƒ¼ãƒ³ã«é…ç½®ã™ã‚‹ã®ã§DCãƒ¬ãƒ™ãƒ«ã®éšœå®³ã«ã¤ã‚ˆã„ï¼ˆãã‚Œãã‚Œã‚¾ãƒ¼ãƒ³ã¯é›»æºã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã€å†·å´è£…ç½®ãŒå®Œå…¨ã«ç‰©ç†çš„ã«åˆ†é›¢ã•ã‚ŒãŸã‚‚ã®ã¨ãªã£ã¦ã„ã‚‹ï¼‰ã€‚ã¡ãªã¿ã«ã€Azureã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã¯è¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ³ã‚¿ãƒ¼ã§æ§‹æˆã•ã‚Œã¦ãŠã‚Šã€ãã®é–“ã‚’é«˜é€Ÿãªãƒãƒƒã‚¯ãƒœãƒ¼ãƒ³ã§æ¥ç¶šã—ã¦1ã¤ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã—ã¦é€éçš„ã«åˆ©ç”¨ãŒå¯èƒ½ã¨ãªã£ã¦ã„ã‚‹ã®ã§ã“ã®ã‚ˆã†ãªã“ã¨ãŒã§ãã‚‹ã‚ã‘ã  VM SLA 99.99%ã§æä¾› ã€æ³¨æ„ç‚¹ã€‘å¯ç”¨æ€§ã‚¾ãƒ¼ãƒ³ã®è¨­å®šã§ã¯DCãŒåˆ†ã‹ã‚Œã¦é…ç½®ã•ã‚Œã‚‹ã®ã§æ¬¡ã®ï¼’ç‚¹ã®è€ƒæ…®ãŒå¿…è¦ï¼šï¼ˆï¼‘ï¼‰ãƒã‚¹ã‚¿ãƒ¼ã¯å„ã‚¾ãƒ¼ãƒ³ã«åˆ†æ•£ã™ã‚‹ã‚ˆã†ã«å„ã‚¾ãƒ¼ãƒ³æœ€ä½ï¼‘ãƒãƒ¼ãƒ‰é…ç½®ã™ã‚‹ã“ã¨ï¼ˆï¼’ï¼‰ãƒ‡ãƒ¼ã‚¿ãƒãƒ¼ãƒ‰ã¯ã‚¾ãƒ¼ãƒ³ã«ã¾ãŸãŒã‚‹é€šä¿¡ãŒæ¥µåŠ›èµ·ã“ã‚‰ãªã„ã‚ˆã†ã«å·¥å¤«ã™ã‚‹ã“ã¨ã€‚ã“ã‚Œã‚’å®Ÿç¾ã™ã‚‹ã®ãŒShard Allocation Awarenessã¨ã„ã†ä»•çµ„ã¿ã§ã€ã“ã®ä»•çµ„ã¿ã‚’ã¤ã‹ã†ã“ã¨ã§ åŒä¸€ã‚¾ãƒ¼ãƒ³å†…ã«é…ç½®ã•ã‚Œã¦ã„ã‚‹ãƒãƒ¼ãƒ‰ã ã‘ã§å®Œå…¨ãªã‚·ãƒ£ãƒ¼ãƒ‰ã‚’ä¿æŒã™ã‚‹ã‚ˆã†ã«ã—ã¦ã€æ¤œç´¢è¦æ±‚ãŒåŒä¸€ã‚¾ãƒ¼ãƒ³å†…ã§å®Œçµã§ãã‚‹ã‚ˆã†ã«è¨­å®šãŒå¯èƒ½ã¨ãªã‚‹ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã®è¨­å®š Azureã®IaaSã«ãŠã‘ã‚‹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®è¨­å®šã«ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆNSGï¼‰ã¨ã‚ˆã°ã‚Œã‚‹L4ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãŒã‚ã‚‹ã€‚å½“ç„¶ãªãŒã‚‰ã€æ—¢ã«X-Packã‚’å°å…¥ã—ã¦ã„ã‚Œã°ãã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½ã®ï¼‘ã¤ã¨ã—ã¦ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ¬ãƒ™ãƒ«ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã«ã¤ã„ã¦ã‚‚è¡Œã†ã“ã¨ãŒã§ãã‚‹ãŒã€X-Packã‚’å°å…¥ã—ã¦ã„ãªã„å ´åˆã¯ç¢ºå®Ÿã«NSGã®è¨­å®šã¯å¿…è¦ã«ãªã£ã¦ãã‚‹ã€‚ã¾ãŸã€Elastic Stackä»¥å¤–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã®é€£æºã®éš›ã«ã‚‚å¿…ãšå¿…è¦ã«ãªã£ã¦ãã‚‹ã€‚Azureä¸Šã§ã®ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰ã§ã¯æ¬ ã‹ã™ã“ã¨ã®ã§ããªã„è¨­å®šã®ï¼‘ã¤ã€‚\nAzureã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ Azure VMã«ã¤ã„ã¦ã¯ã€ã‚ªãƒ³ãƒ—ãƒ¬åŒæ§˜ã«ã€ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ã®Beatsã‚„logstashã¨ã®é€£æºã«ã‚ˆã‚Šã€ãã®ãƒ­ã‚°ã‚„Metricsãªã©ã®ãƒ‡ãƒ¼ã‚¿ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿç¾ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ä¸€æ–¹ã€AzureãŒç‰¹ã«åŠ›ã‚’å…¥ã‚Œã¦ã„ã‚‹PaaSï¼ˆPlatform as a Servicesï¼‰ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦ã¯ã©ã†ã‹ã¨ã„ã†ã¨ã€ä¸‹è¨˜ã®ã‚µãƒ¼ãƒ“ã‚¹ã«ã¤ã„ã¦ã¯æ—¢ã«ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ã§ç”¨æ„ã•ã‚Œã¦ã„ã‚‹æ©Ÿèƒ½ã‚„ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£è£½Logstash Input ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ãƒ‡ãƒ¼ã‚¿ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿç¾ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ H2M_LI_HEADER Azure Blob Storage: logstash-input-azureblob H2M_LI_HEADER Azure Service Bus (Topic): logstash-input-azuretopic H2M_LI_HEADER Azure Event Hub: logstash-input-azureeventhub H2M_LI_HEADER Azure SQL Database: logstash-input-jdbc H2M_LI_HEADER Azure Database for MySQL: logstash-input-jdbc H2M_LI_HEADER Azure Database for PostgreSQL: logstash-input-jdbc H2M_LI_HEADER Azure HDInsight: ES-Hadoopã«ã‚ˆã‚‹é€£æº\nã¡ãªã¿ã«ã€Azureã‚µãƒ¼ãƒ“ã‚¹å‘ã‘Logstashãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä¸€è¦§ã«ã¤ã„ã¦ã¯ã“ã¡ã‚‰ - Logstash plugins for Microsoft Azure Services\nAzure Diagnosticsã€Activitiesã€Metricsãƒ­ã‚°ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ åŸºæœ¬çš„ã«IaaSã€PaaSå•ã‚ãšAzureã®ã»ã¨ã‚“ã©ã®ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ä¸‹è¨˜ã®æƒ…å ±ãŒå‡ºåŠ›ã•ã‚Œã€ã“ã‚Œã‚‰ã®æƒ…å ±ã¯Blobã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¾ãŸã¯Event Hubã«å‡ºåŠ›è¨­å®šãŒå¯èƒ½ã¨ãªã£ã¦ã„ã‚‹ã€‚ H2M_LI_HEADER è¨ºæ–­ãƒ­ã‚°ï¼ˆDiagnostics logï¼‰ H2M_LI_HEADER ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãƒ­ã‚°ï¼ˆActivity logï¼‰ H2M_LI_HEADER ãƒ¡ãƒˆãƒªãƒƒã‚¯\nã¾ãŸä¸Šè¨˜ã«åŠ ãˆã¦ã€PaaSã‚µãƒ¼ãƒ“ã‚¹ã«å±•é–‹ã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å›ºæœ‰ã®ãƒ­ã‚°ã«ã¤ã„ã¦ã‚‚å°‘ãªãã¨ã‚‚Blobã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«æ›¸ãè¾¼ã‚€ã“ã¨ã¯ã§ãã‚‹ã€‚ã¤ã¾ã‚‹ã¨ã“ã‚ã€ä¸Šè¨˜ãƒ‡ãƒ¼ã‚¿ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®é …ç›®ã§ã”ç´¹ä»‹ã—ãŸã‚ˆã†ã«Blobã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚„Event hubã«å‡ºåŠ›ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã¯Logstashã‚’é€šã˜ã¦Elastic Stackã«å–ã‚Šè¾¼ã‚€ã“ã¨ãŒå¯èƒ½ã§ã‚ã‚Šã€Azureãƒªã‚½ãƒ¼ã‚¹é–¢é€£æƒ…å ±ã‚’å«ã‚ãŸå…¨ã¦ã®ãƒ­ã‚°ã¯Elastic Stackã§ä¸€å…ƒç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã‚ã‚‹ã€‚\nå‚è€ƒLinks Deploying Elasticsearch on Microsoft Azure Microsoft Azureã«Elasticsearchã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ Elasticsearch and Kibana Deployments on Azure Spinning up a cluster with Elastic\u0026rsquo;s Azure Marketplace template Run Elasticsearch on Azure Public preview: Azure Availability Zones Filter network traffic with network security groups Shared Allocation Awareness Azure Diagnostics Tools Elastic{ON} Tour Tokyo 2017ã‚¤ãƒ™ãƒ³ãƒˆLinks 15åˆ†ã§ãŠå±Šã‘ã™ã‚‹Elastic Stack on Azureè¨­è¨ˆãƒ»æ§‹ç¯‰ãƒã‚¦ãƒã‚¦ (Japanese) Elastic{ON} Tour Tokyo 2017å…¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ ","permalink":"https://unofficialism.info/posts/15min-elastic-stack-on-azure/","summary":"UPDATED on Feb 3, 2018 - Elasticç¤¾ã‚¤ãƒ™ãƒ³ãƒˆã‚µã‚¤ãƒˆã‚’è¿½åŠ \nã‚¤ãƒ™ãƒ³ãƒˆé–‹å‚¬æ—¥ã‹ã‚‰å°‘ã€…æ™‚é–“ãŒçµŒéã—ãŸãŒã€Elastic {ON} Tour 2017 æ±äº¬ï¼ˆ2017å¹´12æœˆ14æ—¥é–‹å‚¬ï¼‰ã¨ã„ã†Elasticç¤¾ã‚ªãƒ•ã‚£ã‚·ãƒ£ãƒ«ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã«ã¦ç™»å£‡ã•ã›ã¦ã„ãŸã ãæ©Ÿä¼šãŒã‚ã‚Šã€ãã“ã§ã€Œ15åˆ†ã§ãŠå±Šã‘ã™ã‚‹ Elastic Stack on Azure è¨­è¨ˆãƒ»æ§‹ç¯‰ãƒã‚¦ãƒã‚¦ã€ã¨ã„ã†ãŠé¡Œã§ãŠè©±ã‚’ã•ã›ã¦ã„ãŸã ã„ãŸã€‚å€‹äººçš„ã«ã¨ã¦ã‚‚å¤§å¥½ããªãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãªã®ã§ã€ãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã§ãŠè©±ã‚’ã•ã›ã¦ã„ãŸã ã„ãŸã¨ã„ã†ã“ã¨ã¨ã€ãã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®Azureã§ã®åˆ©ç”¨ä¿ƒé€²ã«å¾®åŠ›ãªãŒã‚‰ã‚‚è²¢çŒ®ã§ããŸã¨ã„ã†ã“ã¨ã¯å…‰æ „è‡³æ¥µã§ã‚ã‚‹ã€‚ã“ã“ã§ã¯ãã®Elastic {ON} Tourã§ã®ç™ºè¡¨ã§ä½¿ç”¨ã—ãŸã‚¹ãƒ©ã‚¤ãƒ‰ã«è£œè¶³è§£èª¬ã‚’åŠ ãˆã¦å…±æœ‰ã•ã›ã¦ã„ãŸã ãã€‚\nã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒ©ã‚¤ãƒ‰ï¼ˆï¼‹ãƒ‡ãƒ¢å‹•ç”»ï¼‰ 15åˆ†ã§ãŠå±Šã‘ã™ã‚‹ Elastic Stack on Azure è¨­è¨ˆãƒ»æ§‹ç¯‰ãƒã‚¦ãƒã‚¦ from Yoichi Kawasaki\nè£œè¶³è§£èª¬ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ Azureã§ã®Elastic Stackã®åˆ©ç”¨ã¯å½“ç„¶ãªãŒã‚‰ä»®æƒ³ãƒã‚·ãƒ³ï¼ˆVMï¼‰ã‚’ä¸¦ã¹ã¦ãã“ã«ã‚¯ãƒ©ã‚¹ã‚¿ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ã«ãªã‚‹ã€‚æ®‹å¿µãªãŒã‚‰ç¾æ™‚ç‚¹ã§ãƒãƒãƒ¼ã‚¸ãƒ‰ã®Elasticã‚µãƒ¼ãƒ“ã‚¹ã¯Azureã«ã¯å­˜åœ¨ã—ãªã„ã€‚VMãƒ™ãƒ¼ã‚¹ã¨ã„ã†ã“ã¨ã§ç‰¹ã«ã‚ªãƒ³ãƒ—ãƒ¬ã¨å¤‰ã‚ã‚‰ãšãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã§ã‚ã£ãŸã‚Šã€Chefã‚„Ansibleãªã©ã®æ§‹æˆç®¡ç†ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã‚¯ãƒ©ã‚¹ã‚¿ã‚’çµ„ã‚“ã ã‚ŠæŸ”è»Ÿãªæ§‹ç¯‰ãŒå¯èƒ½ã§ã‚ã‚‹ã‚‚ã®ã®ã€ã“ã“ã§ã¯Azureã§ã®æ§‹ç¯‰ã¨ã„ã†ã“ã¨ã§ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã£ãŸãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¦ã„ã‚‹ã€‚\nAzure Marketplaceã‹ã‚‰ã®ãƒ‡ãƒ—ãƒ­ã‚¤ï¼šæœ€ã‚‚æ‰‹ã£å–ã‚Šæ—©ã„æ–¹æ³•ã€‚30æ—¥ã®X-Packãƒˆãƒ©ã‚¤ã‚¢ãƒ«ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãŒä»˜ã„ã¦ã„ã¦ã€ãƒˆãƒ©ã‚¤ã‚¢ãƒ«æœŸé–“ãŒéãã¦ã‚‚BYOLã§ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®æ›´æ–°ãŒå¯èƒ½ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã¯2017å¹´12æœˆæ™‚ç‚¹ã§v2.0.2 ã€œ v5.6.3ã®é¸æŠãŒå¯èƒ½ã€‚ä½•ã‚‚è€ƒãˆãšæœ€æ–°ç‰ˆã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚ Githubä¸Šã®ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ï¼šElasticç¤¾ãŒç”¨æ„ã—ãŸGithubä¸Šã®ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒã‚ã‚‹ã®ã§ãã‚Œã‚’è‡ªåˆ†ã®è¦ä»¶ã«å¿œã˜ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚’ã™ã‚‹ã€‚Azure CLIã‚„PowerShellãªã©ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ãŸãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆãŒå¯èƒ½ãªã®ã§æ§‹æˆç®¡ç†ãƒ„ãƒ¼ãƒ«ã«çµ„ã¿è¾¼ã‚“ã§å‘¨è¾ºç’°å¢ƒã‚’åˆã‚ã›ã¦è‡ªå‹•æ§‹ç¯‰è¨­å®šã‚‚å¯èƒ½ã€‚æ…£ã‚Œã¦ããŸã‚‰ã“ã¡ã‚‰ãŒã‚ˆã„ã§ã—ã‚‡ã†ã€‚ æ¨å¥¨ä»®æƒ³ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã¨DISK Elasticã‚¯ãƒ©ã‚¹ã‚¿å…¨ä½“ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å¼•ãå‡ºã™ãŸã‚ã«ã¯æ©Ÿèƒ½åˆ¥ã«é©æ­£ãªVMã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¨ã‚µã‚¤ã‚ºã‚’é¸æŠãã ã•ã„ã€‚ã¾ãŸVMã«ã‚¢ã‚¿ãƒƒãƒã™ã‚‹ãƒ‡ã‚£ã‚¹ã‚¯ã«ã¤ã„ã¦ã¯ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ã§å¯ç”¨æ€§è¨­å®šãŒã•ã‚Œã¦ã„ã‚‹Managed Diskã€ã‚‚ã—ãã¯Premium Managed Diskã‚’é¸æŠã™ã‚‹ã“ã¨ã‚’ãŠå¿˜ã‚Œãªãã€‚\nå¯ç”¨æ€§ã®è¨­å®šã«ã¤ã„ã¦ Azureã§IaaSã§å¯ç”¨æ€§ã®è¨­å®šã¨ã„ãˆã°ãŠãªã˜ã¿ã®å¯ç”¨æ€§ã‚»ãƒƒãƒˆï¼ˆAvailability Setï¼‰ã¨å¯ç”¨æ€§ã‚¾ãƒ¼ãƒ³ï¼ˆAvailability Zoneï¼‰ã€‚å½“ç„¶Elastic Stackã®ã‚¯ãƒ©ã‚¹ã‚¿ã‚’çµ„ã‚€æ™‚ã‚‚ã“ã‚Œã‚‰ã®è¨­å®šã‚’å…¥ã‚Œã¾ã—ã‚‡ã†ã¨ã„ã†ãŠè©±ã€‚å¯ç”¨æ€§ã‚¾ãƒ¼ãƒ³ã¯ã€ãã®å¯ç”¨æ€§ãƒ¬ãƒ™ãƒ«ã®é«˜ã•ã‹ã‚‰å°†æ¥çš„ã«ã¯å¯ç”¨æ€§ã‚¾ãƒ¼ãƒ³ãŒä¸»æµãªè¨­å®šã«ãªã£ã¦ã„ãã¯ãšã§ã‚ã‚‹ã‚‚ã®ã®ã€2017å¹´12æœˆæ™‚ç‚¹ã§Previewãƒªãƒªãƒ¼ã‚¹ã§ã‚ã‚Šã€åˆ©ç”¨å¯èƒ½ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ãŒç±³å›½æ±éƒ¨ç¬¬ï¼’ã€è¥¿ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘ã®ã¿ã¨ã„ã†ã¨ã¦ã‚‚é™å®šçš„ãªã‚‚ã®ã¨ãªã£ã¦ã„ã‚‹ã€‚ç¾æ™‚ç‚¹ã§ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç”¨é€”ã¨ãªã‚‹ã¨å¯ç”¨æ€§ã‚»ãƒƒãƒˆä¸€æŠãªã®ã§ä½•ã‚‚è€ƒãˆãšã«å¯ç”¨æ€§ã‚»ãƒƒãƒˆã‚’çµ„ã‚“ã§ãã ã•ã„ã€‚\nå¯ç”¨æ€§ã‚»ãƒƒãƒˆï¼ˆAvailability Setï¼‰\nä¸€ã¤ã®DCã®ä¸­ã§åŒä¸€ã®ç‰©ç†ãƒ©ãƒƒã‚¯ã‚„é›»æºãªã©ã‚’é…ç½®ã—ãªã„ã‚ˆã†ã«ã—ã¦ã€éšœå®³ãŒç™ºç”Ÿã—ã¦ã‚‚ã‚°ãƒ«ãƒ¼ãƒ—ã®ä¸­ã®ã©ã“ã‹ã®VMã¯ç”Ÿãã¦ã„ã‚‹ã‚ˆã†ã«ã™ã‚‹è¨­å®šã®ã“ã¨ VM SLA 99.95%ã§æä¾› å¯ç”¨æ€§ã‚¾ãƒ¼ãƒ³ï¼ˆAvailability Zoneï¼‰\nå„VMã‚’åˆ¥ã€…ã®ã‚¾ãƒ¼ãƒ³ã«é…ç½®ã™ã‚‹ã®ã§DCãƒ¬ãƒ™ãƒ«ã®éšœå®³ã«ã¤ã‚ˆã„ï¼ˆãã‚Œãã‚Œã‚¾ãƒ¼ãƒ³ã¯é›»æºã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã€å†·å´è£…ç½®ãŒå®Œå…¨ã«ç‰©ç†çš„ã«åˆ†é›¢ã•ã‚ŒãŸã‚‚ã®ã¨ãªã£ã¦ã„ã‚‹ï¼‰ã€‚ã¡ãªã¿ã«ã€Azureã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã¯è¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ³ã‚¿ãƒ¼ã§æ§‹æˆã•ã‚Œã¦ãŠã‚Šã€ãã®é–“ã‚’é«˜é€Ÿãªãƒãƒƒã‚¯ãƒœãƒ¼ãƒ³ã§æ¥ç¶šã—ã¦1ã¤ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã—ã¦é€éçš„ã«åˆ©ç”¨ãŒå¯èƒ½ã¨ãªã£ã¦ã„ã‚‹ã®ã§ã“ã®ã‚ˆã†ãªã“ã¨ãŒã§ãã‚‹ã‚ã‘ã  VM SLA 99.99%ã§æä¾› ã€æ³¨æ„ç‚¹ã€‘å¯ç”¨æ€§ã‚¾ãƒ¼ãƒ³ã®è¨­å®šã§ã¯DCãŒåˆ†ã‹ã‚Œã¦é…ç½®ã•ã‚Œã‚‹ã®ã§æ¬¡ã®ï¼’ç‚¹ã®è€ƒæ…®ãŒå¿…è¦ï¼šï¼ˆï¼‘ï¼‰ãƒã‚¹ã‚¿ãƒ¼ã¯å„ã‚¾ãƒ¼ãƒ³ã«åˆ†æ•£ã™ã‚‹ã‚ˆã†ã«å„ã‚¾ãƒ¼ãƒ³æœ€ä½ï¼‘ãƒãƒ¼ãƒ‰é…ç½®ã™ã‚‹ã“ã¨ï¼ˆï¼’ï¼‰ãƒ‡ãƒ¼ã‚¿ãƒãƒ¼ãƒ‰ã¯ã‚¾ãƒ¼ãƒ³ã«ã¾ãŸãŒã‚‹é€šä¿¡ãŒæ¥µåŠ›èµ·ã“ã‚‰ãªã„ã‚ˆã†ã«å·¥å¤«ã™ã‚‹ã“ã¨ã€‚ã“ã‚Œã‚’å®Ÿç¾ã™ã‚‹ã®ãŒShard Allocation Awarenessã¨ã„ã†ä»•çµ„ã¿ã§ã€ã“ã®ä»•çµ„ã¿ã‚’ã¤ã‹ã†ã“ã¨ã§ åŒä¸€ã‚¾ãƒ¼ãƒ³å†…ã«é…ç½®ã•ã‚Œã¦ã„ã‚‹ãƒãƒ¼ãƒ‰ã ã‘ã§å®Œå…¨ãªã‚·ãƒ£ãƒ¼ãƒ‰ã‚’ä¿æŒã™ã‚‹ã‚ˆã†ã«ã—ã¦ã€æ¤œç´¢è¦æ±‚ãŒåŒä¸€ã‚¾ãƒ¼ãƒ³å†…ã§å®Œçµã§ãã‚‹ã‚ˆã†ã«è¨­å®šãŒå¯èƒ½ã¨ãªã‚‹ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã®è¨­å®š Azureã®IaaSã«ãŠã‘ã‚‹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®è¨­å®šã«ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆNSGï¼‰ã¨ã‚ˆã°ã‚Œã‚‹L4ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãŒã‚ã‚‹ã€‚å½“ç„¶ãªãŒã‚‰ã€æ—¢ã«X-Packã‚’å°å…¥ã—ã¦ã„ã‚Œã°ãã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½ã®ï¼‘ã¤ã¨ã—ã¦ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ¬ãƒ™ãƒ«ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã«ã¤ã„ã¦ã‚‚è¡Œã†ã“ã¨ãŒã§ãã‚‹ãŒã€X-Packã‚’å°å…¥ã—ã¦ã„ãªã„å ´åˆã¯ç¢ºå®Ÿã«NSGã®è¨­å®šã¯å¿…è¦ã«ãªã£ã¦ãã‚‹ã€‚ã¾ãŸã€Elastic Stackä»¥å¤–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã®é€£æºã®éš›ã«ã‚‚å¿…ãšå¿…è¦ã«ãªã£ã¦ãã‚‹ã€‚Azureä¸Šã§ã®ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰ã§ã¯æ¬ ã‹ã™ã“ã¨ã®ã§ããªã„è¨­å®šã®ï¼‘ã¤ã€‚\nAzureã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ Azure VMã«ã¤ã„ã¦ã¯ã€ã‚ªãƒ³ãƒ—ãƒ¬åŒæ§˜ã«ã€ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ã®Beatsã‚„logstashã¨ã®é€£æºã«ã‚ˆã‚Šã€ãã®ãƒ­ã‚°ã‚„Metricsãªã©ã®ãƒ‡ãƒ¼ã‚¿ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿç¾ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ä¸€æ–¹ã€AzureãŒç‰¹ã«åŠ›ã‚’å…¥ã‚Œã¦ã„ã‚‹PaaSï¼ˆPlatform as a Servicesï¼‰ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦ã¯ã©ã†ã‹ã¨ã„ã†ã¨ã€ä¸‹è¨˜ã®ã‚µãƒ¼ãƒ“ã‚¹ã«ã¤ã„ã¦ã¯æ—¢ã«ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ã§ç”¨æ„ã•ã‚Œã¦ã„ã‚‹æ©Ÿèƒ½ã‚„ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£è£½Logstash Input ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ãƒ‡ãƒ¼ã‚¿ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿç¾ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ H2M_LI_HEADER Azure Blob Storage: logstash-input-azureblob H2M_LI_HEADER Azure Service Bus (Topic): logstash-input-azuretopic H2M_LI_HEADER Azure Event Hub: logstash-input-azureeventhub H2M_LI_HEADER Azure SQL Database: logstash-input-jdbc H2M_LI_HEADER Azure Database for MySQL: logstash-input-jdbc H2M_LI_HEADER Azure Database for PostgreSQL: logstash-input-jdbc H2M_LI_HEADER Azure HDInsight: ES-Hadoopã«ã‚ˆã‚‹é€£æº","title":"15åˆ†ã§ãŠå±Šã‘ã™ã‚‹Elastic Stack on Azureè¨­è¨ˆãƒ»æ§‹ç¯‰ãƒã‚¦ãƒã‚¦"},{"content":"ä»Šå¹´ã‚‚ã‚ã¨å°‘ã—ã€‚ã»ã¼è¶£å‘³ã®ç¯„å›²ã‚’è¶…ãˆãªã„ãƒ¬ãƒ™ãƒ«ã§ä»Šå¹´å–ã‚Šçµ„ã‚“ã ãƒ†ãƒ¼ãƒã®ï¼‘ã¤ã«Azure Functions with PythonãŒã‚ã‚‹ã€‚ã‚ã¾ã‚Šæƒ…å ±ãŒç„¡ã„ä¸­ã€èˆˆå‘³æœ¬ä½ã§ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ä½œã£ã¦ã¯å‹•ã‹ã—ã¦è©¦ã—ã¦å¾—ã‚‰ã‚ŒãŸæƒ…å ±ã‚’ã‚·ã‚³ã‚·ã‚³ã¨Githubã«ä¸Šã’ã¦ã„ã‚‹ã†ã¡ã«ãƒŠãƒ¬ãƒƒã‚¸ãŒæºœã¾ã£ã¦æ¥ãŸã€‚ãã‚Œã»ã©å¤šãã¯ãªã„ã¨æ€ã†ãŒPythonã§Azure Functionsã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„ã¨ã„ã†äººã‚‚ã„ã‚‹ã¨æ€ã†ã®ã§ãƒã‚¦ãƒã‚¦ã‚’ãƒ–ãƒ­ã‚°ã«ã¾ã¨ã‚ã¦ãŠãã€‚ã„ããªã‚Šæ°´ã‚’å·®ã™ã‚ˆã†ã§ã¯ã‚ã‚‹ãŒã€ç¾æ™‚ç‚¹ï¼ˆ2017å¹´12æœˆï¼‰ã§ã¯Azure Functionsã®Pythonã‚µãƒãƒ¼ã‚¿ãƒ“ãƒªãƒ†ã‚£ã¯Experimentalï¼ˆå®Ÿé¨“çš„ã‚µãƒãƒ¼ãƒˆï¼‰ã§ã‚ã‚Šãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³å‘ãã§ã¯ãªã„çŠ¶æ³ã§ã‚ã‚‹ã®ã§ã€ãƒ›ãƒ³ãƒˆã«PythonãŒå¥½ããªäººãŒOn your own riskã§æ¥½ã—ã‚“ã§ã„ãŸã ã‘ã‚Œã°ã¨æ€ã†ã€‚\nAzure Functionsã®Pythonã‚µãƒãƒ¼ãƒˆçŠ¶æ³ Azure Functionsã®Runtimeã«ã¯å¤§ãã1ç³»ã¨ï¼’ç³»ã®ï¼’ç¨®é¡ã‚ã‚‹ãŒã€ç¾æ™‚ç‚¹ã§Pythonã¯1ç³»ã§ã®ã¿Experimentalã‚µãƒãƒ¼ãƒˆã¨ã„ã†çŠ¶æ³ï¼ˆ See also è¨€èªã‚µãƒãƒ¼ãƒˆçŠ¶æ³ï¼‰\nExperimentalï¼ˆå®Ÿé¨“çš„ã‚µãƒãƒ¼ãƒˆï¼‰ãªã®ã§æœ¬ç•ªã§ã®åˆ©ç”¨ã¯éæ¨å¥¨ã§ã‚ã‚Šã€å…¬å¼ã‚µãƒãƒ¼ãƒˆã¯ãªã„ï¼ˆãƒ™ã‚¹ãƒˆã‚¨ãƒ•ã‚©ãƒ¼ãƒˆã§ã®ã‚µãƒãƒ¼ãƒˆã¯å¾—ã‚‰ã‚Œã‚‹ã¯ãšï¼‰ã€‚ã¾ãŸã€å½“ç„¶ãªãŒã‚‰GAè¨€èªã«æ¯”ã¹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¯æ‚ªã„ã€‚Pythonã¯Functionå‘¼ã³å‡ºã—æ¯ã«python.exeãŒå®Ÿè¡Œã•ã‚Œã‚‹ï¼ˆGAè¨€èªã¯Runtimeã¨åŒã˜ãƒ—ãƒ­ã‚»ã‚¹ã§å®Ÿè¡Œï¼‰ã€‚\nå°†æ¥çš„ãªè©±ã‚’ã™ã‚‹ã¨ã€Azure Functions Runtime 1ç³»ã§ã®Pythonã‚µãƒãƒ¼ãƒˆã«ã¤ã„ã¦ã¯ä»Šã®Experimentalã®åŸŸã‚’è¶…ãˆã‚‹ã“ã¨ã¯ãªã„ã ã‚ã†ã€‚ä¸€æ–¹ã€Runtime 2ç³»ã§ã¯PythonãŒæ­£å¼ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹ã‚ˆã†ã«å¯¾å¿œãŒé€²ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã€‚ãŸã ã—æ™‚æœŸã¯æœªå®šã€‚ã“ã®å¯¾å¿œã«ã¤ã„ã¦ã¯ä¸‹è¨˜Github IssueãŒåˆ‡ã‚‰ã‚Œã¦ãŠã‚Šã€ã‚ã‚‹ç¨‹åº¦ã®å¯¾å¿œçŠ¶æ³ã§ã‚ã‚Œã°ç¢ºèªå¯èƒ½ã€‚Pythonã‚’ä½¿ã†åˆ©ç‚¹ã®ï¼‘ã¤ã«ã€å¼·åŠ›ãªæ•°ç†è¨ˆç®—ã€è‡ªç„¶è¨€èªè§£æã€æ©Ÿæ¢°å­¦ç¿’ç³»ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚ã‚‹ãŒã€æ—©ãå®‰å®šã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‚™ã‚ã£ãŸPythonã‚µãƒ¼ãƒãƒ¬ã‚¹ã‚¢ãƒ—ãƒªå®Ÿè¡Œç’°å¢ƒã§ã“ã‚Œã‚‰å¼·åŠ›ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æ´»ç”¨ã§ããŸã‚‰ã¨æ€ã†ã®ã¯ç§ã ã‘ã§ã¯ãªã„ã ã‚ã†ã€‚ä»Šå¾Œã®é€²å±•ã«æœŸå¾…ã€‚\nFeature planning: first class Python support Hosting Planã®é¸æŠã«ã¤ã„ã¦ Consumption Plan vs App Service Plan Azure Functionsã®Hosting Planã«ã¯Consumption Planã¨App Service Planã®2ã¤ãŒã‚ã£ã¦ã€è¨€èªã«é–¢ä¿‚ãªãå„ãƒ—ãƒ©ãƒ³ã®ç‰¹å¾´ã¯æ¬¡ã®é€šã‚Š:\nConsumption Plan\nã‚³ãƒ¼ãƒ‰å®Ÿè¡Œæ™‚ã«ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å‰²ã‚Šå½“ã¦ ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡ï¼ˆé–¢æ•°å®Ÿè¡Œæ™‚é–“ã€ä½¿ç”¨ãƒ¡ãƒ¢ãƒªï¼‰ã§èª²é‡‘ è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒ«ã€å„å‡¦ç†ã¯ã€œ10åˆ†ã¾ã§ App Service Plan\nå°‚ç”¨VMã§ãƒªã‚½ãƒ¼ã‚¹ç¢ºä¿ ç¶™ç¶šå‡¦ç†ï¼š10åˆ†ä»¥ä¸Šã®å‡¦ç† App Serviceç’°å¢ƒã§ã®ã¿å¯èƒ½ãªå‡¦ç†: App Service Environment, VNET/VPNæ¥ç¶š, ã‚ˆã‚Šå¤§ããªã‚µã‚¤ã‚ºã®VM, etc Pythonã§ä½¿ã†ä¸Šã§æ°—ã‚’ã¤ã‘ã‚‹ãƒã‚¤ãƒ³ãƒˆ Python 3.Xãªã©Runtimeã®å¤‰æ›´ã‚’è¡Œã†å ´åˆã¯ã€å°‚ç”¨ç’°å¢ƒã§ã‚ã‚‹å¿…è¦ãŒã‚ã£ã¦App Service Planå¿…é ˆ Consumption Planã®å ´åˆã€Pythonã«é™ã‚‰ãšColdã‚¹ã‚¿ãƒ¼ãƒˆå•é¡Œã¨ã„ã†ä¼‘çœ ã—ãŸFunctionã®èµ·å‹•ãŒæ¥µç«¯ã«é…ããªã‚‹å•é¡ŒãŒã‚ã‚‹ã®ã ãŒã€Pythonã®å ´åˆã¯ã€GAè¨€èªã«æ¯”ã¹ã¦ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒæ‚ªãã€SciPyãªã©é‡ã‚ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹ã¨çµ¶æœ›çš„ã«é…ããªã‚‹ã“ã¨ã‹ã‚‰Consumption Planã§ã®å•é¡ŒãŒç‰¹ã«é¡•è‘—ã«ã§ã¦ãã‚‹ã€‚ã“ã‚Œã¾ã§ã®çµŒé¨“ã‹ã‚‰ã€å°ã•ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä¸¦ã¹ã‚‹Consumption Planã‚ˆã‚Šã‚‚æ¯”è¼ƒçš„å¤§ããªã‚µã‚¤ã‚ºã®VMãŒé¸ã¹ã‚‹App Service Planã®æ–¹ãŒå‘ã„ã¦ã„ã‚‹ã“ã¨ãŒå¤šã„ã€‚Pythonã®å ´åˆã¯ã€äºˆæ¸¬å¯èƒ½ãªãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã«å¯¾ã—ã¦App Service Planã§ä½¿ã†ã»ã†ãŒå•é¡ŒãŒå°‘ãªã„ã€‚Consumption Planã®é­…åŠ›ã§ã‚ã‚‹Micro Billingï¼ˆä½¿ã£ãŸåˆ†ã ã‘èª²é‡‘ï¼‰ã‚„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¿œã˜ãŸã‚ªãƒ¼ãƒˆã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã¨ã„ã£ãŸçœŸã®ã‚µãƒ¼ãƒãƒ¬ã‚¹ã«æœŸå¾…ã•ã‚Œã‚‹è¦ä»¶ã¯æ—¢ã«æ­£å¼ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹C#ã€Nodeã§ã‚„ã£ã¦ã„ãŸã ãã®ãŒã‚ˆã„ã‹ã¨ã€‚ [å‚è€ƒ] Coldã‚¹ã‚¿ãƒ¼ãƒˆå•é¡Œ Consumption Planã«ãŠã‘ã‚‹å•é¡Œ Azure Functions Cold Start Workaround The only downside is that the consumption model that keeps the cost so dirt-cheap means that unless you are using your Function constantly (in which case, you might be better off with the non-consumption options anyway), you will often be hit with a long delay as your Function wakes up from hibernation ä¼‘çœ ã—ãŸFunctionã‚’ã©ã†èµ·ã“ã™ã‹ãŒãƒã‚¤ãƒ³ãƒˆã€‚äº‹å‰ã«ç©ºãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚‹ã“ã¨ãŒè€ƒãˆã‚‰ã‚Œã‚‹ãŒå•é¡Œã¯ã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼ˆãƒ•ã‚©ãƒ¼ãƒ é–‹ã„ãŸæ™‚ã¨ã‹ï¼‰ Python 3.Xãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¸ã®å¤‰æ›´æ–¹æ³• 2017å¹´12æœˆæ™‚ç‚¹ã®Azure Functionsã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆPython Runtimeã¯2.7.8ã§ã‚ã‚‹ã€‚Site Extensionã«Python3.5ç³»ã¨Python3.6ç³»ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ãã‚Œã‚’åˆ©ç”¨ã—ã¦Functionsã§åˆ©ç”¨ã™ã‚‹Python Runtimeã‚’å¤‰æ›´ã™ã‚‹æ–¹æ³•ã‚’ä¸‹è¨˜ãƒšãƒ¼ã‚¸ã«çºã‚ãŸã€‚\nHow to change the Python version used in a Function App ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³• pipã¨Kudu DebugConsole/UIã‚’åˆ©ç”¨ã—ãŸï¼’ç¨®é¡ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã‚’ä¸‹è¨˜ãƒšãƒ¼ã‚¸ã«çºã‚ãŸã€‚\nHow to install Python modules Pythonã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ ç§ãŒè©¦ã—ãŸTriggerã¨Bindingåˆ©ç”¨ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯å…¨ã¦ä¸‹è¨˜Githubãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è¿½åŠ ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚ã‚‚ã—ã“ã‚Œã‚’èª­ã‚“ã§ã„ã‚‹çš†ã•ã‚“ã§ä¸‹è¨˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚«ãƒãƒ¼ã•ã‚Œã¦ã„ãªã„Trigger/Bindingã®çµ„ã¿åˆã‚ã›ã‚’è©¦ã•ã‚ŒãŸã‚‰æ˜¯éã¨ã‚‚ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆãã ã•ã„ã€‚\nhttps://github.com/yokawasa/azure-functions-python-samples ã‚¹ãƒ©ã‚¤ãƒ‰ã¨Hands-onãƒãƒ†ãƒªã‚¢ãƒ« Azure Antennaã«ã¦2017å¹´11æœˆ20æ—¥ã¨11æœˆ28æ—¥ã«å®Ÿæ–½ã—ãŸã‚»ãƒƒã‚·ãƒ§ãƒ³è³‡æ–™:\nPythonã«ã‚ˆã‚‹Azureã‚µãƒ¼ãƒãƒ¬ã‚¹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™º / Serverless Application Development with Python from Yoichi Kawasaki\nHands-onãƒãƒ†ãƒªã‚¢ãƒ«ï¼š\nHands-on: Serverless Application Development with Python ãã‚Œã§ã¯ã€Enjoy Serverless Application Development with Python!\n[è¿½è¨˜] ä¸Šè¨˜ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«é–¢ã™ã‚‹è¨˜äº‹ æ½œå…¥ãƒ¬ãƒãƒ¼ãƒˆ\u0026raquo; Pythonã‚’ä½¿ã£ãŸAzureã‚µãƒ¼ãƒãƒ¬ã‚¹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™º æ¸‹è°·ãƒ’ã‚«ãƒªã‚¨ Azure Antenna ãƒãƒ³ã‚ºã‚ªãƒ³ å‚åŠ ãƒ¬ãƒãƒ¼ãƒˆ ","permalink":"https://unofficialism.info/posts/azure-functions-app-development-with-python-experimental/","summary":"ä»Šå¹´ã‚‚ã‚ã¨å°‘ã—ã€‚ã»ã¼è¶£å‘³ã®ç¯„å›²ã‚’è¶…ãˆãªã„ãƒ¬ãƒ™ãƒ«ã§ä»Šå¹´å–ã‚Šçµ„ã‚“ã ãƒ†ãƒ¼ãƒã®ï¼‘ã¤ã«Azure Functions with PythonãŒã‚ã‚‹ã€‚ã‚ã¾ã‚Šæƒ…å ±ãŒç„¡ã„ä¸­ã€èˆˆå‘³æœ¬ä½ã§ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ä½œã£ã¦ã¯å‹•ã‹ã—ã¦è©¦ã—ã¦å¾—ã‚‰ã‚ŒãŸæƒ…å ±ã‚’ã‚·ã‚³ã‚·ã‚³ã¨Githubã«ä¸Šã’ã¦ã„ã‚‹ã†ã¡ã«ãƒŠãƒ¬ãƒƒã‚¸ãŒæºœã¾ã£ã¦æ¥ãŸã€‚ãã‚Œã»ã©å¤šãã¯ãªã„ã¨æ€ã†ãŒPythonã§Azure Functionsã‚¢ãƒ—ãƒªã‚’ä½œã‚ŠãŸã„ã¨ã„ã†äººã‚‚ã„ã‚‹ã¨æ€ã†ã®ã§ãƒã‚¦ãƒã‚¦ã‚’ãƒ–ãƒ­ã‚°ã«ã¾ã¨ã‚ã¦ãŠãã€‚ã„ããªã‚Šæ°´ã‚’å·®ã™ã‚ˆã†ã§ã¯ã‚ã‚‹ãŒã€ç¾æ™‚ç‚¹ï¼ˆ2017å¹´12æœˆï¼‰ã§ã¯Azure Functionsã®Pythonã‚µãƒãƒ¼ã‚¿ãƒ“ãƒªãƒ†ã‚£ã¯Experimentalï¼ˆå®Ÿé¨“çš„ã‚µãƒãƒ¼ãƒˆï¼‰ã§ã‚ã‚Šãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³å‘ãã§ã¯ãªã„çŠ¶æ³ã§ã‚ã‚‹ã®ã§ã€ãƒ›ãƒ³ãƒˆã«PythonãŒå¥½ããªäººãŒOn your own riskã§æ¥½ã—ã‚“ã§ã„ãŸã ã‘ã‚Œã°ã¨æ€ã†ã€‚\nAzure Functionsã®Pythonã‚µãƒãƒ¼ãƒˆçŠ¶æ³ Azure Functionsã®Runtimeã«ã¯å¤§ãã1ç³»ã¨ï¼’ç³»ã®ï¼’ç¨®é¡ã‚ã‚‹ãŒã€ç¾æ™‚ç‚¹ã§Pythonã¯1ç³»ã§ã®ã¿Experimentalã‚µãƒãƒ¼ãƒˆã¨ã„ã†çŠ¶æ³ï¼ˆ See also è¨€èªã‚µãƒãƒ¼ãƒˆçŠ¶æ³ï¼‰\nExperimentalï¼ˆå®Ÿé¨“çš„ã‚µãƒãƒ¼ãƒˆï¼‰ãªã®ã§æœ¬ç•ªã§ã®åˆ©ç”¨ã¯éæ¨å¥¨ã§ã‚ã‚Šã€å…¬å¼ã‚µãƒãƒ¼ãƒˆã¯ãªã„ï¼ˆãƒ™ã‚¹ãƒˆã‚¨ãƒ•ã‚©ãƒ¼ãƒˆã§ã®ã‚µãƒãƒ¼ãƒˆã¯å¾—ã‚‰ã‚Œã‚‹ã¯ãšï¼‰ã€‚ã¾ãŸã€å½“ç„¶ãªãŒã‚‰GAè¨€èªã«æ¯”ã¹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¯æ‚ªã„ã€‚Pythonã¯Functionå‘¼ã³å‡ºã—æ¯ã«python.exeãŒå®Ÿè¡Œã•ã‚Œã‚‹ï¼ˆGAè¨€èªã¯Runtimeã¨åŒã˜ãƒ—ãƒ­ã‚»ã‚¹ã§å®Ÿè¡Œï¼‰ã€‚\nå°†æ¥çš„ãªè©±ã‚’ã™ã‚‹ã¨ã€Azure Functions Runtime 1ç³»ã§ã®Pythonã‚µãƒãƒ¼ãƒˆã«ã¤ã„ã¦ã¯ä»Šã®Experimentalã®åŸŸã‚’è¶…ãˆã‚‹ã“ã¨ã¯ãªã„ã ã‚ã†ã€‚ä¸€æ–¹ã€Runtime 2ç³»ã§ã¯PythonãŒæ­£å¼ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹ã‚ˆã†ã«å¯¾å¿œãŒé€²ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã€‚ãŸã ã—æ™‚æœŸã¯æœªå®šã€‚ã“ã®å¯¾å¿œã«ã¤ã„ã¦ã¯ä¸‹è¨˜Github IssueãŒåˆ‡ã‚‰ã‚Œã¦ãŠã‚Šã€ã‚ã‚‹ç¨‹åº¦ã®å¯¾å¿œçŠ¶æ³ã§ã‚ã‚Œã°ç¢ºèªå¯èƒ½ã€‚Pythonã‚’ä½¿ã†åˆ©ç‚¹ã®ï¼‘ã¤ã«ã€å¼·åŠ›ãªæ•°ç†è¨ˆç®—ã€è‡ªç„¶è¨€èªè§£æã€æ©Ÿæ¢°å­¦ç¿’ç³»ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚ã‚‹ãŒã€æ—©ãå®‰å®šã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‚™ã‚ã£ãŸPythonã‚µãƒ¼ãƒãƒ¬ã‚¹ã‚¢ãƒ—ãƒªå®Ÿè¡Œç’°å¢ƒã§ã“ã‚Œã‚‰å¼·åŠ›ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æ´»ç”¨ã§ããŸã‚‰ã¨æ€ã†ã®ã¯ç§ã ã‘ã§ã¯ãªã„ã ã‚ã†ã€‚ä»Šå¾Œã®é€²å±•ã«æœŸå¾…ã€‚\nFeature planning: first class Python support Hosting Planã®é¸æŠã«ã¤ã„ã¦ Consumption Plan vs App Service Plan Azure Functionsã®Hosting Planã«ã¯Consumption Planã¨App Service Planã®2ã¤ãŒã‚ã£ã¦ã€è¨€èªã«é–¢ä¿‚ãªãå„ãƒ—ãƒ©ãƒ³ã®ç‰¹å¾´ã¯æ¬¡ã®é€šã‚Š:\nConsumption Plan\nã‚³ãƒ¼ãƒ‰å®Ÿè¡Œæ™‚ã«ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å‰²ã‚Šå½“ã¦ ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡ï¼ˆé–¢æ•°å®Ÿè¡Œæ™‚é–“ã€ä½¿ç”¨ãƒ¡ãƒ¢ãƒªï¼‰ã§èª²é‡‘ è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒ«ã€å„å‡¦ç†ã¯ã€œ10åˆ†ã¾ã§ App Service Plan\nå°‚ç”¨VMã§ãƒªã‚½ãƒ¼ã‚¹ç¢ºä¿ ç¶™ç¶šå‡¦ç†ï¼š10åˆ†ä»¥ä¸Šã®å‡¦ç† App Serviceç’°å¢ƒã§ã®ã¿å¯èƒ½ãªå‡¦ç†: App Service Environment, VNET/VPNæ¥ç¶š, ã‚ˆã‚Šå¤§ããªã‚µã‚¤ã‚ºã®VM, etc Pythonã§ä½¿ã†ä¸Šã§æ°—ã‚’ã¤ã‘ã‚‹ãƒã‚¤ãƒ³ãƒˆ Python 3.Xãªã©Runtimeã®å¤‰æ›´ã‚’è¡Œã†å ´åˆã¯ã€å°‚ç”¨ç’°å¢ƒã§ã‚ã‚‹å¿…è¦ãŒã‚ã£ã¦App Service Planå¿…é ˆ Consumption Planã®å ´åˆã€Pythonã«é™ã‚‰ãšColdã‚¹ã‚¿ãƒ¼ãƒˆå•é¡Œã¨ã„ã†ä¼‘çœ ã—ãŸFunctionã®èµ·å‹•ãŒæ¥µç«¯ã«é…ããªã‚‹å•é¡ŒãŒã‚ã‚‹ã®ã ãŒã€Pythonã®å ´åˆã¯ã€GAè¨€èªã«æ¯”ã¹ã¦ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒæ‚ªãã€SciPyãªã©é‡ã‚ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹ã¨çµ¶æœ›çš„ã«é…ããªã‚‹ã“ã¨ã‹ã‚‰Consumption Planã§ã®å•é¡ŒãŒç‰¹ã«é¡•è‘—ã«ã§ã¦ãã‚‹ã€‚ã“ã‚Œã¾ã§ã®çµŒé¨“ã‹ã‚‰ã€å°ã•ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä¸¦ã¹ã‚‹Consumption Planã‚ˆã‚Šã‚‚æ¯”è¼ƒçš„å¤§ããªã‚µã‚¤ã‚ºã®VMãŒé¸ã¹ã‚‹App Service Planã®æ–¹ãŒå‘ã„ã¦ã„ã‚‹ã“ã¨ãŒå¤šã„ã€‚Pythonã®å ´åˆã¯ã€äºˆæ¸¬å¯èƒ½ãªãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã«å¯¾ã—ã¦App Service Planã§ä½¿ã†ã»ã†ãŒå•é¡ŒãŒå°‘ãªã„ã€‚Consumption Planã®é­…åŠ›ã§ã‚ã‚‹Micro Billingï¼ˆä½¿ã£ãŸåˆ†ã ã‘èª²é‡‘ï¼‰ã‚„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¿œã˜ãŸã‚ªãƒ¼ãƒˆã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã¨ã„ã£ãŸçœŸã®ã‚µãƒ¼ãƒãƒ¬ã‚¹ã«æœŸå¾…ã•ã‚Œã‚‹è¦ä»¶ã¯æ—¢ã«æ­£å¼ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹C#ã€Nodeã§ã‚„ã£ã¦ã„ãŸã ãã®ãŒã‚ˆã„ã‹ã¨ã€‚ [å‚è€ƒ] Coldã‚¹ã‚¿ãƒ¼ãƒˆå•é¡Œ Consumption Planã«ãŠã‘ã‚‹å•é¡Œ Azure Functions Cold Start Workaround The only downside is that the consumption model that keeps the cost so dirt-cheap means that unless you are using your Function constantly (in which case, you might be better off with the non-consumption options anyway), you will often be hit with a long delay as your Function wakes up from hibernation ä¼‘çœ ã—ãŸFunctionã‚’ã©ã†èµ·ã“ã™ã‹ãŒãƒã‚¤ãƒ³ãƒˆã€‚äº‹å‰ã«ç©ºãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚‹ã“ã¨ãŒè€ƒãˆã‚‰ã‚Œã‚‹ãŒå•é¡Œã¯ã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼ˆãƒ•ã‚©ãƒ¼ãƒ é–‹ã„ãŸæ™‚ã¨ã‹ï¼‰ Python 3.","title":"Azure Functions Python Programming  - Experimental"},{"content":"ã“ã‚Œã¯9/29 Azure Web Seminar ã€ŒAzure ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ´»ç”¨ã—ã¦ä½œã‚‹ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ãªå…¨æ–‡æ¤œç´¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€ã®ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—è¨˜äº‹ã§ã™ã€‚ãªã‹ãªã‹æš‡ãŒã§ããšå°‘ã€…æ™‚é–“ãŒçµŒéã—ã¦ã—ã¾ã„ã¾ã—ãŸã€‚\nAzure ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ´»ç”¨ã—ã¦ä½œã‚‹ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ãªå…¨æ–‡æ¤œç´¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ from Yoichi Kawasaki\nSample Application \u0026amp; Source Code ã‚»ãƒŸãƒŠãƒ¼ã§ç´¹ä»‹ã—ãŸã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã¯Azureå…¬å¼ã‚µã‚¤ãƒˆã«è¼‰ã›ã¦ã‚ã‚‹ä»£è¡¨çš„ãªã‚µãƒ¼ãƒ“ã‚¹ã®FAQãƒ‡ãƒ¼ã‚¿ã‚’å…ƒã«ã—ãŸHTML/CSS/Javascriptã«ã‚ˆã‚‹Qï¼†AãƒŠãƒ¬ã‚¸ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹æ¤œç´¢ã®ã‚·ãƒ³ã‚°ãƒ«ãƒšãƒ¼ã‚¸ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã«Azure Searchã‚’ä½¿ã„ã€ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã«Cosmos DBã‚’ä½¿ã„Azure Searchã®CosmosDB Indexerã§ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹æ§‹æˆã«ã—ã¦ã¾ã™ã€‚ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¨è¨­å®šæ‰‹é †ã¯ä»¥ä¸‹Githubãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚¢ãƒƒãƒ—ã—ã¦ã‚ã‚Šã¾ã™ã€‚ã‚‚ã—ãƒã‚°ã‚„è¨­å®šæ‰‹é †ç­‰ã§ã”è³ªå•ãŒã‚ã‚Œã°Githubã§Issueç™»éŒ²ã„ãŸã ã‘ã‚Œã°æ™‚é–“ã‚’è¦‹ã¤ã‘ã¦å¯¾å¿œã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚\nSource Code: https://github.com/yokawasa/azure-search-qna-demo/\nDemo: AI Digital Media Search ã‚»ãƒŸãƒŠãƒ¼ä¸­ã«ç´¹ä»‹ã—ãŸéæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã®å…¨æ–‡æ¤œç´¢ãƒ‡ãƒ¢ã¨ã—ã¦ç´¹ä»‹ã—ãŸAI Digital Media Searchã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚ãƒ¡ãƒ‡ã‚£ã‚¢ x éŸ³å£°èªè­˜ x æ©Ÿæ¢°ç¿»è¨³ x å…¨æ–‡æ¤œç´¢å…¨ã¦ã‚’çµ¡ã‚ãŸé¢ç™½ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãªã®ã§ã“ã¡ã‚‰ã§ãƒ‡ãƒ¢å‹•ç”»ã¨ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å…±æœ‰ã—ã¾ã™ã€‚ã¾ãŸã“ã®ã‚¢ãƒ—ãƒªã¯Azure PaaSã‚µãƒ¼ãƒ“ã‚¹ã‚’çµ„ã¿åˆã‚ã›ã¦ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¬ã‚¤ãƒ¤ãƒ¼(Web App for Container)ã®ã¿ãªã‚‰ãšãƒ‡ãƒ¼ã‚¿ç”Ÿæˆéƒ¨åˆ†ï¼ˆAMS, Functions, Logic Appï¼‰ã‚‚å…¨ã¦ã‚µãƒ¼ãƒãƒ¬ã‚¹ã§å®Ÿç¾ã—ã¦ã„ã‚‹ã®ã§ã“ã®ã‚¨ãƒªã‚¢ã®ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã¨ã—ã¦ã‚‚ã¨ã¦ã‚‚è‰¯ã„ã‚‚ã®ã«ãªã£ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚\nDemo Video: AI Digital Media Search Demo Source Code: https://github.com/shigeyf/ai-digitalmedia AzureSearch.js - Azure Search UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª AzureSearch.jsã¯Azure Searchã®UIãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€Azure Searchãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒ¼ãƒ ä¸»è¦é–‹ç™ºè€…ã«ã‚ˆã‚Šé–‹å§‹ã•ã‚ŒãŸOSSãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚TypeScriptã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ã¨ã¦ã‚‚èª­ã¿ã‚„ã™ãã€ã¾ãŸã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒæä¾›ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ“ä½œã«ã‚ˆã‚Šéå¸¸ã«çŸ­ã„ã‚³ãƒ¼ãƒ‰ã§ã‚µãƒ¼ãƒãƒœãƒƒã‚¯ã‚¹ã€çµæœå‡ºåŠ›ã€ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ•ã‚¡ã‚»ãƒƒãƒˆã€ã‚µã‚¸ã‚§ã‚¹ã‚·ãƒ§ãƒ³ãªã©ã§æ§‹æˆã•ã‚Œã‚‹ã‚µãƒ¼ãƒç”¨UIã‚’ç°¡å˜ã«çµ„ã¿ç«‹ã¦ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ãªã‹ãªã‹ã„ã‘ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€ã‚ã¾ã‚Šä¸–ã®ä¸­ã«çŸ¥ã‚‰ã‚Œã¦ã„ãªã„ã®ã¯ã‚‚ã£ãŸã„ãªã„ã¨æ€ã„ã‚»ãƒŸãƒŠãƒ¼ã®æœ€å¾Œã§ç´¹ä»‹ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚ã“ã‚Œä½¿ã‚ãªã„æ‰‹ã¯ãªã„ã§ã™ã€‚æ‰‹ã£å–ã‚Šæ—©ãã¯ã€ä¸‹è¨˜ã®AzureSearch.jsã‚¢ãƒ—ãƒªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒšãƒ¼ã‚¸ã§çš†ã•ã‚“ã®Azure Searchã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®QueryKeyã¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚¹ã‚­ãƒ¼ãƒï¼ˆJSONãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼‰ã‚’å…¥åŠ›ã™ã‚‹ã¨AzureSearch.jsã‚¢ãƒ—ãƒªã®é››å½¢ãŒç”Ÿæˆã•ã‚Œã¾ã™ã®ã§ã€ãã“ã‹ã‚‰å§‹ã‚ã‚‹ã®ãŒã‚ˆã„ã‹ã¨æ€ã„ã¾ã™ã€‚\nAzureSearch.jsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒˆãƒƒãƒ—ï¼ Github ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã‚µã‚¤ãƒˆ AzureSearch.jsã‚¢ãƒ—ãƒªã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ END\n","permalink":"https://unofficialism.info/posts/building-full-text-search-application-using-azure-services/","summary":"ã“ã‚Œã¯9/29 Azure Web Seminar ã€ŒAzure ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ´»ç”¨ã—ã¦ä½œã‚‹ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ãªå…¨æ–‡æ¤œç´¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€ã®ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—è¨˜äº‹ã§ã™ã€‚ãªã‹ãªã‹æš‡ãŒã§ããšå°‘ã€…æ™‚é–“ãŒçµŒéã—ã¦ã—ã¾ã„ã¾ã—ãŸã€‚\nAzure ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ´»ç”¨ã—ã¦ä½œã‚‹ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ãªå…¨æ–‡æ¤œç´¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ from Yoichi Kawasaki\nSample Application \u0026amp; Source Code ã‚»ãƒŸãƒŠãƒ¼ã§ç´¹ä»‹ã—ãŸã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã¯Azureå…¬å¼ã‚µã‚¤ãƒˆã«è¼‰ã›ã¦ã‚ã‚‹ä»£è¡¨çš„ãªã‚µãƒ¼ãƒ“ã‚¹ã®FAQãƒ‡ãƒ¼ã‚¿ã‚’å…ƒã«ã—ãŸHTML/CSS/Javascriptã«ã‚ˆã‚‹Qï¼†AãƒŠãƒ¬ã‚¸ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹æ¤œç´¢ã®ã‚·ãƒ³ã‚°ãƒ«ãƒšãƒ¼ã‚¸ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã«Azure Searchã‚’ä½¿ã„ã€ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã«Cosmos DBã‚’ä½¿ã„Azure Searchã®CosmosDB Indexerã§ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹æ§‹æˆã«ã—ã¦ã¾ã™ã€‚ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¨è¨­å®šæ‰‹é †ã¯ä»¥ä¸‹Githubãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚¢ãƒƒãƒ—ã—ã¦ã‚ã‚Šã¾ã™ã€‚ã‚‚ã—ãƒã‚°ã‚„è¨­å®šæ‰‹é †ç­‰ã§ã”è³ªå•ãŒã‚ã‚Œã°Githubã§Issueç™»éŒ²ã„ãŸã ã‘ã‚Œã°æ™‚é–“ã‚’è¦‹ã¤ã‘ã¦å¯¾å¿œã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚\nSource Code: https://github.com/yokawasa/azure-search-qna-demo/\nDemo: AI Digital Media Search ã‚»ãƒŸãƒŠãƒ¼ä¸­ã«ç´¹ä»‹ã—ãŸéæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã®å…¨æ–‡æ¤œç´¢ãƒ‡ãƒ¢ã¨ã—ã¦ç´¹ä»‹ã—ãŸAI Digital Media Searchã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚ãƒ¡ãƒ‡ã‚£ã‚¢ x éŸ³å£°èªè­˜ x æ©Ÿæ¢°ç¿»è¨³ x å…¨æ–‡æ¤œç´¢å…¨ã¦ã‚’çµ¡ã‚ãŸé¢ç™½ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãªã®ã§ã“ã¡ã‚‰ã§ãƒ‡ãƒ¢å‹•ç”»ã¨ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å…±æœ‰ã—ã¾ã™ã€‚ã¾ãŸã“ã®ã‚¢ãƒ—ãƒªã¯Azure PaaSã‚µãƒ¼ãƒ“ã‚¹ã‚’çµ„ã¿åˆã‚ã›ã¦ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¬ã‚¤ãƒ¤ãƒ¼(Web App for Container)ã®ã¿ãªã‚‰ãšãƒ‡ãƒ¼ã‚¿ç”Ÿæˆéƒ¨åˆ†ï¼ˆAMS, Functions, Logic Appï¼‰ã‚‚å…¨ã¦ã‚µãƒ¼ãƒãƒ¬ã‚¹ã§å®Ÿç¾ã—ã¦ã„ã‚‹ã®ã§ã“ã®ã‚¨ãƒªã‚¢ã®ã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã¨ã—ã¦ã‚‚ã¨ã¦ã‚‚è‰¯ã„ã‚‚ã®ã«ãªã£ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚\nDemo Video: AI Digital Media Search Demo Source Code: https://github.com/shigeyf/ai-digitalmedia AzureSearch.js - Azure Search UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª AzureSearch.jsã¯Azure Searchã®UIãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€Azure Searchãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒãƒ¼ãƒ ä¸»è¦é–‹ç™ºè€…ã«ã‚ˆã‚Šé–‹å§‹ã•ã‚ŒãŸOSSãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚TypeScriptã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ã¨ã¦ã‚‚èª­ã¿ã‚„ã™ãã€ã¾ãŸã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒæä¾›ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ“ä½œã«ã‚ˆã‚Šéå¸¸ã«çŸ­ã„ã‚³ãƒ¼ãƒ‰ã§ã‚µãƒ¼ãƒãƒœãƒƒã‚¯ã‚¹ã€çµæœå‡ºåŠ›ã€ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ•ã‚¡ã‚»ãƒƒãƒˆã€ã‚µã‚¸ã‚§ã‚¹ã‚·ãƒ§ãƒ³ãªã©ã§æ§‹æˆã•ã‚Œã‚‹ã‚µãƒ¼ãƒç”¨UIã‚’ç°¡å˜ã«çµ„ã¿ç«‹ã¦ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ãªã‹ãªã‹ã„ã‘ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€ã‚ã¾ã‚Šä¸–ã®ä¸­ã«çŸ¥ã‚‰ã‚Œã¦ã„ãªã„ã®ã¯ã‚‚ã£ãŸã„ãªã„ã¨æ€ã„ã‚»ãƒŸãƒŠãƒ¼ã®æœ€å¾Œã§ç´¹ä»‹ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚ã“ã‚Œä½¿ã‚ãªã„æ‰‹ã¯ãªã„ã§ã™ã€‚æ‰‹ã£å–ã‚Šæ—©ãã¯ã€ä¸‹è¨˜ã®AzureSearch.jsã‚¢ãƒ—ãƒªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒšãƒ¼ã‚¸ã§çš†ã•ã‚“ã®Azure Searchã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®QueryKeyã¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚¹ã‚­ãƒ¼ãƒï¼ˆJSONãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼‰ã‚’å…¥åŠ›ã™ã‚‹ã¨AzureSearch.jsã‚¢ãƒ—ãƒªã®é››å½¢ãŒç”Ÿæˆã•ã‚Œã¾ã™ã®ã§ã€ãã“ã‹ã‚‰å§‹ã‚ã‚‹ã®ãŒã‚ˆã„ã‹ã¨æ€ã„ã¾ã™ã€‚\nAzureSearch.jsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒˆãƒƒãƒ—ï¼ Github ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã‚µã‚¤ãƒˆ AzureSearch.jsã‚¢ãƒ—ãƒªã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ END","title":"Developing Full Managed Search Application in Azure"},{"content":"Azure Searchã®ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ã«ã‚ˆã‚‹ãƒ†ã‚­ã‚¹ãƒˆè§£æçµæœã‚’å‡ºåŠ›ã™ã‚‹ï¼ˆã ã‘ã®ï¼‰ãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ã¦ã¿ãŸã®ã§ã“ã“ã§ç´¹ä»‹ã—ã¾ã™ã€‚ãã®åã‚‚azure-search-taï¼ˆta=Test Analyzerï¼‰ã€‚ä¸­èº«ã¯Azure Searchã®Analyzer APIã®å‡ºåŠ›çµæœã‚’æ•´å½¢ã—ã¦è¡¨ç¤ºã•ã›ã¦ã„ã¦ã„ã‚‹ã ã‘ã®å˜ç´”ãªã‚‚ã®ã§ã‚ã‚Šã¾ã™ãŒã€Azure Searchã®å…¨æ–‡æ¤œç´¢ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‚„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«ãƒ’ãƒƒãƒˆã—ãªã„åŸå› èª¿æŸ»ã‚’ã™ã‚‹éš›ã«ã¯å½¹ã«ç«‹ã¤ã¨æ€ã£ã¦ã¾ã™ã€‚ã€Œã©ã†ã—ã¦ã“ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒã²ã£ã‹ã‹ã‚‰ãªã„ã®ï¼Ÿã€ã‚’çªãè©°ã‚ã‚‹ã«ã¯æœ€çµ‚çš„ã«ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ã®ãƒ†ã‚­ã‚¹ãƒˆè§£æçµæœã¨çªãåˆã‚ã›ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã¨ã€ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ã‚’é¸æŠã™ã‚‹éš›ã«ãƒ†ã‚­ã‚¹ãƒˆè§£æãŒè¦–è¦šåŒ–ã•ã‚Œã¦ã„ã‚‹ã¨åˆ¤æ–­ã—ã‚„ã™ã„ã ã‚ã†ã¨ã€‚ãƒ„ãƒ¼ãƒ«ã¯2ç¨®é¡ã§ ï¼ˆï¼‘ï¼‰Web UIãƒ„ãƒ¼ãƒ«ã¨ï¼ˆï¼’ï¼‰ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«\nWeb UI Tool https://github.com/yokawasa/azure-search-ta\nã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯è¶…ç°¡å˜ã€‚ï¼ˆï¼‘ï¼‰Githubã‹ã‚‰azure-search-taã‚’clone ï¼ˆï¼’ï¼‰azure-search-ta/ui é…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’PHPãŒå‹•ãWebã‚µãƒ¼ãƒã«ã‚³ãƒ”ãƒ¼ ï¼ˆï¼“ï¼‰analyze-api.phpã‚’ã‚¨ãƒ‡ã‚£ã‚¿ã§é–‹ã„ã¦ãŠä½¿ã„ã®Azure Searchã‚«ã‚¦ãƒ³ãƒˆåã¨Azure Search API Adminã‚­ãƒ¼ã®å€¤ã‚’è¨­å®šãã ã•ã„ã€‚ã‚ã¨ã¯azure-search-ta-ui.htmlã«ã‚¢ã‚¯ã‚»ã‚¹ã„ãŸã ã‘ã‚Œã°ä¸Šè¨˜ã®ã‚ˆã†ãªUIãŒå‡ºåŠ›ã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚ãªãœHTML/JSã ã‘ã§ã¯ãªãé–“ã«PHPã‚’æŒŸã‚“ã§ã„ã‚‹ã®ã‹ã«ã¤ã„ã¦ã€Azure Searchã®Analyze APIã‚„ç®¡ç†ç³»APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ä½ç½®ä»˜ã‘ã‚‰ã‚Œã¦ãŠã‚Šã€ç®¡ç†ç³»APIã¯via CORSã§ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ä»˜ã‘ã¦ã„ãªã„ã‹ã‚‰ã§ã‚ã‚‹ã€‚\n$ git clone https://github.com/yokawasa/azure-search-ta.git` $ vi azure-search-ta/ui/analyze-api.php $azureSearchAccount=\u0026#34;\u0026#34;; $azureSearchApiKey = \u0026#34;\u0026#34;; Command-Line Tool 1. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨è¨­å®š pipã§azure-search-taãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚æ—¢ã«å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹éš›ã¯â€•â€•upgradeã‚’ã¤ã‘ã¦å®Ÿè¡Œãã ã•ã„ã€‚\n$ pip install --user azure-search-ta æ¬¡ã«ã€search.confã«ãŠä½¿ã„ã®Azure Searchã‚«ã‚¦ãƒ³ãƒˆåã¨Azure Search API Adminã‚­ãƒ¼ã®å€¤ã‚’è¨­å®šãã ã•ã„ã€‚\n# Azure Search Service Name ( never put space before and after = ) SEARCH_SERVICE_NAME= # Azure Search API Admin Key ( never put space before and after = ) SEARCH_API_KEY= 2. ä½¿ã„æ–¹ ã„ãã¤ã‹ä½¿ã„æ–¹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚\nusage: azure-search-ta [-h] [-v] [-c CONF] [-i INDEX] [-a ANALYZER] [-t TEXT] [-o OUTPUT]` This program do text analysis and generate formatted output by using Azure Search Analyze API optional arguments: -h, --help show this help message and exit -v, --version show program\u0026#39;s version number and exit -c CONF, --conf CONF Azure Search Configuration file. Default:search.conf -i INDEX, --index INDEX Azure Search index name -a ANALYZER, --analyzer ANALYZER Azure Search analyzer name -t TEXT, --text TEXT A file path or HTTP(s) URL from which the command line reads the text to analyze -o OUTPUT, --output OUTPUT Output format (\u0026#34;simple\u0026#34; or \u0026#34;normal\u0026#34;). Default:normal ja.microsoftã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ã«ã‚ˆã‚‹ãƒ†ã‚­ã‚¹ãƒˆè§£æçµæœã‚’normalãƒ¢ãƒ¼ãƒ‰ã§å‡ºåŠ›ã™ã‚‹ä¾‹ã€‚Analyzer APIã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹åãŒå¿…è¦ãªã®ã§ã€ãªã‚“ã§ã‚‚ã„ã„ã®ã§ã”è‡ªåˆ†ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹åã‚’æŒ‡å®šãã ã•ã„ã€‚ã“ã“ã§ã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹taã§simple.txtã«å¯¾è±¡ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨˜å…¥ã—ã¦å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚\n$ cat sample1.txt å¾è¼©ã¯çŒ«ã§ã‚ã‚‹ $ azure-search-ta -c ./search.conf -i ta -a ja.microsoft --t sample1.txt INPUT: å¾è¼©ã¯çŒ«ã§ã‚ã‚‹ TOKENS: [å¾è¼©] [çŒ«] [ã‚ã‚‹] Azure Searchã«ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ã•ã‚Œã¦ã„ã‚‹ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ã§ã‘ã§ãªãçš†ã•ã‚“ãŒä½œæˆã—ãŸã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ã«ã‚ˆã‚‹ãƒ†ã‚­ã‚¹ãƒˆè§£æçµæœã‚‚å½“ç„¶å‡ºåŠ›å¯èƒ½ã§ã™ã€‚ä»¥ä¸‹ã¯ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹tacustomã«Nã‚°ãƒ©ãƒ åˆ†å‰²ã®ã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼my_ngramã‚’ä½œæˆã—ãŸã¨ã—ã¦my_ngramã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ã«ã‚ˆã‚‹ãƒ†ã‚­ã‚¹ãƒˆè§£æçµæœã‚’å‡ºåŠ›ã™ã‚‹ä¾‹ã§ã™ã€‚ã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ã®å®šç¾©ã¯Githubãƒšãƒ¼ã‚¸ã®ã»ã†ã«è©³ã—ãæ›¸ã„ã¦ã„ã‚‹ã®ã§ã‚ˆã‹ã£ãŸã‚‰ã©ã†ãã€‚\n$ cat sample1.txt å¾è¼©ã¯çŒ«ã§ã‚ã‚‹ $ azure-search-ta -c ./search.conf -i tacustom -a my_ngram --t sample1.txt -o simple \u0026#39;å¾è¼©\u0026#39; \u0026#39;å¾è¼©ã¯\u0026#39; \u0026#39;å¾è¼©ã¯çŒ«ã§\u0026#39; \u0026#39;å¾è¼©ã¯çŒ«\u0026#39; \u0026#39;è¼©ã¯çŒ«ã§ã‚\u0026#39; \u0026#39;è¼©ã¯\u0026#39; \u0026#39;è¼©ã¯çŒ«\u0026#39; \u0026#39;è¼©ã¯çŒ«ã§\u0026#39; \u0026#39;ã¯çŒ«ã§ã‚\u0026#39; \u0026#39;ã¯çŒ«ã§\u0026#39; \u0026#39;ã¯çŒ«\u0026#39; \u0026#39;ã¯çŒ«ã§ã‚ã‚‹\u0026#39; \u0026#39;çŒ«ã§ã‚\u0026#39; \u0026#39;çŒ«ã§\u0026#39; \u0026#39;çŒ«ã§ ã‚ã‚‹\u0026#39; \u0026#39;ã§ã‚ã‚‹\u0026#39; \u0026#39;ã§ã‚\u0026#39; \u0026#39;ã‚ã‚‹\u0026#39; ä»–ã«ã¯ã€azure-search-taã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆä¸Šã®ãƒšãƒ¼ã‚¸ã®ãƒ†ã‚­ã‚¹ãƒˆè§£ææ©Ÿèƒ½ã‚‚ä»˜ã„ã¦ã„ã‚‹ã®ã§ã€ãã„ã¤ã‚’è©¦ã—ã¦ã¿ã¾ã™ã€‚ja.luceneã‚¢ãƒŠãƒ©ã‚¤ã‚¶ã‚’ä½¿ã£ã¦http://www.yahoo.co.jpãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã®å†…å®¹ã‚’è§£æã—ã¾ã™ã€‚\n$ azure-search-ta -c ./search.conf -i ta -a ja.lucene --t http://www.yahoo.co.jp -o simple \u0026#39;html\u0026#39; \u0026#39;public\u0026#39; \u0026#39;w\u0026#39; \u0026#39;3\u0026#39; \u0026#39;c\u0026#39; \u0026#39;dtd\u0026#39; \u0026#39;html\u0026#39; \u0026#39;4\u0026#39; \u0026#39;01\u0026#39; \u0026#39;transitional\u0026#39; \u0026#39;en\u0026#39; \u0026#39;http\u0026#39; \u0026#39;www\u0026#39; \u0026#39;w\u0026#39; \u0026#39;3\u0026#39; \u0026#39;org\u0026#39; \u0026#39;tr\u0026#39; \u0026#39;html\u0026#39; \u0026#39;4\u0026#39; \u0026#39;loose\u0026#39; \u0026#39;dtd\u0026#39; \u0026#39;yahoo\u0026#39; \u0026#39;japan\u0026#39; \u0026#39;ãƒ˜ãƒ«ãƒ—\u0026#39; \u0026#39;yahoo\u0026#39; \u0026#39;japan\u0026#39; \u0026#39;ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸\u0026#39; \u0026#39;æ©Ÿèƒ½\u0026#39; \u0026#39;æ­£ã—ã\u0026#39; \u0026#39;ã”\u0026#39; \u0026#39;åˆ©ç”¨\u0026#39; \u0026#39;ã„ãŸã ã\u0026#39; \u0026#39;ä¸‹è¨˜\u0026#39; \u0026#39;ç’°å¢ƒ\u0026#39; \u0026#39;å¿…è¦\u0026#39; \u0026#39;windows\u0026#39; \u0026#39;internet\u0026#39; \u0026#39;explorer\u0026#39; \u0026#39;9\u0026#39; \u0026#39;0\u0026#39; \u0026#39;ä»¥ä¸Š\u0026#39; \u0026#39;chrome\u0026#39; \u0026#39;æœ€æ–°\u0026#39; \u0026#39;ç‰ˆ\u0026#39; \u0026#39;firefox\u0026#39; \u0026#39;æœ€æ–°\u0026#39; \u0026#39;ç‰ˆ\u0026#39; \u0026#39;microsoft\u0026#39; \u0026#39;edge\u0026#39; \u0026#39;macintosh\u0026#39; \u0026#39;safari\u0026#39; \u0026#39;5\u0026#39; \u0026#39;0\u0026#39; \u0026#39;ä»¥ä¸Š\u0026#39; \u0026#39;internet\u0026#39; \u0026#39;explorer\u0026#39; \u0026#39;9\u0026#39; \u0026#39;0\u0026#39; \u0026#39;ä»¥ä¸Š\u0026#39; \u0026#39;ã”\u0026#39; \u0026#39;åˆ©ç”¨\u0026#39; \u0026#39;å ´åˆ\u0026#39; \u0026#39;internet\u0026#39; \u0026#39;explorer\u0026#39; \u0026#39;äº’æ›\u0026#39; \u0026#39;è¡¨ç¤º\u0026#39; \u0026#39;å‚è€ƒ\u0026#39; \u0026#39;äº’æ›\u0026#39; \u0026#39;è¡¨ç¤º\u0026#39; \u0026#39;ç„¡åŠ¹\u0026#39; \u0026#39;åŒ–\u0026#39; \u0026#39;è©¦ã—\u0026#39; \u0026#39;ãã ã•ã‚‹\u0026#39; \u0026#39;æ±åŒ—\u0026#39; \u0026#39;è‡ªè»¢è»Š\u0026#39; \u0026#39;ã‚¤ãƒ™ãƒ³ãƒˆ\u0026#39; \u0026#39;å‚åŠ \u0026#39; \u0026#39;æ–¹æ³•\u0026#39; \u0026#39;äº‹å‰\u0026#39; \u0026#39;ãƒã‚§ãƒƒã‚¯\u0026#39; \u0026#39;ã“ã ã‚ã‚Š\u0026#39; \u0026#39;ã”\u0026#39; \u0026#39;å½“åœ°\u0026#39; \u0026#39;ã‚¹ã‚¤ãƒ¼ãƒ„\u0026#39; \u0026#39;å–ã‚Šå¯„ã›ã‚‹\u0026#39; \u0026#39;ä¸Šæµ·\u0026#39; \u0026#39;ãƒãƒ¼ã‚¸ãƒ£ãƒ³\u0026#39; \u0026#39;å®šç•ª\u0026#39; \u0026#39;ã‚²ãƒ¼ãƒ \u0026#39; \u0026#39;ç„¡æ–™\u0026#39; \u0026#39;éŠã¶\u0026#39; \u0026#39;ãƒ‹ãƒ¥ãƒ¼ã‚¹\u0026#39; \u0026#39;11\u0026#39; \u0026#39;æ™‚\u0026#39; \u0026#39;1\u0026#39; \u0026#39;åˆ†\u0026#39; \u0026#39;æ›´æ–°\u0026#39; \u0026#39;éŸ“å›½\u0026#39; \u0026#39;åŒ—\u0026#39; \u0026#39;å¤ªé™½\u0026#39; \u0026#39;æ”¿ç­–\u0026#39; \u0026#39;å›å¸°\u0026#39; \u0026#39;å¨˜\u0026#39; \u0026#39;æ”¾ç½®\u0026#39; \u0026#39;ç†±ä¸­\u0026#39; \u0026#39;ç—‡\u0026#39; \u0026#39;æ­»ãªã™\u0026#39; \u0026#39;é€®æ•\u0026#39; \u0026#39;ä¿è‚²\u0026#39; \u0026#39;æ­»äº¡\u0026#39; \u0026#39;äº‹æ•…\u0026#39; \u0026#39;ç¡çœ \u0026#39; \u0026#39;ä¸­\u0026#39; \u0026#39;æ³¨æ„\u0026#39; \u0026#39;ä¸‰è±\u0026#39; \u0026#39;ufj\u0026#39; \u0026#39;æ³•äºº\u0026#39; \u0026#39;èè³‡\u0026#39; \u0026#39;éŠ€è¡Œ\u0026#39; \u0026#39;é›†ç´„\u0026#39; \u0026#39;ãƒ•ãƒ¬ãƒ¼ãƒ\u0026#39; \u0026#39;æ°´\u0026#39; \u0026#39;äººæ°—\u0026#39; \u0026#39;ç¶šã\u0026#39; \u0026#39;å„å›½\u0026#39; \u0026#39;å¤§\u0026#39; \u0026#39;è¦æ¨¡\u0026#39; \u0026#39;ã‚µã‚¤ãƒ\u0026#39; \u0026#39;æ”»æ’ƒ\u0026#39; \u0026#39;è¥¿æ­¦\u0026#39; \u0026#39;èŠæ± \u0026#39; \u0026#39;æ²¢æ‘\u0026#39; \u0026#39;è¶…\u0026#39; \u0026#39;é©šç•°\u0026#39; \u0026#39;è¢«\u0026#39; \u0026#39;æ‰“ç‡\u0026#39; \u0026#39;å¯ºå³¶\u0026#39; \u0026#39;ã—ã®ã¶\u0026#39; \u0026#39;é•·ç”·\u0026#39; \u0026#39;è¶…\u0026#39; \u0026#39;è‹±æ‰\u0026#39; \u0026#39;æ•™è‚²\u0026#39; \u0026#39;ã‚‚ã£ã¨\u0026#39; \u0026#39;è¦‹ã‚‹\u0026#39; \u0026#39;è¨˜äº‹\u0026#39; \u0026#39;ä¸€è¦§\u0026#39; \u0026#39;ã‚´ãƒŸ\u0026#39; \u0026#39;åé›†\u0026#39; \u0026#39;è»Š\u0026#39; \u0026#39;å­è‚²ã¦\u0026#39; \u0026#39;5\u0026#39; \u0026#39;æœˆ\u0026#39; \u0026#39;13\u0026#39; \u0026#39;æ—¥\u0026#39; \u0026#39;7\u0026#39; \u0026#39;æ™‚\u0026#39; \u0026#39;55\u0026#39; \u0026#39;åˆ†\u0026#39; \u0026#39;é…ä¿¡\u0026#39; \u0026#39;ç”£çµŒæ–°è\u0026#39; \u0026#39;ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°\u0026#39; \u0026#39;ãƒ¤ãƒ•ã‚ªã‚¯\u0026#39; \u0026#39;æ—…è¡Œ\u0026#39; \u0026#39;ãƒ›ãƒ†ãƒ«\u0026#39; \u0026#39;äºˆç´„\u0026#39; \u0026#39;ãƒ‹ãƒ¥ãƒ¼ã‚¹\u0026#39; \u0026#39;å¤©æ°—\u0026#39; \u0026#39;ã‚¹ãƒãƒ¼ãƒ„ãƒŠãƒ“\u0026#39; \u0026#39;ãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚¹\u0026#39; \u0026#39;ãƒ†ãƒ¬ãƒ“\u0026#39; \u0026#39;gyao\u0026#39; \u0026#39;y\u0026#39; \u0026#39;ãƒ¢ãƒã‚²\u0026#39; \u0026#39;åœ°åŸŸ\u0026#39; \u0026#39;åœ°å›³\u0026#39; \u0026#39;è·¯ç·š\u0026#39; \u0026#39;é£Ÿã¹ã‚‹\u0026#39; \u0026#39;ãƒ­ã‚°\u0026#39; \u0026#39;æ±‚äºº\u0026#39; \u0026#39;ã‚¢ãƒ«ãƒã‚¤ãƒˆ\u0026#39; \u0026#39;ä¸å‹•ç”£\u0026#39; \u0026#39;è‡ªå‹•è»Š\u0026#39; \u0026#39;æ²ç¤ºæ¿\u0026#39; \u0026#39;ãƒ–ãƒ­ã‚°\u0026#39; \u0026#39;ãƒ“ãƒ¥ãƒ¼ãƒ†ã‚£\u0026#39; \u0026#39;å‡ºä¼šã„\u0026#39; \u0026#39;é›»å­\u0026#39; \u0026#39;æ›¸ç±\u0026#39; \u0026#39;æ˜ ç”»\u0026#39; \u0026#39;ã‚²ãƒ¼ãƒ \u0026#39; \u0026#39;å ã„\u0026#39; \u0026#39;ã‚µãƒ¼ãƒ“ã‚¹\u0026#39; \u0026#39;ä¸€è¦§\u0026#39; \u0026#39;ãƒ­ã‚°ã‚¤ãƒ³\u0026#39; \u0026#39;id\u0026#39; \u0026#39;ã‚‚ã£ã¨\u0026#39; \u0026#39;ä¾¿åˆ©\u0026#39; \u0026#39;æ–°è¦\u0026#39; \u0026#39;å–å¾—\u0026#39; \u0026#39;ãƒ¡ãƒ¼ãƒ«\u0026#39; \u0026#39;ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹\u0026#39; \u0026#39;å–å¾—\u0026#39; \u0026#39;ã‚«ãƒ¬ãƒ³ãƒ€\u0026#39; \u0026#39;ã‚«ãƒ¬ãƒ³ãƒ€\u0026#39; \u0026#39;æ´»ç”¨\u0026#39; \u0026#39;ãƒã‚¤ãƒ³ãƒˆ\u0026#39; \u0026#39;ç¢ºèª\u0026#39; \u0026#39;ãƒ­ã‚°ã‚¤ãƒ³\u0026#39; \u0026#39;å±¥æ­´\u0026#39; \u0026#39;ç¢ºèª\u0026#39; \u0026#39;ä¼šç¤¾\u0026#39; \u0026#39;æ¦‚è¦\u0026#39; \u0026#39;æŠ•è³‡\u0026#39; \u0026#39;å®¶\u0026#39; \u0026#39;æƒ…å ±\u0026#39; \u0026#39;ç¤¾ä¼š\u0026#39; \u0026#39;çš„\u0026#39; \u0026#39;è²¬ä»»\u0026#39; \u0026#39;ä¼æ¥­\u0026#39; \u0026#39;è¡Œå‹•\u0026#39; \u0026#39;æ†²ç« \u0026#39; \u0026#39;åºƒå‘Š\u0026#39; \u0026#39;æ²è¼‰\u0026#39; \u0026#39;æ¡ç”¨\u0026#39; \u0026#39;æƒ…å ±\u0026#39; \u0026#39;åˆ©ç”¨\u0026#39; \u0026#39;è¦ç´„\u0026#39; \u0026#39;å…è²¬\u0026#39; \u0026#39;äº‹é …\u0026#39; \u0026#39;ãƒ¡ãƒ‡ã‚£ã‚¢\u0026#39; \u0026#39;ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ\u0026#39; \u0026#39;ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£\u0026#39; \u0026#39;è€ƒãˆæ–¹\u0026#39; \u0026#39;ãƒ—ãƒ©ã‚¤ãƒã‚·\u0026#39; \u0026#39;ãƒãƒªã‚·\u0026#39; \u0026#39;copyright\u0026#39; \u0026#39;c\u0026#39; \u0026#39;2017\u0026#39; \u0026#39;yahoo\u0026#39; \u0026#39;japan\u0026#39; \u0026#39;corporation\u0026#39; \u0026#39;all\u0026#39; \u0026#39;rights\u0026#39; \u0026#39;reserved\u0026#39; ã‚‚ã†å°‘ã—ã ã‘Githubã®ã»ã†ã«ã¯è©³ã—ãæ›¸ã„ã¦ã‚ã‚‹ã®ã§ãã¡ã‚‰ã‚‚å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚\n","permalink":"https://unofficialism.info/posts/azure-search-analyzer-test-with-azure-search-ta/","summary":"Azure Searchã®ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ã«ã‚ˆã‚‹ãƒ†ã‚­ã‚¹ãƒˆè§£æçµæœã‚’å‡ºåŠ›ã™ã‚‹ï¼ˆã ã‘ã®ï¼‰ãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ã¦ã¿ãŸã®ã§ã“ã“ã§ç´¹ä»‹ã—ã¾ã™ã€‚ãã®åã‚‚azure-search-taï¼ˆta=Test Analyzerï¼‰ã€‚ä¸­èº«ã¯Azure Searchã®Analyzer APIã®å‡ºåŠ›çµæœã‚’æ•´å½¢ã—ã¦è¡¨ç¤ºã•ã›ã¦ã„ã¦ã„ã‚‹ã ã‘ã®å˜ç´”ãªã‚‚ã®ã§ã‚ã‚Šã¾ã™ãŒã€Azure Searchã®å…¨æ–‡æ¤œç´¢ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‚„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«ãƒ’ãƒƒãƒˆã—ãªã„åŸå› èª¿æŸ»ã‚’ã™ã‚‹éš›ã«ã¯å½¹ã«ç«‹ã¤ã¨æ€ã£ã¦ã¾ã™ã€‚ã€Œã©ã†ã—ã¦ã“ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒã²ã£ã‹ã‹ã‚‰ãªã„ã®ï¼Ÿã€ã‚’çªãè©°ã‚ã‚‹ã«ã¯æœ€çµ‚çš„ã«ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ã®ãƒ†ã‚­ã‚¹ãƒˆè§£æçµæœã¨çªãåˆã‚ã›ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã¨ã€ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ã‚’é¸æŠã™ã‚‹éš›ã«ãƒ†ã‚­ã‚¹ãƒˆè§£æãŒè¦–è¦šåŒ–ã•ã‚Œã¦ã„ã‚‹ã¨åˆ¤æ–­ã—ã‚„ã™ã„ã ã‚ã†ã¨ã€‚ãƒ„ãƒ¼ãƒ«ã¯2ç¨®é¡ã§ ï¼ˆï¼‘ï¼‰Web UIãƒ„ãƒ¼ãƒ«ã¨ï¼ˆï¼’ï¼‰ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«\nWeb UI Tool https://github.com/yokawasa/azure-search-ta\nã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯è¶…ç°¡å˜ã€‚ï¼ˆï¼‘ï¼‰Githubã‹ã‚‰azure-search-taã‚’clone ï¼ˆï¼’ï¼‰azure-search-ta/ui é…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’PHPãŒå‹•ãWebã‚µãƒ¼ãƒã«ã‚³ãƒ”ãƒ¼ ï¼ˆï¼“ï¼‰analyze-api.phpã‚’ã‚¨ãƒ‡ã‚£ã‚¿ã§é–‹ã„ã¦ãŠä½¿ã„ã®Azure Searchã‚«ã‚¦ãƒ³ãƒˆåã¨Azure Search API Adminã‚­ãƒ¼ã®å€¤ã‚’è¨­å®šãã ã•ã„ã€‚ã‚ã¨ã¯azure-search-ta-ui.htmlã«ã‚¢ã‚¯ã‚»ã‚¹ã„ãŸã ã‘ã‚Œã°ä¸Šè¨˜ã®ã‚ˆã†ãªUIãŒå‡ºåŠ›ã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚ãªãœHTML/JSã ã‘ã§ã¯ãªãé–“ã«PHPã‚’æŒŸã‚“ã§ã„ã‚‹ã®ã‹ã«ã¤ã„ã¦ã€Azure Searchã®Analyze APIã‚„ç®¡ç†ç³»APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ä½ç½®ä»˜ã‘ã‚‰ã‚Œã¦ãŠã‚Šã€ç®¡ç†ç³»APIã¯via CORSã§ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ä»˜ã‘ã¦ã„ãªã„ã‹ã‚‰ã§ã‚ã‚‹ã€‚\n$ git clone https://github.com/yokawasa/azure-search-ta.git` $ vi azure-search-ta/ui/analyze-api.php $azureSearchAccount=\u0026#34;\u0026#34;; $azureSearchApiKey = \u0026#34;\u0026#34;; Command-Line Tool 1. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨è¨­å®š pipã§azure-search-taãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚æ—¢ã«å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹éš›ã¯â€•â€•upgradeã‚’ã¤ã‘ã¦å®Ÿè¡Œãã ã•ã„ã€‚\n$ pip install --user azure-search-ta æ¬¡ã«ã€search.confã«ãŠä½¿ã„ã®Azure Searchã‚«ã‚¦ãƒ³ãƒˆåã¨Azure Search API Adminã‚­ãƒ¼ã®å€¤ã‚’è¨­å®šãã ã•ã„ã€‚\n# Azure Search Service Name ( never put space before and after = ) SEARCH_SERVICE_NAME= # Azure Search API Admin Key ( never put space before and after = ) SEARCH_API_KEY= 2.","title":"Azure Search Text Analyzer Tools - azure-search-ta"},{"content":"Python Easter Egg = Pythonã®éš ã—ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã¨ã¯ã„ã£ã¦ã‚‚PythonåŸºç¤æœ¬ãªã©ã§ã‚ˆãç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ãªã®ã§æ—¢ã«ã”å­˜çŸ¥ã‹ã‚‚ã—ã‚Œãªã„ãŒèƒŒæ™¯ãŒé¢ç™½ã„ã®ã§ã“ã“ã§ç´¹ä»‹ã€‚\nPythonã«ã¯thisãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã„ã†ã€ŒThe Zen of Pythonã€(Note 1)ã‚’å‡ºåŠ›ã™ã‚‹ã ã‘ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚ã‚‹ã€‚ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ä¸­èº«(Note 2)ã‚’è¦‹ã¦ã¿ã‚‹ã¨åˆ†ã‹ã‚‹ãŒã€ç·ã‚¹ãƒ†ãƒƒãƒ—ã«ã—ã¦ã‚ãšã‹28è¡Œã€ROT13æš—å·åŒ–(Note 3)ã•ã‚ŒãŸæ–‡å­—åˆ—ã‚’å¾©å·åŒ–ã™ã‚‹ã ã‘ã®å˜ç´”ã§å–ã‚‹ã«è¶³ã‚‰ãªã„ã‚‚ã®ã‹ã‚‚ã—ã‚Œãªã„ãŒã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒä½œã‚‰ã‚ŒãŸèƒŒæ™¯ã¯é¢ç™½ã„ã€‚Barry Warsawæ°ãŒè¨˜äº‹ã€Œimport this and The Zen of Pythonã€ã§thisãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒèª•ç”Ÿã«ã¾ã¤ã‚ã‚‹é¢ç™½ã„è©±ã‚’ç´¹ä»‹ã—ã¦ã„ã‚‹ã€‚\nã€Œimport this and The Zen of Pythonã€ã®ä¸€éƒ¨ç°¡è¨³\n2001å¹´ç§‹ã€Foretec Seminarç¤¾ã¯ã®International Python Conference #10(ä»¥ä¸‹IPC10ã€Pyconã®å‰èº«ã¨ãªã‚‹ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹)ã®æº–å‚™ã‚’ã—ã¦ãŠã‚ŠPythonã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‹ã‚‰ãã®ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã®ã‚¹ãƒ­ãƒ¼ã‚¬ãƒ³ã‚’æ±‚ã‚ã¦ã„ãŸã€‚ã‚¹ãƒ­ãƒ¼ã‚¬ãƒ³ã¯Tã‚·ãƒ£ãƒ„ã«ã‚‚ãƒ—ãƒªãƒ³ãƒˆã•ã‚Œã‚‹äºˆå®šã ã£ãŸã€‚Guideã‚„ã€Fredã€Jeremyã‚„è‘—è€…é”ã¯ã‹ã¤ã¦ã¯Foretec Seminarç¤¾ã«æ‰€å±ã—ã¦ã„ãŸãŒPythonlabsã‚’çµæˆã™ã‚‹2000å¹´ã«åŒç¤¾ã‚’å»ã£ã¦ã„ã‚‹ã€‚ãã—ã¦Pythonlabsã¯Pythonã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‹ã‚‰ã®ã‚¹ãƒ­ãƒ¼ã‚¬ãƒ³å¿œå‹Ÿã®å¯©æŸ»ã¨å‹è€…ã®é¸å®šã‚’æ‹…å½“ã™ã‚‹ã“ã¨ã«ãªã£ãŸã€‚å¿œå‹Ÿã¯500ãã‚‰ã„ã‚ã£ãŸãŒã€ã©ã‚Œã‚‚ã²ã©ã„ã‚‚ã®ã ã£ãŸã€‚Timã¨è‘—è€…ã¯1ã¤ã«çµã‚‰ã‚Œã‚‹ã¾ã§ä½•åº¦ã¨ãªãé¸åˆ¥ä½œæ¥­ã‚’è¡Œã„\næœ€çµ‚çš„ã«\u0026quot;import this\u0026quot;ã‚’é¸ã‚“ã ã€‚ç†ç”±ã¯\u0026quot;import this\u0026quot;ã¨ã„ã†è¨€è‘‰ã®æŒã¤ãµã–ã‘ãŸã€å°ãƒã‚«ã«ã—ãŸã‚ˆã†ãªãƒˆãƒ¼ãƒ³ãŒå¥½ãã ã£ãŸã‹ã‚‰ã¨ã„ã†ã€‚\nè‘—è€…ãŸã¡ã¯ã“ã®\u0026quot;import this\u0026quot;ã‚’ã‚¹ãƒ­ãƒ¼ã‚¬ãƒ³ã«é¸ã‚“ã§ã™ãã«thisãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«(this.py)ã‚’å®Ÿè£…ã—ãŸã€‚ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€ŒThe Zen of Pythonã€ã‚’å‡ºåŠ›ã™ã‚‹ã ã‘ã®ã‚‚ã®ã ã£ãŸãŒé€”ä¸­Timã‚„Guidoã®ææ¡ˆã§rot13ã§æš—å·åŒ–ã—ã¦å†…å®¹ã‚’å°‘ã—é›£èª­åŒ–ã™ã‚‹å·¥å¤«ãŒã•ã‚ŒãŸã‚Šã‚‚ã—ãŸã€‚IPC10ãŒçµ‚ã‚ã£ã¦ã™ãã€å½¼ã‚‰ã¯ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨˜å¿µã—ã¦thisãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’Python2.2.1ãƒ–ãƒ©ãƒ³ãƒã«ã‚³ãƒŸãƒƒãƒˆã—ãŸã€‚ã“ã®æ™‚ã€è‘—è€…ã®ææ¡ˆã§ä»–ã®èª°ã«ã‚‚çŸ¥ã‚‰ã‚Œãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã‚½ãƒ¼ã‚¹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³é€šçŸ¥æ©Ÿèƒ½ã‚’åœæ­¢ã—ã€ã“ã£ãã‚Šã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’Python2.2.1ã®ãƒ–ãƒ©ãƒ³ãƒã«å«ã‚ãŸã®ã ã€‚ã“ã‚Œã‚‰ã®ã“ã¨ã¯å½¼ã‚‰ä»¥å¤–ã«èª°ã«ã‚‚çŸ¥ã‚‰ã›ãšå†…ç·’ã§è¡Œã‚ã‚ŒãŸã€‚è‘—è€…ã„ã‚ãã€ã“ã®å½¼ã‚‰ã®ä»•è¾¼ã‚“ã easter eggï¼ˆthisãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã“ã¨ã€‚ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã§ã„ã†easter eggã¨ã¯éš ã—ã‚³ãƒãƒ³ãƒ‰ã¨ã‹ã€éš ã—ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã®ã‚ˆã†ãªã‚‚ã®ï¼‰ãŒèª°ã‹ã«è¦‹ã¤ã‹ã‚‹ã¾ã§ã¯ã—ã°ã‚‰ãæ™‚é–“ãŒã‹ã‹ã£ãŸãã†ã ã€‚\nBarry Warsawæ°ãŒåŒè¨˜äº‹ã‚’ã€ŒThat was all back in the day when the Python community had a sense of humorã€ã¨ã„ã†ä¸€æ–‡ã§ç· ã‚ããã£ã¦ã„ã‚‹ã‚ˆã†ã«ã€ã“ã®è¨˜äº‹ã‚’èª­ã‚€ã¨å½“æ™‚ã®Pythonã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãŒã„ã‹ã«ãƒ¦ãƒ¼ãƒ¢ã‚¢æº¢ã‚ŒãŸã‚‚ã®ã ã£ãŸã®ã‹ãŒæ„Ÿã˜ã‚‰ã‚Œã‚‹ã€‚phython-2.2.1ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸã®ã¯2002å¹´4æœˆ10æ—¥ã§ã€ãã‚Œã‹ã‚‰ã©ã‚Œãã‚‰ã„çµŒã£ã¦ã“ã®thisãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒç™ºè¦‹ã•ã‚ŒãŸã®ã‹åˆ†ã‹ã‚‰ãªã„ãŒåˆã‚ã¦ç™ºè¦‹ã—ãŸäººã¯çµ¶å¯¾ã»ã£ã“ã‚Šã—ãŸã“ã¨ã ã‚ã†ã€‚\nNote 1: import this ã€ŒThe Zen of Pythonã€ã¯Pythonãƒãƒƒã‚«ãƒ¼ã€Tim Petersã«ã‚ˆã£ã¦æ›¸ã‹ã‚ŒãŸæœ‰åãªæ–‡ç« ã§Pythonè¨­è¨ˆå“²å­¦ã‚’è¦ç´„ã—ãŸã‚ˆã†ãªã‚‚ã®ã¨è¨€ã‚ã‚Œã¦ã„ã‚‹ã€‚ Barry Warsawæ°ã®è¨˜äº‹ã«ã‚ˆã‚‹ã¨èµ·æºã¯Tim Petersæ°ã«ã‚ˆã‚‹1999å¹´6æœˆ4æ—¥ã®Python-listã¸ã®ã“ã®æŠ•ç¨¿ã®ã‚ˆã†ã ã€‚ä»¥ä¸‹ã€Pythonã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ã‚¯ãƒ¢ãƒ¼ãƒ‰ã§import thisã‚’å®Ÿè¡Œã—ã€ŒThe Zen of Pythonã€ã‚’è¡¨ç¤ºã•ã›ãŸå†…å®¹ï¼š\n$ python Python 3.4.3 (default, Oct 14 2015, 20:28:29) [GCC 4.8.4] on linux Type \u0026#34;help\u0026#34;, \u0026#34;copyright\u0026#34;, \u0026#34;credits\u0026#34; or \u0026#34;license\u0026#34; for more information. \u0026gt;\u0026gt;\u0026gt; import this The Zen of Python, by Tim Peters Beautiful is better than ugly. Explicit is better than implicit. Simple is better than complex. Complex is better than complicated. Flat is better than nested. Sparse is better than dense. Readability counts. Special cases aren\u0026#39;t special enough to break the rules. Although practicality beats purity. Errors should never pass silently. Unless explicitly silenced. In the face of ambiguity, refuse the temptation to guess. There should be one-- and preferably only one --obvious way to do it. Although that way may not be obvious at first unless you\u0026#39;re Dutch. Now is better than never. Although never is often better than *right* now. If the implementation is hard to explain, it\u0026#39;s a bad idea. If the implementation is easy to explain, it may be a good idea. Namespaces are one honking great idea -- let\u0026#39;s do more of those! \u0026gt;\u0026gt;\u0026gt; Note 2: this.py this.pyã®ä¸­èº«ã€‚ æ„å‘³ä¸æ˜ãªã‚³ãƒ¼ãƒ‰ã‚’ROT13 (Note 3)ã§è¤‡åˆåŒ–ã™ã‚‹ã“ã¨ã§ã€ŒThe Zen of Pythonã€ã‚’å‡ºåŠ›ã—ã¦ã„ã‚‹ã€‚ /usr/lib/python3.4/this.py\ns = \u0026#34;\u0026#34;\u0026#34;Gur Mra bs Clguba, ol Gvz Crgref Ornhgvshy vf orggre guna htyl. Rkcyvpvg vf orggre guna vzcyvpvg. Fvzcyr vf orggre guna pbzcyrk. Pbzcyrk vf orggre guna pbzcyvpngrq. Syng vf orggre guna arfgrq. Fcnefr vf orggre guna qrafr. Ernqnovyvgl pbhagf. Fcrpvny pnfrf nera\u0026#39;g fcrpvny rabhtu gb oernx gur ehyrf. Nygubhtu cenpgvpnyvgl orngf chevgl. Reebef fubhyq arire cnff fvyragyl. Hayrff rkcyvpvgyl fvyraprq. Va gur snpr bs nzovthvgl, ershfr gur grzcgngvba gb thrff. Gurer fubhyq or bar-- naq cersrenoyl bayl bar --boivbhf jnl gb qb vg. Nygubhtu gung jnl znl abg or boivbhf ng svefg hayrff lbh\u0026#39;er Qhgpu. Abj vf orggre guna arire. Nygubhtu arire vf bsgra orggre guna *evtug* abj. Vs gur vzcyrzragngvba vf uneq gb rkcynva, vg\u0026#39;f n onq vqrn. Vs gur vzcyrzragngvba vf rnfl gb rkcynva, vg znl or n tbbq vqrn. Anzrfcnprf ner bar ubaxvat terng vqrn -- yrg\u0026#39;f qb zber bs gubfr!\u0026#34;\u0026#34;\u0026#34; d = {} for c in (65, 97): for i in range(26): d[chr(i+c)] = chr((i+13) % 26 + c) print \u0026#34;\u0026#34;.join([d.get(c, c) for c in s]) Note 3: ROT13 ROT13ã¯å®šã‚ã‚‰ã‚ŒãŸç½®ãæ›ãˆãƒãƒƒãƒ—ã«ã‚‚ã¨ã¥ã„ã¦æ–‡å­—ã‚’ç½®ãæ›ãˆã‚‹ã ã‘ã®å˜ç´”ãªæš—å·æ–¹å¼ã€‚æ¬¡ã®å¤‰æ›ãƒãƒƒãƒ—ã«åŸºã¥ã„ã¦æ–‡å­—ã‚’å¤‰æ›ã™ã‚‹ã®ã§ä¾‹ãˆã°Aâ†’Nã€Bâ†’Oã€Câ†’Pã®ã‚ˆã†ã«å¤‰æ›ã•ã‚Œã‚‹ã€‚\nABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz â†‘â†“ NOPQRSTUVWXYZABCDEFGHIJKLMnopqrstuvwxyzabcdefghijklm ã¡ãªã¿ã«this.pyã§ã¯ã“ã®å¤‰æ›ãƒãƒƒãƒ—ã‚’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä¸­ã§ç”Ÿæˆã—ã¦ã„ã‚‹ãŒPython2ç³»ã€3ç³»ã§ã¯ROT13ã®å®Ÿè£…ã¯æ¨™æº–ã§çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã®ã§æ¬¡ã®ã‚ˆã†ã«ç›´æ¥decodeé–¢æ•°ã«\u0026rsquo;rot13\u0026rsquo;ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ROT13ã§æš—å·åŒ–ã•ã‚ŒãŸæ–‡å­—åˆ—sã‚’è¤‡åˆåŒ–ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n\u0026gt;\u0026gt;\u0026gt; this.s \u0026#34;Gur Mra bs Clguba, ol Gvz Crgref\\n\\nOrnhgvshy vf orggre guna htyl.\\nRkcyvpvg vf orggre guna vzcyvpvg.\\nFvzcyr vf orggre guna pbzcyrk.\\nPbzcyrk vf orggre guna pbzcyvpngrq.\\nSyng vf orggre guna arfgrq.\\nFcnefr vf orggre guna qrafr.\\nErnqnovyvgl pbhagf.\\nFcrpvny pnfrf nera\u0026#39;g fcrpvny rabhtu gb oernx gur ehyrf.\\nNygubhtu cenpgvpnyvgl orngf chevgl.\\nReebef fubhyq arire cnff fvyragyl.\\nHayrff rkcyvpvgyl fvyraprq.\\nVa gur snpr bs nzovthvgl, ershfr gur grzcgngvba gb thrff.\\nGurer fubhyq or bar-- naq cersrenoyl bayl bar --boivbhf jnl gb qb vg.\\nNygubhtu gung jnl znl abg or boivbhf ng svefg hayrff lbh\u0026#39;er Qhgpu.\\nAbj vf orggre guna arire.\\nNygubhtu arire vf bsgra orggre guna *evtug* abj.\\nVs gur vzcyrzragngvba vf uneq gb rkcynva, vg\u0026#39;f n onq vqrn.\\nVs gur vzcyrzragngvba vf rnfl gb rkcynva, vg znl or n tbbq vqrn.\\nAnzrfcnprf ner bar ubaxvat terng vqrn -- yrg\u0026#39;f qb zber bs gubfr!\u0026#34; \u0026gt;\u0026gt;\u0026gt; this.s.decode(\u0026#39;rot13\u0026#39;) u\u0026#34;The Zen of Python, by Tim Peters\\n\\nBeautiful is better than ugly.\\nExplicit is better than implicit.\\nSimple is better than complex.\\nComplex is better than complicated.\\nFlat is better than nested.\\nSparse is better than dense.\\nReadability counts.\\nSpecial cases aren\u0026#39;t special enough to break the rules.\\nAlthough practicality beats purity.\\nErrors should never pass silently.\\nUnless explicitly silenced.\\nIn the face of ambiguity, refuse the temptation to guess.\\nThere should be one-- and preferably only one --obvious way to do it.\\nAlthough that way may not be obvious at first unless you\u0026#39;re Dutch.\\nNow is better than never.\\nAlthough never is often better than *right* now.\\nIf the implementation is hard to explain, it\u0026#39;s a bad idea.\\nIf the implementation is easy to explain, it may be a good idea.\\nNamespaces are one honking great idea -- let\u0026#39;s do more of those!\u0026#34; ãŠã‚ã‚Š\n","permalink":"https://unofficialism.info/posts/python-easter-egg/","summary":"Python Easter Egg = Pythonã®éš ã—ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã¨ã¯ã„ã£ã¦ã‚‚PythonåŸºç¤æœ¬ãªã©ã§ã‚ˆãç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ãªã®ã§æ—¢ã«ã”å­˜çŸ¥ã‹ã‚‚ã—ã‚Œãªã„ãŒèƒŒæ™¯ãŒé¢ç™½ã„ã®ã§ã“ã“ã§ç´¹ä»‹ã€‚\nPythonã«ã¯thisãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã„ã†ã€ŒThe Zen of Pythonã€(Note 1)ã‚’å‡ºåŠ›ã™ã‚‹ã ã‘ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚ã‚‹ã€‚ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ä¸­èº«(Note 2)ã‚’è¦‹ã¦ã¿ã‚‹ã¨åˆ†ã‹ã‚‹ãŒã€ç·ã‚¹ãƒ†ãƒƒãƒ—ã«ã—ã¦ã‚ãšã‹28è¡Œã€ROT13æš—å·åŒ–(Note 3)ã•ã‚ŒãŸæ–‡å­—åˆ—ã‚’å¾©å·åŒ–ã™ã‚‹ã ã‘ã®å˜ç´”ã§å–ã‚‹ã«è¶³ã‚‰ãªã„ã‚‚ã®ã‹ã‚‚ã—ã‚Œãªã„ãŒã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒä½œã‚‰ã‚ŒãŸèƒŒæ™¯ã¯é¢ç™½ã„ã€‚Barry Warsawæ°ãŒè¨˜äº‹ã€Œimport this and The Zen of Pythonã€ã§thisãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒèª•ç”Ÿã«ã¾ã¤ã‚ã‚‹é¢ç™½ã„è©±ã‚’ç´¹ä»‹ã—ã¦ã„ã‚‹ã€‚\nã€Œimport this and The Zen of Pythonã€ã®ä¸€éƒ¨ç°¡è¨³\n2001å¹´ç§‹ã€Foretec Seminarç¤¾ã¯ã®International Python Conference #10(ä»¥ä¸‹IPC10ã€Pyconã®å‰èº«ã¨ãªã‚‹ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹)ã®æº–å‚™ã‚’ã—ã¦ãŠã‚ŠPythonã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‹ã‚‰ãã®ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã®ã‚¹ãƒ­ãƒ¼ã‚¬ãƒ³ã‚’æ±‚ã‚ã¦ã„ãŸã€‚ã‚¹ãƒ­ãƒ¼ã‚¬ãƒ³ã¯Tã‚·ãƒ£ãƒ„ã«ã‚‚ãƒ—ãƒªãƒ³ãƒˆã•ã‚Œã‚‹äºˆå®šã ã£ãŸã€‚Guideã‚„ã€Fredã€Jeremyã‚„è‘—è€…é”ã¯ã‹ã¤ã¦ã¯Foretec Seminarç¤¾ã«æ‰€å±ã—ã¦ã„ãŸãŒPythonlabsã‚’çµæˆã™ã‚‹2000å¹´ã«åŒç¤¾ã‚’å»ã£ã¦ã„ã‚‹ã€‚ãã—ã¦Pythonlabsã¯Pythonã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‹ã‚‰ã®ã‚¹ãƒ­ãƒ¼ã‚¬ãƒ³å¿œå‹Ÿã®å¯©æŸ»ã¨å‹è€…ã®é¸å®šã‚’æ‹…å½“ã™ã‚‹ã“ã¨ã«ãªã£ãŸã€‚å¿œå‹Ÿã¯500ãã‚‰ã„ã‚ã£ãŸãŒã€ã©ã‚Œã‚‚ã²ã©ã„ã‚‚ã®ã ã£ãŸã€‚Timã¨è‘—è€…ã¯1ã¤ã«çµã‚‰ã‚Œã‚‹ã¾ã§ä½•åº¦ã¨ãªãé¸åˆ¥ä½œæ¥­ã‚’è¡Œã„\næœ€çµ‚çš„ã«\u0026quot;import this\u0026quot;ã‚’é¸ã‚“ã ã€‚ç†ç”±ã¯\u0026quot;import this\u0026quot;ã¨ã„ã†è¨€è‘‰ã®æŒã¤ãµã–ã‘ãŸã€å°ãƒã‚«ã«ã—ãŸã‚ˆã†ãªãƒˆãƒ¼ãƒ³ãŒå¥½ãã ã£ãŸã‹ã‚‰ã¨ã„ã†ã€‚\nè‘—è€…ãŸã¡ã¯ã“ã®\u0026quot;import this\u0026quot;ã‚’ã‚¹ãƒ­ãƒ¼ã‚¬ãƒ³ã«é¸ã‚“ã§ã™ãã«thisãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«(this.py)ã‚’å®Ÿè£…ã—ãŸã€‚ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€ŒThe Zen of Pythonã€ã‚’å‡ºåŠ›ã™ã‚‹ã ã‘ã®ã‚‚ã®ã ã£ãŸãŒé€”ä¸­Timã‚„Guidoã®ææ¡ˆã§rot13ã§æš—å·åŒ–ã—ã¦å†…å®¹ã‚’å°‘ã—é›£èª­åŒ–ã™ã‚‹å·¥å¤«ãŒã•ã‚ŒãŸã‚Šã‚‚ã—ãŸã€‚IPC10ãŒçµ‚ã‚ã£ã¦ã™ãã€å½¼ã‚‰ã¯ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨˜å¿µã—ã¦thisãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’Python2.2.1ãƒ–ãƒ©ãƒ³ãƒã«ã‚³ãƒŸãƒƒãƒˆã—ãŸã€‚ã“ã®æ™‚ã€è‘—è€…ã®ææ¡ˆã§ä»–ã®èª°ã«ã‚‚çŸ¥ã‚‰ã‚Œãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã‚½ãƒ¼ã‚¹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³é€šçŸ¥æ©Ÿèƒ½ã‚’åœæ­¢ã—ã€ã“ã£ãã‚Šã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’Python2.2.1ã®ãƒ–ãƒ©ãƒ³ãƒã«å«ã‚ãŸã®ã ã€‚ã“ã‚Œã‚‰ã®ã“ã¨ã¯å½¼ã‚‰ä»¥å¤–ã«èª°ã«ã‚‚çŸ¥ã‚‰ã›ãšå†…ç·’ã§è¡Œã‚ã‚ŒãŸã€‚è‘—è€…ã„ã‚ãã€ã“ã®å½¼ã‚‰ã®ä»•è¾¼ã‚“ã easter eggï¼ˆthisãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã“ã¨ã€‚ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã§ã„ã†easter eggã¨ã¯éš ã—ã‚³ãƒãƒ³ãƒ‰ã¨ã‹ã€éš ã—ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã®ã‚ˆã†ãªã‚‚ã®ï¼‰ãŒèª°ã‹ã«è¦‹ã¤ã‹ã‚‹ã¾ã§ã¯ã—ã°ã‚‰ãæ™‚é–“ãŒã‹ã‹ã£ãŸãã†ã ã€‚\nBarry Warsawæ°ãŒåŒè¨˜äº‹ã‚’ã€ŒThat was all back in the day when the Python community had a sense of humorã€ã¨ã„ã†ä¸€æ–‡ã§ç· ã‚ããã£ã¦ã„ã‚‹ã‚ˆã†ã«ã€ã“ã®è¨˜äº‹ã‚’èª­ã‚€ã¨å½“æ™‚ã®Pythonã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãŒã„ã‹ã«ãƒ¦ãƒ¼ãƒ¢ã‚¢æº¢ã‚ŒãŸã‚‚ã®ã ã£ãŸã®ã‹ãŒæ„Ÿã˜ã‚‰ã‚Œã‚‹ã€‚phython-2.2.1ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸã®ã¯2002å¹´4æœˆ10æ—¥ã§ã€ãã‚Œã‹ã‚‰ã©ã‚Œãã‚‰ã„çµŒã£ã¦ã“ã®thisãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒç™ºè¦‹ã•ã‚ŒãŸã®ã‹åˆ†ã‹ã‚‰ãªã„ãŒåˆã‚ã¦ç™ºè¦‹ã—ãŸäººã¯çµ¶å¯¾ã»ã£ã“ã‚Šã—ãŸã“ã¨ã ã‚ã†ã€‚\nNote 1: import this ã€ŒThe Zen of Pythonã€ã¯Pythonãƒãƒƒã‚«ãƒ¼ã€Tim Petersã«ã‚ˆã£ã¦æ›¸ã‹ã‚ŒãŸæœ‰åãªæ–‡ç« ã§Pythonè¨­è¨ˆå“²å­¦ã‚’è¦ç´„ã—ãŸã‚ˆã†ãªã‚‚ã®ã¨è¨€ã‚ã‚Œã¦ã„ã‚‹ã€‚ Barry Warsawæ°ã®è¨˜äº‹ã«ã‚ˆã‚‹ã¨èµ·æºã¯Tim Petersæ°ã«ã‚ˆã‚‹1999å¹´6æœˆ4æ—¥ã®Python-listã¸ã®ã“ã®æŠ•ç¨¿ã®ã‚ˆã†ã ã€‚ä»¥ä¸‹ã€Pythonã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ã‚¯ãƒ¢ãƒ¼ãƒ‰ã§import thisã‚’å®Ÿè¡Œã—ã€ŒThe Zen of Pythonã€ã‚’è¡¨ç¤ºã•ã›ãŸå†…å®¹ï¼š","title":"Python Easter Egg"},{"content":"UPDATED 2017-02-15: changed docker run command example due to Issue#4\nä»¥å‰ã€Œazuresshconfigã®ç´¹ä»‹ â€“ Azureä¸Šã§ã®SSHç”Ÿæ´»ã‚’å°‘ã—ã ã‘å¿«é©ã«ã™ã‚‹ã€ã®æŠ•ç¨¿ã§azuresshconfigã®ç´¹ä»‹ã‚’ã•ã›ã¦ã„ãŸã ã„ãŸãŒã€ãƒ„ãƒ¼ãƒ«ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¦ä»¥æ¥ã€æ•°å°‘ãªã„è²´é‡ãªåˆ©ç”¨è€…æ§˜ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒã‚³ã‚±ã‚‹ã‚“ã ã‘ã©ä½•ã¨ã‹ã—ã‚ã¨ã„ã†ã‚¯ãƒ¬ãƒ¼ãƒ ã‚’ã„ãŸã ã„ã¦ã„ãŸã€‚ãã“ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚’å……å®Ÿã•ã›ã‚ˆã†ã‹ã¨ã‹ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã‚’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥ã«å……å®Ÿã•ã›ã‚ˆã†ã‹ã¨ã‹è€ƒãˆãŸã‚‚ã®ã®ã€ã“ã“ã¯æµè¡Œã‚Šã®ã‚³ãƒ³ãƒ†ãƒŠå®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã—ãŸã»ã†ãŒã„ã„ã ã‚ã†ã¨ã„ã†ã“ã¨ã§Dockerå¯¾å¿œã™ã‚‹ã“ã¨ã«ã—ãŸã€‚\nä»Šå›ã®å¯¾å¿œã«ã‚ˆã‚Špipã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚„ã€ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥ã«prerequisiteãªãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã€ãƒ˜ãƒƒãƒ€ãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã„ã£ãŸé¢å€’ãªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒä¸è¦ã¨ãªã‚Šã€Macã€Windowsã€Linux(Ubuntuã€CentOSã€ãã®ä»–distro)é–¢ä¿‚ãªãã‚·ãƒ³ãƒ—ãƒ«ã«docker runã‚³ãƒãƒ³ãƒ‰ã§ã®å®Ÿè¡ŒãŒå¯èƒ½ã¨ãªã£ãŸã€‚\nã—ã‹ã‚‚è¶…è»½é‡Linuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚ã‚‹Alpine Linuxã®ä¸Šã«Pythonãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¨ãƒ„ãƒ¼ãƒ«ã‚’è¼‰ã›ã¦ã„ã‚‹ã ã‘ã§ã‚ã‚‹ãŸã‚ã‚µã‚¤ã‚ºã¯ãŸã£ãŸã®155MBã¨ã‹ãªã‚Šè»½ã‚\n$ docker images azuresshconfig REPOSITORY TAG IMAGE ID CREATED SIZE azuresshconfig latest 7488bef4343f 7 minutes ago 155 MB å®Ÿè¡Œä¾‹ $ docker run -v $HOME:/root --rm -it yoichikawasaki/azuresshconfig \\ --output stdout --user yoichika --identityfile ~/.ssh/id_rsa \u0026gt; $HOME/.ssh/config Dockerfileã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãƒ“ãƒ«ãƒ‰ãƒ»å®Ÿè¡Œã¯ã“ã¡ã‚‰\n$ curl https://raw.githubusercontent.com/yokawasa/azure-ssh-config/master/Dockerfile -o Dockerfile $ docker build -t azuresshconfig . $ docker run -v $HOME:/root --rm -it yoichikawasaki/azuresshconfig \\ --output stdout --user yoichika --identityfile ~/.ssh/id_rsa \u0026gt; $HOME/.ssh/config LINKS yoichikawasaki/azuresshconfig ï¼  Docker Hub https://github.com/yokawasa/azure-ssh-config Enjoy SSH life on Azure with dockerized azuresshconfig!\n","permalink":"https://unofficialism.info/posts/azuresshconfig-has-been-dockerized/","summary":"UPDATED 2017-02-15: changed docker run command example due to Issue#4\nä»¥å‰ã€Œazuresshconfigã®ç´¹ä»‹ â€“ Azureä¸Šã§ã®SSHç”Ÿæ´»ã‚’å°‘ã—ã ã‘å¿«é©ã«ã™ã‚‹ã€ã®æŠ•ç¨¿ã§azuresshconfigã®ç´¹ä»‹ã‚’ã•ã›ã¦ã„ãŸã ã„ãŸãŒã€ãƒ„ãƒ¼ãƒ«ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¦ä»¥æ¥ã€æ•°å°‘ãªã„è²´é‡ãªåˆ©ç”¨è€…æ§˜ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒã‚³ã‚±ã‚‹ã‚“ã ã‘ã©ä½•ã¨ã‹ã—ã‚ã¨ã„ã†ã‚¯ãƒ¬ãƒ¼ãƒ ã‚’ã„ãŸã ã„ã¦ã„ãŸã€‚ãã“ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚’å……å®Ÿã•ã›ã‚ˆã†ã‹ã¨ã‹ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã‚’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥ã«å……å®Ÿã•ã›ã‚ˆã†ã‹ã¨ã‹è€ƒãˆãŸã‚‚ã®ã®ã€ã“ã“ã¯æµè¡Œã‚Šã®ã‚³ãƒ³ãƒ†ãƒŠå®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã—ãŸã»ã†ãŒã„ã„ã ã‚ã†ã¨ã„ã†ã“ã¨ã§Dockerå¯¾å¿œã™ã‚‹ã“ã¨ã«ã—ãŸã€‚\nä»Šå›ã®å¯¾å¿œã«ã‚ˆã‚Špipã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚„ã€ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥ã«prerequisiteãªãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã€ãƒ˜ãƒƒãƒ€ãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã„ã£ãŸé¢å€’ãªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒä¸è¦ã¨ãªã‚Šã€Macã€Windowsã€Linux(Ubuntuã€CentOSã€ãã®ä»–distro)é–¢ä¿‚ãªãã‚·ãƒ³ãƒ—ãƒ«ã«docker runã‚³ãƒãƒ³ãƒ‰ã§ã®å®Ÿè¡ŒãŒå¯èƒ½ã¨ãªã£ãŸã€‚\nã—ã‹ã‚‚è¶…è»½é‡Linuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚ã‚‹Alpine Linuxã®ä¸Šã«Pythonãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¨ãƒ„ãƒ¼ãƒ«ã‚’è¼‰ã›ã¦ã„ã‚‹ã ã‘ã§ã‚ã‚‹ãŸã‚ã‚µã‚¤ã‚ºã¯ãŸã£ãŸã®155MBã¨ã‹ãªã‚Šè»½ã‚\n$ docker images azuresshconfig REPOSITORY TAG IMAGE ID CREATED SIZE azuresshconfig latest 7488bef4343f 7 minutes ago 155 MB å®Ÿè¡Œä¾‹ $ docker run -v $HOME:/root --rm -it yoichikawasaki/azuresshconfig \\ --output stdout --user yoichika --identityfile ~/.ssh/id_rsa \u0026gt; $HOME/.ssh/config Dockerfileã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãƒ“ãƒ«ãƒ‰ãƒ»å®Ÿè¡Œã¯ã“ã¡ã‚‰\n$ curl https://raw.githubusercontent.com/yokawasa/azure-ssh-config/master/Dockerfile -o Dockerfile $ docker build -t azuresshconfig . $ docker run -v $HOME:/root --rm -it yoichikawasaki/azuresshconfig \\ --output stdout --user yoichika --identityfile ~/.","title":"azuresshconfig has been dockerized"},{"content":"Logstash is an open source, server-side data processing pipeline that ingests data from a multitude of sources simultaneously, transforms it, and then sends it to your favorite destinations. Here is a list of logstash plugins for Microsoft Azure Services.\nPlugin Name Target Azure Services Note logstash-input-azureeventhub EventHub Logstash input plugin reads data from specified Azure Event Hubs logstash-input-azureblob Blob Storage Logstash input plugin that reads and parses data from Azure Storage Blobs logstash-input-azuretopic Service Bus Topic Logstash input plugin reads messages from Azure Service Bus Topics logstash-input-azuretopicthreadable Service Bus Topic Logstash input plugin reads messages from Azure Service Bus Topics using multiple threads logstash-output-applicationinsights Application Insights Logstash output plugin that store events to Application Insights logstash-input-azurewadtable Table Storage Logstash input plugin for Azure Diagnostics. Specifically pulling diagnostics data from Windows Azure Diagnostics tables logstash-input-azurewadeventhub EventHub Logstash input plugin reads Azure diagnostics data from specified Azure Event Hubs and parses the data for output logstash-input-azurewadtable Table Storage Logstash input plugin reads Azure diagnostics data from specified Azure Storage Table and parses the data for output logstash-output-documentdb Cosmos DB logstash output plugin that stores events to Azure Cosmos DB logstash-output-azuresearch Azure Search logstash output plugin that stores events to Azure Search logstash-output-azure_loganalytics Log Analytics logstash output plugin that stores events to Azure Log Analytics logstash-input-jdbc SQL Database, Azure Database for MySQL/PostgreSQL Input plugin to ingest data in any database with a JDBC interface into Logstash that support most of major RDBMS such as MySQLã€PostgreSQLã€OracleDBã€Microsoft SQL, etc (as of Dec 29, 2016)\n","permalink":"https://unofficialism.info/posts/logstash-plugins-for-azure-services/","summary":"Logstash is an open source, server-side data processing pipeline that ingests data from a multitude of sources simultaneously, transforms it, and then sends it to your favorite destinations. Here is a list of logstash plugins for Microsoft Azure Services.\nPlugin Name Target Azure Services Note logstash-input-azureeventhub EventHub Logstash input plugin reads data from specified Azure Event Hubs logstash-input-azureblob Blob Storage Logstash input plugin that reads and parses data from Azure Storage Blobs logstash-input-azuretopic Service Bus Topic Logstash input plugin reads messages from Azure Service Bus Topics logstash-input-azuretopicthreadable Service Bus Topic Logstash input plugin reads messages from Azure Service Bus Topics using multiple threads logstash-output-applicationinsights Application Insights Logstash output plugin that store events to Application Insights logstash-input-azurewadtable Table Storage Logstash input plugin for Azure Diagnostics.","title":"Logstash plugins for Microsoft Azure Services"},{"content":"éå»ã«æœ¬ãƒ–ãƒ­ã‚°ã§ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’åˆ‡ã‚Šå£ã¨ã—ãŸéŸ³å£°èªè­˜ã‚„OCRæŠ€è¡“ã‚’åˆ©ç”¨ã—ãŸãƒ‡ãƒ¢ã‚’ç´¹ä»‹ã—ãŸãŒã€ã“ã“ã§ã¯ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä¸­ã®äººç‰©å‡ºç¾ç®‡æ‰€ã«é€£å‹•ã—ã¦äººç‰©åã‚’å­—å¹•ã§è¡¨ç¤ºã•ã›ã‚‹ãƒ‡ãƒ¢ã¨ãã®å®Ÿè£…æ–¹æ³•ã‚’ç´¹ä»‹ã—ãŸã„ã€‚äººç‰©è­˜åˆ¥ã«ã¯Azureã®Cognitive Servicesã®Face APIã‚’ä½¿ã£ã¦ã„ã¦ã€ã“ã‚Œã§å‹•ç”»ã®ä¸­ã«å‡ºç¾ã™ã‚‹é¡”ã®æ¤œå‡ºã‚’è¡Œã„ã€äºˆã‚ç™»éŒ²ã—ã¦ã„ã‚‹äººç‰©ãƒªã‚¹ãƒˆã¨ã®ãƒãƒƒãƒãƒ³ã‚°ã«ã‚ˆã‚Šå®Ÿç¾ã—ã¦ã„ã‚‹ã€‚ Cognitive Serivcesã¨ã¯è¦–è¦šã€éŸ³å£°ã€è¨€èªã€çŸ¥è­˜ãªã©ãƒã‚¤ã‚¯ãƒ­ã‚½ãƒ•ãƒˆãŒã“ã‚Œã¾ã§ç ”ç©¶ã‚’é€šã˜ã¦é–‹ç™ºã—ã¦ããŸã•ã¾ã–ã¾ãªè¦ç´ æŠ€è¡“ã‚’APIã¨ã—ã¦æä¾›ã—ã¦ã„ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã®ã“ã¨ã§ã€æœ€è¿‘å··ã§äººå·¥çŸ¥èƒ½ï¼ˆAIï¼‰ã ã¨ã‹ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ã‚¹ã¨ã‹ã„ã†ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚ˆãè€³ã«ã™ã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ€ã†ãŒAzureåˆ©ç”¨ã‚·ãƒŠãƒªã‚ªã§ãã†ã„ã£ãŸã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ã‚¹ï¼ˆçŸ¥èƒ½/çŸ¥æ€§ï¼‰ã‚’å…¼ã­å‚™ãˆãŸã‚¢ãƒ—ãƒªã‚’ä½œã‚‹å ´åˆã¯é–“é•ã„ãªãä¸­æ ¸ã¨ãªã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã®1ã¤ã§ã‚ã‚‹ã€‚Face APIã¯ãã®ä¸­ã§ã‚‚é¡”ã®æ¤œå‡ºãƒ»è­˜åˆ¥ã‚„ã€é¡”ã«ã¾ã¤ã‚ã‚‹æ„Ÿæƒ…ã€ç‰¹å¾´ãªã©ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æŠ½å‡ºã«ç‰¹åŒ–ã—ãŸAPIã§ã‚ã‚‹ã€‚\ndemo site source code ä¸»è¦ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã¨æ©Ÿèƒ½ ä¸‹å›³ã¯ä»Šå›ã®ãƒ‡ãƒ¢ä½œæˆã®ãŸã‚ã«è¡Œã£ã¦ã„ã‚‹å‡¦ç†ãƒ•ãƒ­ãƒ¼ã¨ä¸»è¦ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã‚’è¡¨ã—ã¦ã„ã‚‹ã€‚ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã¯å¤§ããåˆ†ã‘ã¦3ã¤: (1) å‹•ç”»ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’Azure Media Encoder Standardã‚’ä½¿ã£ã¦ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã®é™æ­¢ç”»åƒã®ä½œæˆ, (2) Cognitive Servicesã®Face APIã‚’ä½¿ã£ã¦1ã‚ˆã‚Šå¾—ã‚‰ã‚ŒãŸé™æ­¢ç”»åƒã‹ã‚‰é¡”ã®æ¤œå‡ºã‚’è¡Œã„äºˆã‚ç™»éŒ²ã—ã¦ã„ã‚‹äººç‰©ãƒªã‚¹ãƒˆã¨ãƒãƒƒãƒãƒ³ã‚°ï¼ˆæœ€ã‚‚é¡ä¼¼åº¦ãŒé«˜ã„ã‚‚ã®ã‚’æœ¬äººã¨ã¿ãªã™ï¼‰ã—ã¦äººç‰©ã‚’è­˜åˆ¥, (3) 2ã§å¾—ã‚‰ã‚ŒãŸå„ãƒ•ãƒ¬ãƒ¼ãƒ ä¸­ã®äººç‰©æƒ…å ±ã‚’æ™‚é–“é †ã«ä¸¦ã¹ã¦å­—å¹•(Closed Caption)ç”¨ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã€‚ä»¥ä¸‹ã€å„å‡¦ç†ã®è©³ç´°ã«ã¤ã„ã¦èª¬æ˜ã™ã‚‹ã€‚\n1. Azure Media Encoder Standardã§ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã®é™æ­¢ç”»ç”Ÿæˆ æ®‹å¿µãªãŒã‚‰Face APIã¯ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‹ã‚‰ç›´æ¥é¡”æ¤œå‡ºã™ã‚‹ã“ã¨ãŒã§ããªã„ãŸã‚ã€ä¸€æ—¦ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‹ã‚‰å„ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã®é™æ­¢ç”»ã‚’ç”Ÿæˆã—ã¦ãã®é™æ­¢ç”»ã‚’å¯¾è±¡ã«å‡¦ç†ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹ã€‚ã“ã“ã§ã¯å„ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã®é™æ­¢ç”»ç”Ÿæˆã«Azure Media Encoder Standardï¼ˆMESï¼‰ã‚’åˆ©ç”¨ã™ã‚‹ã€‚MESã‚’ä½¿ã†ã“ã¨ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã‚¿ã‚¹ã‚¯ã¨ã—ã¦ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«å¯¾ã—ã¦æ§˜ã€…ãªå‡¦ç†ã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹ã®ã ãŒã€MESã«ã¯ãã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã‚¿ã‚¹ã‚¯ã®ï¼‘ã¤ã¨ã—ã¦ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆã®ãŸã‚ã®ã‚¿ã‚¹ã‚¯ãŒç”¨æ„ã•ã‚Œã¦ãŠã‚Šã€ä»Šå›ã¯ã“ã®ã‚µãƒ ãƒãƒ¼ãƒ«ç”Ÿæˆã‚¿ã‚¹ã‚¯ã‚’åˆ©ç”¨ã™ã‚‹ã€‚ä»–ã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã‚¿ã‚¹ã‚¯åŒæ§˜ã«ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆã‚¿ã‚¹ã‚¯ã«ã¤ã„ã¦ã‚‚ãƒ—ãƒªã‚»ãƒƒãƒˆã¨å‘¼ã°ã‚Œã‚‹ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã«å¿…è¦ãªæƒ…å ±ã‚’è¨˜è¿°ã—ãŸ XML ã¾ãŸã¯ JSONå½¢å¼ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ä»Šå›ã¯1ç§’ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã«JPEGå½¢å¼ã®é™æ­¢ç”»ï¼ˆã‚µãƒ ãƒã‚¤ãƒ«ï¼‰ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã«æ¬¡ã®ã‚ˆã†ãªãƒ—ãƒªã‚»ãƒƒãƒˆï¼ˆamsmp-thumbnail-config.jsonï¼‰ã‚’ç”¨æ„ã—ãŸã€‚\n{ \u0026#34;Version\u0026#34;: 1.0, \u0026#34;Codecs\u0026#34;: [ { \u0026#34;Start\u0026#34;: \u0026#34;00:00:00\u0026#34;, \u0026#34;Step\u0026#34;: \u0026#34;00:00:01\u0026#34;, \u0026#34;Type\u0026#34;: \u0026#34;JpgImage\u0026#34;, \u0026#34;JpgLayers\u0026#34;: [ { \u0026#34;Quality\u0026#34;: 90, \u0026#34;Type\u0026#34;: \u0026#34;JpgLayer\u0026#34;, \u0026#34;Width\u0026#34;: 640, \u0026#34;Height\u0026#34;: 360 } ] } ], \u0026#34;Outputs\u0026#34;: [ { \u0026#34;FileName\u0026#34;: \u0026#34;{Basename}_{Index}{Extension}\u0026#34;, \u0026#34;Format\u0026#34;: { \u0026#34;Type\u0026#34;: \u0026#34;JpgFormat\u0026#34; } } ] } MESã«ã‚ˆã‚‹ã‚µãƒ ãƒã‚¤ãƒ«å‡¦ç†å®Ÿè¡Œæ–¹æ³•ã‚„ãƒ—ãƒªã‚»ãƒƒãƒˆã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€ŒMedia Encoder Standard ã‚’ä½¿ç”¨ã—ãŸé«˜åº¦ãªã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã€ã‚„åŒãƒšãƒ¼ã‚¸ã®ã€Œã‚µãƒ ãƒã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ã€é …ã‚’å‚ç…§ãã ã•ã„ã€‚å°šã€ä»Šå›ã®ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆã®ãŸã‚ã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å‡¦ç†ã¯å°ç”Ÿè‡ªä½œã®ã€Œazure-media-processor-javaã€ã‚’åˆ©ç”¨ã—ã¦ãƒãƒƒãƒå®Ÿè¡Œã—ã¦ã„ã‚‹ã€‚\n2. Cognitive Services Face APIã«ã‚ˆã‚‹é¡”ã®æ¤œå‡ºã¨äººç‰©ã®è­˜åˆ¥ ã“ã“ã§ã¯Cognitive Servicesã®Face APIã‚’ä½¿ã£ã¦ï¼‘ã§å¾—ã‚‰ã‚ŒãŸãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã®é™æ­¢ç”»åƒã«å¯¾ã—ã¦é¡”æ¤œå‡ºã‚’è¡Œã„ã€äºˆã‚ç™»éŒ²ã—ã¦ã„ã‚‹äººç‰©ãƒªã‚¹ãƒˆï¼ˆFace APIã§ã„ã†ã¨ã“ã‚ã®Person Groupï¼‰ã¨æ¯”è¼ƒã—ã¦æœ€ã‚‚é¡ä¼¼åº¦ã®é«˜ã„äººç‰©ï¼ˆFace APIã§ã„ã†ã¨ã“ã‚ã®Person ï¼‰ã‚’ãã®æœ¬äººã¨ã—ã¦è­˜åˆ¥ã™ã‚‹ã€‚\n2-1. äººç‰©ãƒªã‚¹ãƒˆï¼ˆPerson Groupï¼‰ã®ä½œæˆ äººç‰©ãƒªã‚¹ãƒˆï¼ˆPerson Groupï¼‰ã®ä½œæˆã§å¿…è¦ãªä½œæ¥­ã¨Face APIã®åˆ©ç”¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯æ¬¡ã®é€šã‚Š:\nCreate a Person Group APIã‚’ä½¿ã£ã¦ Person Groupã‚’ä½œæˆ ä¸Šè¨˜ã§ä½œæˆã—ãŸPerson Groupã®ä¸­ã«Create a Person APIã§äººç‰©ã”ã¨ã«Personã‚’ä½œæˆã™ã‚‹ã€‚ä½œæˆã•ã‚ŒãŸPersonå¯¾ã—ã¦Add a Person Face APIã§ãã®äººç‰©ã®é¡”ç”»åƒã‚’ç™»éŒ²ã™ã‚‹ã€‚Face APIã§ã¯å„Personã«æœ€å¤§248æšã®é¡”ç”»åƒã‚’ç™»éŒ²ãŒå¯èƒ½ã¨ãªã£ã¦ãŠã‚Šã€ã•ã¾ã–ã¾ãªç¨®é¡ã®é¡”ã‚’ç™»éŒ²ã™ã‚‹ã“ã¨ã§æ©Ÿæ¢°å­¦ç¿’ã«ã‚ˆã‚Šãã®äººç‰©ã®é¡”è­˜åˆ¥ã®ç²¾åº¦ãŒå‘ä¸Šã™ã‚‹ã¨ã•ã‚Œã¦ã„ã‚‹ã€‚ ä¸Šè¨˜ã§Person Groupã«å¯¾ã—ã¦ç™»éŒ²ã•ã‚ŒãŸPersonãƒ‡ãƒ¼ã‚¿ï¼ˆPersonã”ã¨ã®é¡”ãƒ‡ãƒ¼ã‚¿ï¼‰ã¯æœ€çµ‚çš„ã«Train Person Group APIã§ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã•ã‚Œã‚‹ã“ã¨ã§ã€æ¬¡ã®2-2ã§è¡Œã†é¡”è­˜åˆ¥ï¼ˆFace Identify APIï¼‰å‡¦ç†ã§åˆ©ç”¨å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ã¨ãªã‚‹ã€‚æ³¨æ„ç‚¹ã¨ã—ã¦ã€ã„ãã‚‰ã‚ã‚‹äººç‰©ã®é¡”ç”»åƒã‚’ç™»éŒ²ã—ãŸã¨ã—ã¦ã‚‚ãã‚ŒãŒãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã•ã‚Œãªã„é™ã‚Šé¡”è­˜åˆ¥å‡¦ç†ã«ãŠã„ã¦æœ‰åŠ¹ã«ã¯ãªã‚‰ãªã„ãŸã‚ã€æ–°ã—ãé¡”ã‚’ç™»éŒ²ã—ãŸå ´åˆã¯ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å‡¦ç†ã‚’å¿˜ã‚Œãšã«è¡Œã£ã¦ãã ã•ã„ï¼ˆã“ã®æ‰‹ã®ã“ã¨ã¯è‡ªå‹•åŒ–ã—ã¦ãŠã„ã¦ãã ã•ã„ï¼‰ã€‚ 2-2. é™æ­¢ç”»åƒä¸­ã®é¡”èªè­˜ã¨äººç‰©è­˜åˆ¥ ã“ã“ã§è¡Œã†å‡¦ç†ã®æµã‚Œã¨Face APIã®åˆ©ç”¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯æ¬¡ã®é€šã‚Š:\nFace Detect APIã‚’ä½¿ã£ã¦é™æ­¢ç”»åƒä¸­ã®é¡”ã‚’æ¤œå‡ºã™ã‚‹ã€‚æ¤œå‡ºã•ã‚ŒãŸé¡”ã”ã¨ã«å›ºæœ‰ã®IDãŒå¾—ã‚‰ã‚Œã‚‹ã€‚å°šã€1æšã®ç”»åƒã§è¤‡æ•°ã®é¡”ãŒæ¤œå‡ºã•ã‚ŒãŸå ´åˆã€æœ€å¤§64ã¾ã§ã¯å–å¾—å¯èƒ½ã¨ãªã£ã¦ã„ã‚‹ï¼ˆ2016å¹´12æœˆç¾åœ¨ï¼‰ã€‚ ä¸Šè¨˜ã®é¡”æ¤œå‡ºã§å¾—ã‚‰ã‚ŒãŸé¡”IDã‚’å…ƒã«Face Identify APIã‚’ä½¿ã£ã¦2-1ã§ç™»éŒ²ã—ãŸäººç‰©ãƒªã‚¹ãƒˆï¼ˆPerson Groupï¼‰ã«å¯¾ã—ã¦äººç‰©æ¤œç´¢ã‚’è¡Œã„é¡”ã®é¡ä¼¼åº¦ï¼ˆ0ï½1ã®æ•°å€¤ï¼‰ãŒé«˜ã„ã‚‚ã®é †ã«ä¸€è¦§ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ã“ã“ã§ã¯æœ€ã‚‚é¡ä¼¼åº¦ãŒé«˜ã„äººç‰©ã‚’ãã®é¡”ã®äººç‰©ã¨ã—ã¦æ±ºå®šã™ã‚‹ã€‚ 3. å­—å¹•(Closed Caption)ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã®ç”Ÿæˆ 2ã§å¾—ã‚‰ã‚ŒãŸå„ãƒ•ãƒ¬ãƒ¼ãƒ ä¸­ã®äººç‰©æƒ…å ±ã¨å„ãƒ•ãƒ¬ãƒ¼ãƒ ã®æ™‚é–“ã‚’å…ƒã«å­—å¹•ç”¨ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ã‚ã‚‹WebVTTãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ã€‚ä»¥ä¸‹ã€6ç§’ï½30ç§’ã¾ã§ã®å­—å¹•å‡ºåŠ›ã‚’æœŸã—ãŸWebVTTãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚µãƒ³ãƒ—ãƒ«ã§ã‚ã‚‹ãŒã€è¦‹ã¦ã„ãŸã ã„ã¦ã‚ã‹ã‚‹é€šã‚Šãƒ•ãƒ¬ãƒ¼ãƒ ã®æ™‚é–“ï¼ˆæœ€å°ç§’å˜ä½ï¼‰ã¨ãã“ã§å¾—ã‚‰ã‚ŒãŸäººç‰©åã‚’ã‚»ãƒƒãƒˆã§è¨˜è¿°ã™ã‚‹ã¨ã¦ã‚‚å˜ç´”ãªãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨ãªã£ã¦ã„ã‚‹ã€‚\n00:00:06.000 --\u0026gt; 00:00:07.000 Satya Nadella(0.73295)` 00:00:07.000 --\u0026gt; 00:00:08.000 Satya Nadella(0.6313) 00:00:27.000 --\u0026gt; 00:00:28.000 Bryan Roper(0.68094) 00:00:29.000 --\u0026gt; 00:00:30.000 Bryan Roper(0.54939) å„ãƒ•ãƒ¬ãƒ¼ãƒ ã®æ™‚é–“ã«ã¤ã„ã¦ã€ä»Šå›ã®ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã¯1ç§’ã”ã¨ã«å–å¾—ã—ã¦ãŠã‚Šã€ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã®é™æ­¢ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ãƒ•ãƒ¬ãƒ¼ãƒ ã®é †ç•ªãŒPostfixã¨ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«åã«å«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚å˜ç´”ã«ãƒ•ã‚¡ã‚¤ãƒ«åã‹ã‚‰ãƒ•ãƒ¬ãƒ¼ãƒ ã®æ™‚é–“ãŒç‰¹å®šã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ï¼ˆä¾‹, 10ç•ªç›®ã®ãƒ•ã‚¡ã‚¤ãƒ«= videoassetname_000010.jpgï¼‰ã€‚ã‚‚ã—ä»Šå›ã®ã‚ˆã†ãªæ©Ÿæ¢°çš„ãªãƒ«ãƒ¼ãƒ«ãŒãªã„å ´åˆã¯ãƒ•ãƒ¬ãƒ¼ãƒ ç”¨ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«åã¨æ™‚é–“ã®ãƒãƒƒãƒ”ãƒ³ã‚°ãŒå¿…è¦ã¨ãªã‚‹ã€‚\nãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨å­—å¹•ã®å†ç”Ÿã¯ã€Œãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®éŸ³å£°èªè­˜ãƒ‡ãƒ¢ã€ã§ã‚‚ç´¹ä»‹ã—ãŸã‚ˆã†ã«HTML5ã®trackã‚¿ã‚°ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã«ã‚ˆã‚‹ãƒ“ãƒ‡ã‚ªãƒ•ã‚¡ã‚¤ãƒ«ã®å­—å¹•è¡¨ç¤ºæ©Ÿèƒ½ä½¿ã£ã¦äººç‰©åã®å­—å¹•è¡¨ç¤ºã‚’å®Ÿç¾ã—ã¦ã„ã‚‹ã€‚æœ¬ãƒ‡ãƒ¢ã§ã¯HTML5ã«ä¸‹è¨˜ã®ã‚ˆã†ã«ãƒ“ãƒ‡ã‚ªãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆMP4ï¼‰ã‚’Videoã‚½ãƒ¼ã‚¹ã¨ã—ã¦trackã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã«WebVTTãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆbuild2016keynote.vttï¼‰ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã€‚\n\u0026lt;video id=\u0026#34;Video1\u0026#34; controls autoplay width=\u0026#34;600\u0026#34;\u0026gt; \u0026lt;source src=\u0026#34;KEY01_VideoThumbnail.mp4\u0026#34; srclang=\u0026#34;en\u0026#34; type=\u0026#34;video/mp4\u0026#34;\u0026gt; \u0026lt;track id=\u0026#34;trackJA\u0026#34; src=\u0026#34;build2016keynote.vtt\u0026#34; kind=\u0026#34;captions\u0026#34; srclang=\u0026#34;ja\u0026#34; label=\u0026#34;Person Name\u0026#34; default\u0026gt; \u0026lt;/video\u0026gt; ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ä½œæˆæ‰‹é † Githubãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒšãƒ¼ã‚¸VideoFramesFaceRecognition-Pythonã®1. Preparationã¨2. Batch executionã‚’å®Ÿæ–½ã„ãŸã ã‘ã‚Œã°Face APIã§è­˜åˆ¥ã—ãŸå„ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã®äººç‰©åã‚’å…ƒã«å­—å¹•ãƒ‡ãƒ¼ã‚¿*.vttãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸è¡¨ç¤ºã®ãŸã‚ã®æº–å‚™ã¯å®Œäº†ã™ã‚‹ã€‚æœ€å¾Œã«è¡¨ç¤ºç”¨ã®é™çš„ãƒšãƒ¼ã‚¸ã‚’ç”Ÿæˆã™ã‚Œã°å®Œäº†ã€‚æœ¬ãƒ‡ãƒ¢ã®è¡¨ç¤ºç”¨ãƒšãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿ã¯ã“ã¡ã‚‰ã§ã€åŸºæœ¬çš„ã«index.htmlã®å¤‰æ›´ã®ã¿ã§ã„ã‘ã‚‹ã¯ãšã€‚\næœ¬ãƒ‡ãƒ¢ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ã¤ã„ã¦ä½•ã‹å•é¡Œã‚’ç™ºè¦‹ã—ãŸå ´åˆã¯ã“ã¡ã‚‰ã®Github Issueãƒšãƒ¼ã‚¸ã«Issueã¨ã—ã¦ç™»éŒ²ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã‚ã‚‹ã€‚\nAzure Media Analytics Face Detectorã‚’æ´»ç”¨ã—ãŸå‡¦ç†ã®åŠ¹ç‡åŒ– ä»Šå›ã®äººç‰©è­˜åˆ¥ã§ã¯ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å…¨ã¦ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã«å¯¾ã—ã¦Face APIã‚’ä½¿ã£ã¦é¡”æ¤œå‡ºå‡¦ç†ã‚’è¡Œã£ã¦ã„ã‚‹ãŒã€ã“ã‚Œã§ã¯é¡”å‡ºç¾ãƒ•ãƒ¬ãƒ¼ãƒ ãŒå°‘ãªã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å ´åˆã«ã¯ç„¡é§„ãªFace APIãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå¤§é‡ã«ç™ºç”Ÿã—ã¦ã—ã¾ã†ãŸã‚åŠ¹ç‡çš„ãªå‡¦ç†ã¨ã¯è¨€ãˆãªã„ã€‚ã¨ã„ã†ã“ã¨ã§ã€ã“ã“ã§ã¯Azure Media Face Detectorã‚’æ´»ç”¨ã—ã¦å‡¦ç†ã‚’åŠ¹ç‡åŒ–ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ãŸã„ã€‚\nAzure Media Face Detectorã¯Azure Media Servicesã®ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ—ãƒ­ã‚»ãƒƒã‚µ(MP)ã®ï¼‘ã¤ã§ã€ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‹ã‚‰é¡”ã®æ¤œå‡ºã‚„æ„Ÿæƒ…ã®æ¤œå‡ºã‚’ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚æ®‹å¿µãªãŒã‚‰Azure Media Face Detectorã¯Face APIã®ã‚ˆã†ã«é¡”ã®è­˜åˆ¥ã‚’è¡Œã†ã“ã¨ã¯ã§ããªã„ã‚‚ã®ã®ã€ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‹ã‚‰ç›´æ¥é¡”ã‚’æ¤œå‡ºã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€å³ã¡ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‹ã‚‰ç›´æ¥é¡”ãŒå­˜åœ¨ã™ã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ç‰¹å®šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ã‚ˆã£ã¦ã€ã“ã®æ©Ÿèƒ½ã‚’åˆ©ç”¨ã—ã¦ä¸€æ—¦Azure Media Face Detectorã§é¡”ãŒæ¤œå‡ºã•ã‚ŒãŸãƒ•ãƒ¬ãƒ¼ãƒ ã®ã¿ã«çµã‚Šè¾¼ã‚“ã§ã‹ã‚‰Face APIã‚’ä½¿ã£ã¦ãƒ•ãƒ¬ãƒ¼ãƒ ã®é™æ­¢ç”»åƒã«å¯¾ã—ã¦é¡”æ¤œå‡ºãƒ»é¡”è­˜åˆ¥ã‚’è¡Œã†ã“ã¨ã§ç„¡é§„ãªFace APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ¸›ã‚‰ã—ã¦å‡¦ç†ã®åŠ¹ç‡åŒ–ã‚’å›³ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚å‡¦ç†ãƒ•ãƒ­ãƒ¼ã¨ã—ã¦ã¯æ¬¡ã®ã‚ˆã†ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã€‚\nãŠã¾ã‘: Video Summarization ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸ã‚’ã¿ã¦ã„ãŸã ãã¨ãŠåˆ†ã‹ã‚Šã®ã‚ˆã†ã«ä»Šå›ã®ãƒ‡ãƒ¢ã§ã¯3åˆ†ã®ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’é¡Œæã¨ã—ã¦ã„ã‚‹ãŒã€å…ƒãƒã‚¿ã¯Channel9ã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹è¨ˆ138åˆ†ã®Build 2016ã®ã‚­ãƒ¼ãƒãƒ¼ãƒˆã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ã‚ã‚‹ã€‚ã“ã®ã‚­ãƒ¼ãƒãƒ¼ãƒˆã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¯ãƒ‡ãƒ¢ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨ã—ã¦ã¯ã‚ã¾ã‚Šã«é•·ã‹ã£ãŸã®ã§ã“ã‚Œã‚’Azure Media Video Thumbnailsãƒ¡ãƒ‡ã‚£ã‚¢ãƒ—ãƒ­ã‚»ãƒƒã‚µï¼ˆMPï¼‰ã‚’ä½¿ã£ã¦3åˆ†ã«è¦ç´„ã—ã¦ã„ã‚‹ã€‚Azure Media Video Thumbnailsã¯ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãƒ™ãƒ¼ã‚¹ã§ç‰¹å¾´ã‚·ãƒ¼ãƒ³ã®æ¤œå‡ºã¨ãã‚Œã‚‰ã‚’çµåˆï¼ˆã‚µãƒ–ã‚¯ãƒªãƒƒãƒ—ï¼‰ã—ã¦ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æŒ‡å®šã—ãŸé•·ã•ã«è¦ç´„ã™ã‚‹ã“ã¨ãŒã§ãã‚‹MPã§ã€ç¾åœ¨Public Previewãƒªãƒªãƒ¼ã‚¹ä¸­(2016å¹´12æœˆç¾åœ¨)ã€‚\nå‚è€ƒã¾ã§ã«ã€è¦ç´„ï¼ˆ3åˆ†:180ç§’ï¼‰ã«ä½¿ç”¨ã—ãŸAzure Media Video Thumbnailsã®ã‚¿ã‚¹ã‚¯ãƒ—ãƒªã‚»ãƒƒãƒˆã¯ä»¥ä¸‹ã®é€šã‚Šï¼š\n{ \u0026#34;version\u0026#34;: \u0026#34;1.0\u0026#34;, \u0026#34;options\u0026#34;: { \u0026#34;outputAudio\u0026#34;: \u0026#34;true\u0026#34;, \u0026#34;maxMotionThumbnailDurationInSecs\u0026#34;: \u0026#34;180\u0026#34;, \u0026#34;fadeInFadeOut\u0026#34;: \u0026#34;true\u0026#34; } } END\n","permalink":"https://unofficialism.info/posts/azure-media-cognitive-demos-video-frames-face-recognition/","summary":"éå»ã«æœ¬ãƒ–ãƒ­ã‚°ã§ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’åˆ‡ã‚Šå£ã¨ã—ãŸéŸ³å£°èªè­˜ã‚„OCRæŠ€è¡“ã‚’åˆ©ç”¨ã—ãŸãƒ‡ãƒ¢ã‚’ç´¹ä»‹ã—ãŸãŒã€ã“ã“ã§ã¯ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä¸­ã®äººç‰©å‡ºç¾ç®‡æ‰€ã«é€£å‹•ã—ã¦äººç‰©åã‚’å­—å¹•ã§è¡¨ç¤ºã•ã›ã‚‹ãƒ‡ãƒ¢ã¨ãã®å®Ÿè£…æ–¹æ³•ã‚’ç´¹ä»‹ã—ãŸã„ã€‚äººç‰©è­˜åˆ¥ã«ã¯Azureã®Cognitive Servicesã®Face APIã‚’ä½¿ã£ã¦ã„ã¦ã€ã“ã‚Œã§å‹•ç”»ã®ä¸­ã«å‡ºç¾ã™ã‚‹é¡”ã®æ¤œå‡ºã‚’è¡Œã„ã€äºˆã‚ç™»éŒ²ã—ã¦ã„ã‚‹äººç‰©ãƒªã‚¹ãƒˆã¨ã®ãƒãƒƒãƒãƒ³ã‚°ã«ã‚ˆã‚Šå®Ÿç¾ã—ã¦ã„ã‚‹ã€‚ Cognitive Serivcesã¨ã¯è¦–è¦šã€éŸ³å£°ã€è¨€èªã€çŸ¥è­˜ãªã©ãƒã‚¤ã‚¯ãƒ­ã‚½ãƒ•ãƒˆãŒã“ã‚Œã¾ã§ç ”ç©¶ã‚’é€šã˜ã¦é–‹ç™ºã—ã¦ããŸã•ã¾ã–ã¾ãªè¦ç´ æŠ€è¡“ã‚’APIã¨ã—ã¦æä¾›ã—ã¦ã„ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã®ã“ã¨ã§ã€æœ€è¿‘å··ã§äººå·¥çŸ¥èƒ½ï¼ˆAIï¼‰ã ã¨ã‹ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ã‚¹ã¨ã‹ã„ã†ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚ˆãè€³ã«ã™ã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ€ã†ãŒAzureåˆ©ç”¨ã‚·ãƒŠãƒªã‚ªã§ãã†ã„ã£ãŸã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ã‚¹ï¼ˆçŸ¥èƒ½/çŸ¥æ€§ï¼‰ã‚’å…¼ã­å‚™ãˆãŸã‚¢ãƒ—ãƒªã‚’ä½œã‚‹å ´åˆã¯é–“é•ã„ãªãä¸­æ ¸ã¨ãªã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã®1ã¤ã§ã‚ã‚‹ã€‚Face APIã¯ãã®ä¸­ã§ã‚‚é¡”ã®æ¤œå‡ºãƒ»è­˜åˆ¥ã‚„ã€é¡”ã«ã¾ã¤ã‚ã‚‹æ„Ÿæƒ…ã€ç‰¹å¾´ãªã©ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æŠ½å‡ºã«ç‰¹åŒ–ã—ãŸAPIã§ã‚ã‚‹ã€‚\ndemo site source code ä¸»è¦ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã¨æ©Ÿèƒ½ ä¸‹å›³ã¯ä»Šå›ã®ãƒ‡ãƒ¢ä½œæˆã®ãŸã‚ã«è¡Œã£ã¦ã„ã‚‹å‡¦ç†ãƒ•ãƒ­ãƒ¼ã¨ä¸»è¦ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã‚’è¡¨ã—ã¦ã„ã‚‹ã€‚ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã¯å¤§ããåˆ†ã‘ã¦3ã¤: (1) å‹•ç”»ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’Azure Media Encoder Standardã‚’ä½¿ã£ã¦ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã®é™æ­¢ç”»åƒã®ä½œæˆ, (2) Cognitive Servicesã®Face APIã‚’ä½¿ã£ã¦1ã‚ˆã‚Šå¾—ã‚‰ã‚ŒãŸé™æ­¢ç”»åƒã‹ã‚‰é¡”ã®æ¤œå‡ºã‚’è¡Œã„äºˆã‚ç™»éŒ²ã—ã¦ã„ã‚‹äººç‰©ãƒªã‚¹ãƒˆã¨ãƒãƒƒãƒãƒ³ã‚°ï¼ˆæœ€ã‚‚é¡ä¼¼åº¦ãŒé«˜ã„ã‚‚ã®ã‚’æœ¬äººã¨ã¿ãªã™ï¼‰ã—ã¦äººç‰©ã‚’è­˜åˆ¥, (3) 2ã§å¾—ã‚‰ã‚ŒãŸå„ãƒ•ãƒ¬ãƒ¼ãƒ ä¸­ã®äººç‰©æƒ…å ±ã‚’æ™‚é–“é †ã«ä¸¦ã¹ã¦å­—å¹•(Closed Caption)ç”¨ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã€‚ä»¥ä¸‹ã€å„å‡¦ç†ã®è©³ç´°ã«ã¤ã„ã¦èª¬æ˜ã™ã‚‹ã€‚\n1. Azure Media Encoder Standardã§ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã®é™æ­¢ç”»ç”Ÿæˆ æ®‹å¿µãªãŒã‚‰Face APIã¯ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‹ã‚‰ç›´æ¥é¡”æ¤œå‡ºã™ã‚‹ã“ã¨ãŒã§ããªã„ãŸã‚ã€ä¸€æ—¦ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‹ã‚‰å„ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã®é™æ­¢ç”»ã‚’ç”Ÿæˆã—ã¦ãã®é™æ­¢ç”»ã‚’å¯¾è±¡ã«å‡¦ç†ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹ã€‚ã“ã“ã§ã¯å„ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã®é™æ­¢ç”»ç”Ÿæˆã«Azure Media Encoder Standardï¼ˆMESï¼‰ã‚’åˆ©ç”¨ã™ã‚‹ã€‚MESã‚’ä½¿ã†ã“ã¨ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã‚¿ã‚¹ã‚¯ã¨ã—ã¦ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«å¯¾ã—ã¦æ§˜ã€…ãªå‡¦ç†ã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹ã®ã ãŒã€MESã«ã¯ãã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã‚¿ã‚¹ã‚¯ã®ï¼‘ã¤ã¨ã—ã¦ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆã®ãŸã‚ã®ã‚¿ã‚¹ã‚¯ãŒç”¨æ„ã•ã‚Œã¦ãŠã‚Šã€ä»Šå›ã¯ã“ã®ã‚µãƒ ãƒãƒ¼ãƒ«ç”Ÿæˆã‚¿ã‚¹ã‚¯ã‚’åˆ©ç”¨ã™ã‚‹ã€‚ä»–ã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã‚¿ã‚¹ã‚¯åŒæ§˜ã«ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆã‚¿ã‚¹ã‚¯ã«ã¤ã„ã¦ã‚‚ãƒ—ãƒªã‚»ãƒƒãƒˆã¨å‘¼ã°ã‚Œã‚‹ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã«å¿…è¦ãªæƒ…å ±ã‚’è¨˜è¿°ã—ãŸ XML ã¾ãŸã¯ JSONå½¢å¼ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ä»Šå›ã¯1ç§’ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã«JPEGå½¢å¼ã®é™æ­¢ç”»ï¼ˆã‚µãƒ ãƒã‚¤ãƒ«ï¼‰ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã«æ¬¡ã®ã‚ˆã†ãªãƒ—ãƒªã‚»ãƒƒãƒˆï¼ˆamsmp-thumbnail-config.jsonï¼‰ã‚’ç”¨æ„ã—ãŸã€‚\n{ \u0026#34;Version\u0026#34;: 1.0, \u0026#34;Codecs\u0026#34;: [ { \u0026#34;Start\u0026#34;: \u0026#34;00:00:00\u0026#34;, \u0026#34;Step\u0026#34;: \u0026#34;00:00:01\u0026#34;, \u0026#34;Type\u0026#34;: \u0026#34;JpgImage\u0026#34;, \u0026#34;JpgLayers\u0026#34;: [ { \u0026#34;Quality\u0026#34;: 90, \u0026#34;Type\u0026#34;: \u0026#34;JpgLayer\u0026#34;, \u0026#34;Width\u0026#34;: 640, \u0026#34;Height\u0026#34;: 360 } ] } ], \u0026#34;Outputs\u0026#34;: [ { \u0026#34;FileName\u0026#34;: \u0026#34;{Basename}_{Index}{Extension}\u0026#34;, \u0026#34;Format\u0026#34;: { \u0026#34;Type\u0026#34;: \u0026#34;JpgFormat\u0026#34; } } ] } MESã«ã‚ˆã‚‹ã‚µãƒ ãƒã‚¤ãƒ«å‡¦ç†å®Ÿè¡Œæ–¹æ³•ã‚„ãƒ—ãƒªã‚»ãƒƒãƒˆã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€ŒMedia Encoder Standard ã‚’ä½¿ç”¨ã—ãŸé«˜åº¦ãªã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã€ã‚„åŒãƒšãƒ¼ã‚¸ã®ã€Œã‚µãƒ ãƒã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ã€é …ã‚’å‚ç…§ãã ã•ã„ã€‚å°šã€ä»Šå›ã®ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆã®ãŸã‚ã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å‡¦ç†ã¯å°ç”Ÿè‡ªä½œã®ã€Œazure-media-processor-javaã€ã‚’åˆ©ç”¨ã—ã¦ãƒãƒƒãƒå®Ÿè¡Œã—ã¦ã„ã‚‹ã€‚","title":"Detecting faces in Video contents using Azure Cognitive Services Face API"},{"content":"In this article, Iâ€™d like to introduces a solution to collect events from various sources and send them into HTTP Trigger function in Azure Functions using fluent-plugin-azurefunctions. Triggers in Azure Functions are event responses used to trigger your custom code. HTTP Trigger functions allow you to respond to HTTP events sent from fluentd and cook them into whatever you want!\n[note] Azure Functions is a (\u0026ldquo;serverless\u0026rdquo;) solution for easily running small pieces of code, or \u0026ldquo;functions,\u0026rdquo; in Azure. Fluentd is an open source data collector, which lets you unify the data collection and consumption for a better use and understanding of data. fluent-plugin-azurefunctions is a fluentd output plugin that enables to collect events into Azure Functions.\nPre-requisites A basic understanding of fluentd - if you\u0026rsquo;re not familiar with fluentd, fluentd quickstart guide is good starting point Azure subscription - you need to have Azure subscription that grants you access to Microsoft Azure services, and under which you can create Azure Functions account. If you don\u0026rsquo;t have yet click here to create it Setup: Azure Functions (HTTP Trigger Function) Create a function (HTTP Trigger). First, you need to have an function app that hosts the execution of your functions in Azure if you don\u0026rsquo;t already have. Once you have an function app, you can create a function. Here are instructions:\nCreate your first Azure Function Azure Functions developer reference A quick-start HTTP trigger function sample is included under examples/function-csharp in Github repository. You simply need to save the code (run.csx) and configuration files (function.json, project.json) in the same Azure function folder. Explaining a little bit about each of files, the function.json file defines the function bindings and other configuration settings. The runtime uses this file to determine the events to monitor and how to pass data into and return data from function execution. The project.json defines packages that the application depends. The run.csx is a core application file where you write your code to process Your jobs. Here is a sample run.csx:\nusing System.Net; using Newtonsoft.Json; public static async Task\u0026lt;HttpResponseMessage\u0026gt; Run(HttpRequestMessage req, TraceWriter log) { log.Info(\u0026#34;C# HTTP trigger function to process fluentd output request.\u0026#34;); log.Info( string.Format(\u0026#34;Dump request:\\n {0}\u0026#34;,req.ToString())); // parse query parameter string payload = req.GetQueryNameValuePairs() .FirstOrDefault(q =\u0026gt; string.Compare(q.Key, \u0026#34;payload\u0026#34;, true) == 0) .Value; // Get request body dynamic data = await req.Content.ReadAsAsync\u0026lt;object\u0026gt;(); if (data.payload == null) { log.Info(\u0026#34;Please pass a payload on the query string or in the request body\u0026#34;); return new HttpResponseMessage(HttpStatusCode.BadRequest); } // Process Your Jobs! dynamic r = JsonConvert.DeserializeObject\u0026lt;dynamic\u0026gt;((string)data.payload); if (r.key1!=null) log.Info(string.Format(\u0026#34;key1={0}\u0026#34;,r.key1)); if (r.key2!=null) log.Info(string.Format(\u0026#34;key2={0}\u0026#34;,r.key2)); if (r.key3!=null) log.Info(string.Format(\u0026#34;key3={0}\u0026#34;,r.key3)); if (r.mytime!=null) log.Info(string.Format(\u0026#34;mytime={0}\u0026#34;,r.mytime)); if (r.mytag!=null) log.Info(string.Format(\u0026#34;mytag={0}\u0026#34;,r.mytag)); return new HttpResponseMessage(HttpStatusCode.OK); } Setup: Fluentd First of all, install Fluentd. The following shows how to install Fluentd using Ruby gem packger but if you are not using Ruby Gem for the installation, please refer to this installation guide where you can find many other ways to install Fluentd on many platforms.\n# install fluentd $ sudo gem install fluentd --no-ri --no-rdoc # create fluent.conf $ fluentd --setup Also, install fluent-plugin-azurefunctions for fluentd aggregator to send collected event data into Azure Functions.\n$ sudo gem install fluent-plugin-azurefunctions Next, configure fluent.conf, a fluentd configuration file as follows. Please refer to this for fluent-plugin-azurefunctions configuration. The following is a sample configuration where the plugin writes only records that are specified by key_names in incoming event stream out to Azure Functions:\n# This is used by event forwarding and the fluent-cat command \u0026lt;source\u0026gt; @type forward @id forward_input \u0026lt;/source\u0026gt; # Send Data to Azure Functions \u0026lt;match azurefunctions.**\u0026gt; @type azurefunctions endpoint AZURE_FUNCTION_ENDPOINT # ex. https://\u0026lt;accountname\u0026gt;.azurewebsites.net/api/\u0026lt;functionname\u0026gt; function_key AZURE_FUNCTION_KEY # ex. aRVQ7Lj0vzDhY0JBYF8gpxYyEBxLwhO51JSC7X5dZFbTvROs7uNg== key_names key1,key2,key3 add_time_field true time_field_name mytime time_format %s localtime true add_tag_field true tag_field_name mytag \u0026lt;/match\u0026gt; [note] If key_names not specified above, all incoming records are posted to Azure Functions (See also this).\nFinally, run fluentd with the fluent.conf that you configure above.\n$ fluentd -c ./fluent.conf -vv \u0026amp; TEST Let\u0026rsquo;s check if test events will be sent to Azure Functions that triggers the HTTP function (let\u0026rsquo;s use the sample function included in Github repo this time). First, generate test events using fluent-cat like this:\necho \u0026#39; { \u0026#34;key1\u0026#34;:\u0026#34;value1\u0026#34;, \u0026#34;key2\u0026#34;:\u0026#34;value2\u0026#34;, \u0026#34;key3\u0026#34;:\u0026#34;value3\u0026#34;}\u0026#39; | fluent-cat azurefunctions.msg As both add_time_field and add_tag_field are enabled, time and tag fields are added to the record that are selected by key_names before posting to Azure Functions, thus actual HTTP Post request body would be like this:\n{ \u0026#34;payload\u0026#34;: \u0026#39;{\u0026#34;key1\u0026#34;:\u0026#34;value1\u0026#34;, \u0026#34;key2\u0026#34;:\u0026#34;value2\u0026#34;, \u0026#34;key3\u0026#34;:\u0026#34;value3\u0026#34;, \u0026#34;mytime\u0026#34;:\u0026#34;1480195100\u0026#34;, \u0026#34;mytag\u0026#34;:\u0026#34;azurefunctions.msg\u0026#34;}\u0026#39; } If events are sent to the function successfully, a HTTP trigger function handles the events and the following logs can be seen in Azure Functions log stream:\n2016-11-26T21:18:55.200 Function started (Id=5392e7ae-3b8e-4f65-9fc1-6ae529cdfe3a) 2016-11-26T21:18:55.200 C# HTTP trigger function to process fluentd output request. 2016-11-26T21:18:55.200 key1=value1 2016-11-26T21:18:55.200 key2=value2 2016-11-26T21:18:55.200 key3=value3 2016-11-26T21:18:55.200 mytime=1480195100 2016-11-26T21:18:55.200 mytag=azurefunctions.msg 2016-11-26T21:18:55.200 Function completed (Success, Id=5392e7ae-3b8e-4f65-9fc1-6ae529cdfe3a) Advanced Senarios 1. Near Real-time processing Function Apps can output messages to different means or data stores. For example, fluentd collects events generated from IoT devices and send them to Azure Function, and the the HTTP trigger function transforms the events and processes the data to store in a persistent storage or to pass them to different means. Here are some of options available at the time of writing:\nStore JSON documents on DocumentDB Send events to Event Hub Send messages to Azure Service Bus Queues Send messages to Azure Storage Queues Store blobs to Azure Blob Storage Push notifications to Notification Hub [Send SMS text messages via Twilio](https://docs.microsoft.com/en-us/azure/azure-functions/functions-bindings-twilio) Send emails via SendGrid 2. Background jobs processing If the jobs are expected to be large long running ones, it\u0026rsquo;s recommended that you refactor them into smaller function sets that work together and return fast responses. For example, you can pass the HTTP trigger payload into a queue to be processed by a queue trigger function. Or if the payload is too big to pass into the queue, you can store them onto Azure Blob storage at first, then pass only limited amount of the data into a queue just to trigger background workers to process the actual work. These approaches allow you to do the actual work asynchronously and return an immediate response.\nLINKS fluent-plugin-azurefunctions Azure Functions Overview Azure functions Triggers and Bindings Azure Functions Best Practices END\n","permalink":"https://unofficialism.info/posts/fluent-plugin-azurefunctions/","summary":"In this article, Iâ€™d like to introduces a solution to collect events from various sources and send them into HTTP Trigger function in Azure Functions using fluent-plugin-azurefunctions. Triggers in Azure Functions are event responses used to trigger your custom code. HTTP Trigger functions allow you to respond to HTTP events sent from fluentd and cook them into whatever you want!\n[note] Azure Functions is a (\u0026ldquo;serverless\u0026rdquo;) solution for easily running small pieces of code, or \u0026ldquo;functions,\u0026rdquo; in Azure.","title":"Collecting events into Azure Functions and triggering your custom code using fluent-plugin-azurefunctions"},{"content":"OCRã¨ã¯Optical Character Recognitionã®ç•¥ã§æ—¥æœ¬èªã«ã™ã‚‹ã¨å…‰å­¦æ–‡å­—èªè­˜ã¨è¨³ã•ã‚Œã¦ãŠã‚Šã€ã–ã£ãã‚Šã¨ç”»åƒã®ä¸­ã®æ–‡å­—ã‚’ãƒ†ã‚­ã‚¹ãƒˆã«å¤‰æ›ã™ã‚‹æŠ€è¡“ã®ã“ã¨ã‚’æŒ‡ã™ã€‚ãƒ†ã‚­ã‚¹ãƒˆã«å¤‰æ›ã•ã‚Œã‚‹ã¨ã„ã†ã“ã¨ã¯å‹˜ãŒé‹­ã„çš†ã•ã‚“ã¯ãŠæ°—ã¥ãã ã¨æ€ã†ãŒã€ãƒ†ã‚­ã‚¹ãƒˆã®å…¨æ–‡æ¤œç´¢ã§ã‚ã£ãŸã‚Šã€ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰éŸ³å£°ã¸ã®å¤‰æ›ã€ã•ã‚‰ã«ã¯æ©Ÿæ¢°ç¿»è¨³ã‚’ä½¿ã£ã¦å¤šè¨€èªã¸ã®å¤‰æ›ã¨ã„ã£ãŸå±•é–‹ãŒè€ƒãˆã‚‰ã‚Œã‚‹ã€‚ãã‚“ãªå¯èƒ½æ€§ã‚’ç§˜ã‚ãŸOCRã§ã‚ã‚‹ãŒã€ã“ã“ã§ã¯ãã®OCRã®æŠ€è¡“ã‚’ä½¿ã£ã¦ãƒ“ãƒ‡ã‚ªãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰æŠ½å‡ºã—ãŸãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å…ƒã«ãƒ“ãƒ‡ã‚ªã«å­—å¹•è¡¨ç¤ºã—ãŸã‚Šã€å‹•ç”»ä¸­ã«è¡¨ç¤ºã•ã‚Œã‚‹æ–‡å­—ã‚’å…¨æ–‡æ¤œç´¢ã‚’ã™ã‚‹ãƒ‡ãƒ¢ã‚’ç´¹ä»‹ã—ãŸã„ã€‚å†…å®¹çš„ã«ã¯ã€ŒAzure Media \u0026amp; Cognitiveãƒ‡ãƒ¢:Speech-To-Textã€ã§ç´¹ä»‹ã—ãŸãƒ‡ãƒ¢ã®OCRç‰ˆã¨ã„ã£ãŸã¨ã“ã‚ã€‚\ndemo site source code ä¸»è¦ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã¨æ©Ÿèƒ½ Azure Media OCRãƒ¡ãƒ‡ã‚£ã‚¢ãƒ—ãƒ­ã‚»ãƒƒã‚µã«ã‚ˆã‚‹ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º ã“ã®ãƒ‡ãƒ¢ã§ã¯Azure Media OCRãƒ¡ãƒ‡ã‚£ã‚¢ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼(MP)ã‚’ä½¿ç”¨ã—ã¦ãƒ“ãƒ‡ã‚ªãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æ¤œå‡ºã—ã¦ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ã„ã‚‹ã€‚OCRãƒ¡ãƒ‡ã‚£ã‚¢ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã¯å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã‚ˆã‚Šãƒ“ãƒ‡ã‚ªè§£æã®æŒ™å‹•ã‚’èª¿æ•´ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ä¸»ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦ã¯æ¤œç´¢å¯¾è±¡ãƒ†ã‚­ã‚¹ãƒˆã®è¨€èªï¼ˆæ—¥æœ¬èªã‚‚ã‚µãƒãƒ¼ãƒˆï¼‰ã€ãƒ†ã‚­ã‚¹ãƒˆã®å‘ãã€ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ¬ãƒ¼ãƒˆã€ãƒ“ãƒ‡ã‚ªãƒ•ãƒ¬ãƒ¼ãƒ å†…ã®ãƒ†ã‚­ã‚¹ãƒˆæ¤œå‡ºå¯¾è±¡ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ãŒã‚ã‚‹ãŒã€æœ¬ãƒ‡ãƒ¢ã§ã®å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆVideo-OCR-Search-Python/src/ocr-detectregion.jsonï¼‰ã¯ä»¥ä¸‹ã®é€šã‚Šæ¤œç´¢å¯¾è±¡è¨€èªã¯æ—¥æœ¬èªã€1ç§’ãŠãã®ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ¬ãƒ¼ãƒˆã€ãƒ†ã‚­ã‚¹ãƒˆæ¤œå‡ºå¯¾è±¡ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‹ã‚‰ãƒ“ãƒ‡ã‚ªãƒ•ãƒ¬ãƒ¼ãƒ å†…ã®ä¸Šéƒ¨1/4ã‚’çœãè¨­å®šï¼ˆæ¤œå‡ºå¯¾è±¡ã‚’ãƒ•ãƒ¬ãƒ¼ãƒ ãƒˆãƒƒãƒ—ã‹ã‚‰85 pixelä»¥ä¸‹ã‚’å¯¾è±¡ï¼‰ã«ã—ã¦ã„ã‚‹ã€‚\n{ \u0026#34;Version\u0026#34;:\u0026#34;1.0\u0026#34;, \u0026#34;Options\u0026#34;: { \u0026#34;Language\u0026#34;:\u0026#34;Japanese\u0026#34;, \u0026#34;TimeInterval\u0026#34;:\u0026#34;00:00:01.000\u0026#34;, \u0026#34;DetectRegions\u0026#34;: [ {\u0026#34;Left\u0026#34;:\u0026#34;0\u0026#34;,\u0026#34;Top\u0026#34;:\u0026#34;85\u0026#34;,\u0026#34;Width\u0026#34;:\u0026#34;1280\u0026#34;,\u0026#34;Height\u0026#34;:\u0026#34;635\u0026#34;} ] } } ãã—ã¦ã€Azure Media OCRãƒ¡ãƒ‡ã‚£ã‚¢ãƒ—ãƒ­ã‚»ãƒƒã‚µã¯ãƒ“ãƒ‡ã‚ªã§æ¤œå‡ºã•ã‚ŒãŸæ–‡å­—ã‚’ä¸‹è¨˜ã®ã‚ˆã†ãªè¡¨ç¤ºæ™‚é–“ã«åŸºã¥ã„ã¦ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåŒ–ã•ã‚ŒãŸå½¢ã§çµæœå‡ºåŠ›ã™ã‚‹ã€‚çµæœãƒ•ã‚¡ã‚¤ãƒ«ã®å®Œå…¨ç‰ˆã¯ã“ã¡ã‚‰ï¼ˆazuresubs.jsonï¼‰ã‚’å‚ç…§ãã ã•ã„ã€‚\n{ \u0026#34;fragments\u0026#34;: [ { \u0026#34;start\u0026#34;: 0 \u0026#34;interval\u0026#34;: 319319, \u0026#34;duration\u0026#34;: 319319, \u0026#34;events\u0026#34;: [ [ { \u0026#34;language\u0026#34;: \u0026#34;Japanese\u0026#34;, \u0026#34;text\u0026#34;: \u0026#34;Azure ã® å¥‘ ç´„ å†… å®¹ ã‚’ å¤‰ æ›´ ã™ ã‚‹ Microsoft Azure\u0026#34; } ] ] }, { /* fragment1 */ }, { /* fragment2 */ }, ... { /* fragmentN */ } ], \u0026#34;version\u0026#34;: 1, \u0026#34;framerate\u0026#34;: 29.97, \u0026#34;height\u0026#34;: 720, \u0026#34;width\u0026#34;: 1280, \u0026#34;offset\u0026#34;: 0, \u0026#34;timescale\u0026#34;: 30000 } å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨å‡ºåŠ›å½¢å¼å…±ã«è©³ç´°ã¯ã“ã¡ã‚‰ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã„ãŸã ãã¨ã—ã¦Azure Media OCRãƒ¡ãƒ‡ã‚£ã‚¢ãƒ—ãƒ­ã‚»ãƒƒã‚µåˆ©ç”¨ã®æ³¨æ„ç‚¹ã¨ã—ã¦æ¬¡ã®2ã¤ãŒã‚ã‚‹ï¼š\nã€ŒAzure Media OCR Simplified Outputã€ã®è¨˜äº‹ã§ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ã•ã‚Œã¦ã„ã‚‹é€šã‚Š2016å¹´9æœˆã”ã‚ã‹ã‚‰ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å‡ºåŠ›å½¢å¼ãŒä¸Šè¨˜ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒšãƒ¼ã‚¸ã«ã‚ã‚‹è©³ç´°å½¢å¼ã‹ã‚‰ã‚·ãƒ³ãƒ—ãƒ«å½¢å¼ã«å¤‰ã‚ã£ã¦ã„ã‚‹ Azure Media OCRãƒ¡ãƒ‡ã‚£ã‚¢ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼(MP)ã¯ç¾æ™‚ç‚¹ï¼ˆ2016å¹´11æœˆ7æ—¥ï¼‰ã§ã¯æ­£å¼ãƒªãƒªãƒ¼ã‚¹ã§ã¯ãªããƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒªãƒªãƒ¼ã‚¹ å­—å¹•(Closed Caption)ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¸ã®å¤‰æ› ã¾ãšä¸Šè¨˜Azure Media OCRãƒ¡ãƒ‡ã‚£ã‚¢ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼(MP)ã‹ã‚‰å‡ºåŠ›ã•ã‚ŒãŸJSONãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’å…ƒã«å­—å¹•ç”¨ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ã‚ã‚‹WebVTTãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ã„ã‚‹ã€‚ãã—ã¦ã€ŒAzure Media \u0026amp; Cognitiveãƒ‡ãƒ¢:Speech-To-Textã€ã§ã‚‚ç´¹ä»‹ã—ãŸã‚ˆã†ã«HTML5ã®trackã‚¿ã‚°ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã«ã‚ˆã‚‹ãƒ“ãƒ‡ã‚ªãƒ•ã‚¡ã‚¤ãƒ«ã®å­—å¹•è¡¨ç¤ºæ©Ÿèƒ½ä½¿ã£ã¦OCRã®å†…å®¹ã®å­—å¹•è¡¨ç¤ºã‚’å®Ÿç¾ã—ã¦ã„ã‚‹ã€‚æœ¬ãƒ‡ãƒ¢ã§ã¯HTML5ã«ä¸‹è¨˜ã®ã‚ˆã†ã«å‹•ç”»ï¼ˆTransferanAzuresubscriptionJP.mp4ï¼‰ã‚’Videoã‚½ãƒ¼ã‚¹ã¨ã—ã¦trackã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã«WebVTTãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆazuresubs.vttï¼‰ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã€‚\n\u0026lt;video id=\u0026#34;Video1\u0026#34; controls autoplay width=\u0026#34;600\u0026#34;\u0026gt; \u0026lt;source src=\u0026#34;TransferanAzuresubscriptionJP.mp4\u0026#34; srclang=\u0026#34;en\u0026#34; type=\u0026#34;video/mp4\u0026#34;\u0026gt; \u0026lt;track id=\u0026#34;trackJA\u0026#34; src=\u0026#34;azuresubs.vtt\u0026#34; kind=\u0026#34;captions\u0026#34; srclang=\u0026#34;ja\u0026#34; label=\u0026#34;OCR Subtitle\u0026#34; default\u0026gt; \u0026lt;/video\u0026gt; Azure Searchã«ã‚ˆã‚‹å…¨æ–‡æ¤œç´¢ ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸ä¸Šéƒ¨ã«ã‚ã‚‹æ¤œç´¢çª“ã«ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦Goãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‹ã‚‰OCRæŠ½å‡ºã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã‚’å…ƒã«ç”Ÿæˆã•ã‚ŒãŸå­—å¹•ãƒ‡ãƒ¼ã‚¿ã‚’å…¨æ–‡æ¤œç´¢ã—ã¦ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«ãƒãƒƒãƒã—ãŸãƒ†ã‚­ã‚¹ãƒˆã¨ãã®è¡¨ç¤ºæ™‚é–“ã«çµã‚Šè¾¼ã‚€ã“ã¨ãŒã§ãã‚‹ã€‚ä»•çµ„ã¿ã¯ã€ŒAzure Media \u0026amp; Cognitiveãƒ‡ãƒ¢:Speech-To-Textã€ã¨å…¨ãåŒã˜ã§ã€Azure Searchã‚’ä½¿ç”¨ã—ã¦å­—å¹•ãƒ‡ãƒ¼ã‚¿ã‚’è§£æã—ã¦å­—å¹•è¡¨ç¤ºæ™‚é–“ã¨ãã®å¯¾å¿œãƒ†ã‚­ã‚¹ãƒˆã‚’1ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ¬ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦Azure Searchã«ã‚¤ãƒ³ã‚¸ã‚§ã‚¹ãƒˆã—ã¦ãã®ç”Ÿæˆã•ã‚ŒãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«å¯¾ã—ã¦ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…ƒã«å…¨æ–‡æ¤œç´¢ã™ã‚‹ã“ã¨ã§å®Ÿç¾ã—ã¦ã„ã‚‹ã€‚æ¤œç´¢ç”¨ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚¹ã‚­ãƒ¼ãƒã‚‚ã¾ã£ãŸããŠãªã˜ã§æ¬¡ã®ã‚ˆã†ã«å­—å¹•è¡¨ç¤ºæ™‚é–“ã¨ãã®å¯¾å¿œãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒ¬ã‚³ãƒ¼ãƒ‰å˜ä½ã¨ãªã‚‹ã‚ˆã†ã«å®šç¾©ã—ã¦ã„ã‚‹ã€‚\n{ \u0026#34;name\u0026#34;: \u0026#34;ocr\u0026#34;, \u0026#34;fields\u0026#34;: [ { \u0026#34;name\u0026#34;:\u0026#34;id\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;key\u0026#34;: true, \u0026#34;searchable\u0026#34;: false, \u0026#34;filterable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false }, { \u0026#34;name\u0026#34;:\u0026#34;contentid\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;,\u0026#34;searchable\u0026#34;: false, \u0026#34;filterable\u0026#34;:true, \u0026#34;facetable\u0026#34;:false }, { \u0026#34;name\u0026#34;:\u0026#34;beginsec\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.Int32\u0026#34;, \u0026#34;searchable\u0026#34;: false, \u0026#34;filterable\u0026#34;:false, \u0026#34;sortable\u0026#34;:true, \u0026#34;facetable\u0026#34;:false }, { \u0026#34;name\u0026#34;:\u0026#34;begin\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;searchable\u0026#34;: false, \u0026#34;filterable\u0026#34;:false, \u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false }, { \u0026#34;name\u0026#34;:\u0026#34;end\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;searchable\u0026#34;: false, \u0026#34;filterable\u0026#34;:false, \u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false }, { \u0026#34;name\u0026#34;:\u0026#34;caption\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;searchable\u0026#34;: true, \u0026#34;filterable\u0026#34;:false, \u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false, \u0026#34;analyzer\u0026#34;:\u0026#34;ja.microsoft\u0026#34; } ] } ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ä½œæˆæ‰‹é † Githubãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒšãƒ¼ã‚¸Video-OCR-Search-Pythonã®1. Preparationã¨2. Batch executionã‚’å®Ÿæ–½ã„ãŸã ã‘ã‚Œã°OCRæŠ½å‡ºã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã‚’å…ƒã«å­—å¹•ãƒ‡ãƒ¼ã‚¿*.vttãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã€ãã®ãƒ†ã‚­ã‚¹ãƒˆãŒAzure Searchã«æ ¼ç´ã•ã‚Œã¦ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸è¡¨ç¤ºã®ãŸã‚ã®æº–å‚™ã¯å®Œäº†ã™ã‚‹ã€‚æœ€å¾Œã«è¡¨ç¤ºç”¨ã®ãƒšãƒ¼ã‚¸ã‚’ç”Ÿæˆã™ã‚Œã°å®Œäº†ã€‚æœ¬ãƒ‡ãƒ¢ã®è¡¨ç¤ºç”¨ãƒšãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿ã¯ã“ã¡ã‚‰ã§ã€åŸºæœ¬çš„ã«index.htmlã¨search.jsã®å¤‰æ›´ã®ã¿ã§ã„ã‘ã‚‹ã¯ãšã€‚\næœ¬ãƒ‡ãƒ¢ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ã¤ã„ã¦ä½•ã‹å•é¡Œã‚’ç™ºè¦‹ã—ãŸå ´åˆã¯ã“ã¡ã‚‰ã®Github Issueãƒšãƒ¼ã‚¸ã«Issueã¨ã—ã¦ç™»éŒ²ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã‚ã‚‹ã€‚\nEnjoy Video OCR demo!\n","permalink":"https://unofficialism.info/posts/azure-media-cognitive-demos-video-ocr/","summary":"OCRã¨ã¯Optical Character Recognitionã®ç•¥ã§æ—¥æœ¬èªã«ã™ã‚‹ã¨å…‰å­¦æ–‡å­—èªè­˜ã¨è¨³ã•ã‚Œã¦ãŠã‚Šã€ã–ã£ãã‚Šã¨ç”»åƒã®ä¸­ã®æ–‡å­—ã‚’ãƒ†ã‚­ã‚¹ãƒˆã«å¤‰æ›ã™ã‚‹æŠ€è¡“ã®ã“ã¨ã‚’æŒ‡ã™ã€‚ãƒ†ã‚­ã‚¹ãƒˆã«å¤‰æ›ã•ã‚Œã‚‹ã¨ã„ã†ã“ã¨ã¯å‹˜ãŒé‹­ã„çš†ã•ã‚“ã¯ãŠæ°—ã¥ãã ã¨æ€ã†ãŒã€ãƒ†ã‚­ã‚¹ãƒˆã®å…¨æ–‡æ¤œç´¢ã§ã‚ã£ãŸã‚Šã€ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰éŸ³å£°ã¸ã®å¤‰æ›ã€ã•ã‚‰ã«ã¯æ©Ÿæ¢°ç¿»è¨³ã‚’ä½¿ã£ã¦å¤šè¨€èªã¸ã®å¤‰æ›ã¨ã„ã£ãŸå±•é–‹ãŒè€ƒãˆã‚‰ã‚Œã‚‹ã€‚ãã‚“ãªå¯èƒ½æ€§ã‚’ç§˜ã‚ãŸOCRã§ã‚ã‚‹ãŒã€ã“ã“ã§ã¯ãã®OCRã®æŠ€è¡“ã‚’ä½¿ã£ã¦ãƒ“ãƒ‡ã‚ªãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰æŠ½å‡ºã—ãŸãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å…ƒã«ãƒ“ãƒ‡ã‚ªã«å­—å¹•è¡¨ç¤ºã—ãŸã‚Šã€å‹•ç”»ä¸­ã«è¡¨ç¤ºã•ã‚Œã‚‹æ–‡å­—ã‚’å…¨æ–‡æ¤œç´¢ã‚’ã™ã‚‹ãƒ‡ãƒ¢ã‚’ç´¹ä»‹ã—ãŸã„ã€‚å†…å®¹çš„ã«ã¯ã€ŒAzure Media \u0026amp; Cognitiveãƒ‡ãƒ¢:Speech-To-Textã€ã§ç´¹ä»‹ã—ãŸãƒ‡ãƒ¢ã®OCRç‰ˆã¨ã„ã£ãŸã¨ã“ã‚ã€‚\ndemo site source code ä¸»è¦ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã¨æ©Ÿèƒ½ Azure Media OCRãƒ¡ãƒ‡ã‚£ã‚¢ãƒ—ãƒ­ã‚»ãƒƒã‚µã«ã‚ˆã‚‹ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º ã“ã®ãƒ‡ãƒ¢ã§ã¯Azure Media OCRãƒ¡ãƒ‡ã‚£ã‚¢ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼(MP)ã‚’ä½¿ç”¨ã—ã¦ãƒ“ãƒ‡ã‚ªãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æ¤œå‡ºã—ã¦ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ã„ã‚‹ã€‚OCRãƒ¡ãƒ‡ã‚£ã‚¢ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ã¯å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã‚ˆã‚Šãƒ“ãƒ‡ã‚ªè§£æã®æŒ™å‹•ã‚’èª¿æ•´ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ä¸»ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦ã¯æ¤œç´¢å¯¾è±¡ãƒ†ã‚­ã‚¹ãƒˆã®è¨€èªï¼ˆæ—¥æœ¬èªã‚‚ã‚µãƒãƒ¼ãƒˆï¼‰ã€ãƒ†ã‚­ã‚¹ãƒˆã®å‘ãã€ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ¬ãƒ¼ãƒˆã€ãƒ“ãƒ‡ã‚ªãƒ•ãƒ¬ãƒ¼ãƒ å†…ã®ãƒ†ã‚­ã‚¹ãƒˆæ¤œå‡ºå¯¾è±¡ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ãŒã‚ã‚‹ãŒã€æœ¬ãƒ‡ãƒ¢ã§ã®å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆVideo-OCR-Search-Python/src/ocr-detectregion.jsonï¼‰ã¯ä»¥ä¸‹ã®é€šã‚Šæ¤œç´¢å¯¾è±¡è¨€èªã¯æ—¥æœ¬èªã€1ç§’ãŠãã®ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ¬ãƒ¼ãƒˆã€ãƒ†ã‚­ã‚¹ãƒˆæ¤œå‡ºå¯¾è±¡ã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‹ã‚‰ãƒ“ãƒ‡ã‚ªãƒ•ãƒ¬ãƒ¼ãƒ å†…ã®ä¸Šéƒ¨1/4ã‚’çœãè¨­å®šï¼ˆæ¤œå‡ºå¯¾è±¡ã‚’ãƒ•ãƒ¬ãƒ¼ãƒ ãƒˆãƒƒãƒ—ã‹ã‚‰85 pixelä»¥ä¸‹ã‚’å¯¾è±¡ï¼‰ã«ã—ã¦ã„ã‚‹ã€‚\n{ \u0026#34;Version\u0026#34;:\u0026#34;1.0\u0026#34;, \u0026#34;Options\u0026#34;: { \u0026#34;Language\u0026#34;:\u0026#34;Japanese\u0026#34;, \u0026#34;TimeInterval\u0026#34;:\u0026#34;00:00:01.000\u0026#34;, \u0026#34;DetectRegions\u0026#34;: [ {\u0026#34;Left\u0026#34;:\u0026#34;0\u0026#34;,\u0026#34;Top\u0026#34;:\u0026#34;85\u0026#34;,\u0026#34;Width\u0026#34;:\u0026#34;1280\u0026#34;,\u0026#34;Height\u0026#34;:\u0026#34;635\u0026#34;} ] } } ãã—ã¦ã€Azure Media OCRãƒ¡ãƒ‡ã‚£ã‚¢ãƒ—ãƒ­ã‚»ãƒƒã‚µã¯ãƒ“ãƒ‡ã‚ªã§æ¤œå‡ºã•ã‚ŒãŸæ–‡å­—ã‚’ä¸‹è¨˜ã®ã‚ˆã†ãªè¡¨ç¤ºæ™‚é–“ã«åŸºã¥ã„ã¦ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåŒ–ã•ã‚ŒãŸå½¢ã§çµæœå‡ºåŠ›ã™ã‚‹ã€‚çµæœãƒ•ã‚¡ã‚¤ãƒ«ã®å®Œå…¨ç‰ˆã¯ã“ã¡ã‚‰ï¼ˆazuresubs.jsonï¼‰ã‚’å‚ç…§ãã ã•ã„ã€‚\n{ \u0026#34;fragments\u0026#34;: [ { \u0026#34;start\u0026#34;: 0 \u0026#34;interval\u0026#34;: 319319, \u0026#34;duration\u0026#34;: 319319, \u0026#34;events\u0026#34;: [ [ { \u0026#34;language\u0026#34;: \u0026#34;Japanese\u0026#34;, \u0026#34;text\u0026#34;: \u0026#34;Azure ã® å¥‘ ç´„ å†… å®¹ ã‚’ å¤‰ æ›´ ã™ ã‚‹ Microsoft Azure\u0026#34; } ] ] }, { /* fragment1 */ }, { /* fragment2 */ }, .","title":"Video OCR using Azure Media \u0026 Cognitive"},{"content":"ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’éŸ³å£°èªè­˜ã‚¨ãƒ³ã‚¸ãƒ³ã§ãƒ†ã‚­ã‚¹ãƒˆåŒ–ã—ã¦ãã‚Œã‚’å…ƒã«ã‚¹ãƒ”ãƒ¼ãƒæ¤œç´¢ã™ã‚‹ãƒ‡ãƒ¢ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç´¹ä»‹ã—ãŸã„ã€‚ã“ã‚Œã¯éå»ã«de:code2016ã¨ã„ã†ãƒã‚¤ã‚¯ãƒ­ã‚½ãƒ•ãƒˆã®é–‹ç™ºè€…å‘ã‘ã‚¤ãƒ™ãƒ³ãƒˆã§è¡Œã£ãŸãƒ–ãƒ¬ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆã‚»ãƒƒã‚·ãƒ§ãƒ³ã€ŒDEV-18: Azure Search Deep Diveã€ã«ã¦ç´¹ä»‹ã—ãŸãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã‚¹ãƒ”ãƒ¼ãƒæ¤œç´¢ãƒ‡ãƒ¢ã‚’ç°¡ç•¥åŒ–ã—ã¦å†åˆ©ç”¨ã—ã‚„ã™ã„ã‚‚ã®ã«ã—ãŸã‚‚ã®ã§ã‚ã‚‹ã€‚\ndemo site source code ä¸»è¦ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã¨æ©Ÿèƒ½ Azure Media Indexer 2 Previewã«ã‚ˆã‚‹éŸ³å£°ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º ã“ã®ãƒ‡ãƒ¢ã§ã¯Azure Media Indexer 2 Preview ãƒ¡ãƒ‡ã‚£ã‚¢ ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ (MP)ã‚’ä½¿ç”¨ã—ã¦ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã‚’æŠ½å‡ºã—ã¦ã„ã‚‹ã€‚ã“ã®Azure Media Indexer 2 Previewã¯è‡ªç„¶è¨€èªå‡¦ç†(NLP)ã‚„éŸ³å£°èªè­˜ã‚¨ãƒ³ã‚¸ãƒ³ã‚’é§†ä½¿ã—ã¦ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚ˆã‚Šå­—å¹•ç”¨ãƒ‡ãƒ¼ã‚¿ï¼ˆæ™‚é–“ã‚„ãƒ†ã‚­ã‚¹ãƒˆï¼‰ã‚„æ¤œç´¢å¯èƒ½ã«ã™ã‚‹ãŸã‚ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚Indexer 2ã¨ã„ã†åå‰ã®é€šã‚Šå‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã‚ã‚‹Azure Media IndexerãŒå­˜åœ¨ã™ã‚‹ãŒã€ã“ã‚Œã¨æ¯”è¼ƒã™ã‚‹ã¨ã€Azure Media Indexer 2 Previewã¯ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆãŒé«˜é€ŸåŒ–ã•ã‚Œã€ã‚ˆã‚Šå¤šãã®è¨€èªã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ãŒç‰¹å¾´ã§ã‚ã‚‹ã€‚2016å¹´11æœˆ6æ—¥æ™‚ç‚¹ã§è‹±èªã€ã‚¹ãƒšã‚¤ãƒ³èªã€ãƒ•ãƒ©ãƒ³ã‚¹èªã€ãƒ‰ã‚¤ãƒ„èªã€ã‚¤ã‚¿ãƒªã‚¢èªã€ä¸­å›½èªã€ãƒãƒ«ãƒˆã‚¬ãƒ«èªã€ã‚¢ãƒ©ãƒ“ã‚¢èªãªã©ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ï¼ˆæ®‹å¿µãªãŒã‚‰æ—¥æœ¬èªã¯ã¾ã æœªã‚µãƒãƒ¼ãƒˆï¼‰ã€‚\nä¸‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯Azure Media Indexer 2 (Preview)ã§ç”Ÿæˆã•ã‚Œã‚‹TTMLã¨WebVTTã¨ã„ã†ä»£è¡¨çš„ãªå­—å¹•ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€‚\nHTML5ã¨å­—å¹•(Closed Caption) HTML5ã«ã¯trackã‚¿ã‚°ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã‚’ä½¿ã£ã¦ãƒ“ãƒ‡ã‚ªãƒ•ã‚¡ã‚¤ãƒ«ã«å­—å¹•ã‚’è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ãŒæ¨™æº–çš„ã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã€‚æœ¬ãƒ‡ãƒ¢ã§ã¯HTML5ã«ä¸‹è¨˜ã®ã‚ˆã†ã«å‹•ç”»ï¼ˆPython_and_node.js_on_Visual_Studio.mp4ï¼‰ã‚’Videoã‚½ãƒ¼ã‚¹ã¨ã—ã¦trackã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã«å­—å¹•WebVttãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆbuild2016breakout.vttï¼‰ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã€‚\n\u0026lt;video id=\u0026#34;Video1\u0026#34; controls autoplay width=\u0026#34;600\u0026#34;\u0026gt; \u0026lt;source src=\u0026#34;Python_and_node.js_on_Visual_Studio.mp4\u0026#34; srclang=\u0026#34;en\u0026#34; type=\u0026#34;video/mp4\u0026#34;\u0026gt; \u0026lt;track id=\u0026#34;trackJA\u0026#34; src=\u0026#34;build2016breakout.vtt\u0026#34; kind=\u0026#34;captions\u0026#34; srclang=\u0026#34;ja\u0026#34; label=\u0026#34;Closed Captions\u0026#34; default\u0026gt; \u0026lt;/video\u0026gt; Azure Searchã«ã‚ˆã‚‹å…¨æ–‡æ¤œç´¢ ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸ä¸Šéƒ¨ã«ã‚ã‚‹æ¤œç´¢çª“ã«ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦Goãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å­—å¹•ãƒ‡ãƒ¼ã‚¿ã‚’å…¨æ–‡æ¤œç´¢ã—ã¦ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«ãƒãƒƒãƒã—ãŸãƒ†ã‚­ã‚¹ãƒˆã¨ãã®è¡¨ç¤ºæ™‚é–“ã«çµã‚Šè¾¼ã‚€ã“ã¨ãŒã§ãã‚‹ã€‚ã“ã“ã§ã¯å…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã«Azure Searchã‚’ä½¿ç”¨ã—ã€Azure Media Indexer 2 (Preview)ã‚ˆã‚ŠæŠ½å‡ºã•ã‚ŒãŸå­—å¹•ãƒ‡ãƒ¼ã‚¿ã‚’è§£æã—ã¦å­—å¹•è¡¨ç¤ºæ™‚é–“ã¨ãã®å¯¾å¿œãƒ†ã‚­ã‚¹ãƒˆã‚’1ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ¬ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦Azure Searchã«ã‚¤ãƒ³ã‚¸ã‚§ã‚¹ãƒˆã—ã¦ãã®ç”Ÿæˆã•ã‚ŒãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«å¯¾ã—ã¦ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…ƒã«å…¨æ–‡æ¤œç´¢ã™ã‚‹ã“ã¨ã§å®Ÿç¾ã—ã¦ã„ã‚‹ã€‚å­—å¹•ãƒ‡ãƒ¼ã‚¿æ¤œç´¢ç”¨ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚¹ã‚­ãƒ¼ãƒã¯æ¬¡ã®ã‚ˆã†ã«å­—å¹•è¡¨ç¤ºæ™‚é–“ã¨ãã®å¯¾å¿œãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒ¬ã‚³ãƒ¼ãƒ‰å˜ä½ã¨ãªã‚‹ã‚ˆã†ã«å®šç¾©ã—ã¦ã„ã‚‹ã€‚\n{ \u0026#34;name\u0026#34;: \u0026#34;stt\u0026#34;, \u0026#34;fields\u0026#34;: [ { \u0026#34;name\u0026#34;:\u0026#34;id\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;key\u0026#34;: true, \u0026#34;searchable\u0026#34;: false, \u0026#34;filterable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false }, { \u0026#34;name\u0026#34;:\u0026#34;contentid\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;,\u0026#34;searchable\u0026#34;: false, \u0026#34;filterable\u0026#34;:true, \u0026#34;facetable\u0026#34;:false }, { \u0026#34;name\u0026#34;:\u0026#34;beginsec\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.Int32\u0026#34;, \u0026#34;searchable\u0026#34;: false, \u0026#34;filterable\u0026#34;:false, \u0026#34;sortable\u0026#34;:true, \u0026#34;facetable\u0026#34;:false }, { \u0026#34;name\u0026#34;:\u0026#34;begin\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;searchable\u0026#34;: false, \u0026#34;filterable\u0026#34;:false, \u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false }, { \u0026#34;name\u0026#34;:\u0026#34;end\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;searchable\u0026#34;: false, \u0026#34;filterable\u0026#34;:false, \u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false }, { \u0026#34;name\u0026#34;:\u0026#34;caption\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;searchable\u0026#34;: true, \u0026#34;filterable\u0026#34;:false, \u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false, \u0026#34;analyzer\u0026#34;:\u0026#34;en.microsoft\u0026#34; } ] } ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ä½œæˆæ‰‹é † Githubãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒšãƒ¼ã‚¸Video-STT-Search-Pythonã®1. Preparationã¨2. Batch executionã‚’å®Ÿæ–½ã„ãŸã ã‘ã‚Œã°å­—å¹•ãƒ‡ãƒ¼ã‚¿*.vttãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã€ãã®ãƒ†ã‚­ã‚¹ãƒˆãŒAzure Searchã«æ ¼ç´ã•ã‚Œã¦ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸è¡¨ç¤ºã®ãŸã‚ã®æº–å‚™ã¯å®Œäº†ã™ã‚‹ã€‚æœ€å¾Œã«è¡¨ç¤ºç”¨ã®ãƒšãƒ¼ã‚¸ã‚’ç”Ÿæˆã™ã‚Œã°å®Œäº†ã€‚æœ¬ãƒ‡ãƒ¢ã®è¡¨ç¤ºç”¨ãƒšãƒ¼ã‚¸ãƒ‡ãƒ¼ã‚¿ã¯ã“ã¡ã‚‰ã§ã€åŸºæœ¬çš„ã«index.htmlã¨search.jsã®å¤‰æ›´ã®ã¿ã§ã„ã‘ã‚‹ã¯ãšã€‚\næœ¬ãƒ‡ãƒ¢ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«ã¤ã„ã¦ä½•ã‹å•é¡Œã‚’ç™ºè¦‹ã—ãŸå ´åˆã¯ã“ã¡ã‚‰ã®Github Issueãƒšãƒ¼ã‚¸ã«Issueã¨ã—ã¦ç™»éŒ²ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã‚ã‚‹ã€‚\nEnjoy Video Speech-to-text demo!\n","permalink":"https://unofficialism.info/posts/azure-media-cognitive-demos-video-ocr-speech-to-text/","summary":"ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’éŸ³å£°èªè­˜ã‚¨ãƒ³ã‚¸ãƒ³ã§ãƒ†ã‚­ã‚¹ãƒˆåŒ–ã—ã¦ãã‚Œã‚’å…ƒã«ã‚¹ãƒ”ãƒ¼ãƒæ¤œç´¢ã™ã‚‹ãƒ‡ãƒ¢ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç´¹ä»‹ã—ãŸã„ã€‚ã“ã‚Œã¯éå»ã«de:code2016ã¨ã„ã†ãƒã‚¤ã‚¯ãƒ­ã‚½ãƒ•ãƒˆã®é–‹ç™ºè€…å‘ã‘ã‚¤ãƒ™ãƒ³ãƒˆã§è¡Œã£ãŸãƒ–ãƒ¬ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆã‚»ãƒƒã‚·ãƒ§ãƒ³ã€ŒDEV-18: Azure Search Deep Diveã€ã«ã¦ç´¹ä»‹ã—ãŸãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã‚¹ãƒ”ãƒ¼ãƒæ¤œç´¢ãƒ‡ãƒ¢ã‚’ç°¡ç•¥åŒ–ã—ã¦å†åˆ©ç”¨ã—ã‚„ã™ã„ã‚‚ã®ã«ã—ãŸã‚‚ã®ã§ã‚ã‚‹ã€‚\ndemo site source code ä¸»è¦ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã¨æ©Ÿèƒ½ Azure Media Indexer 2 Previewã«ã‚ˆã‚‹éŸ³å£°ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º ã“ã®ãƒ‡ãƒ¢ã§ã¯Azure Media Indexer 2 Preview ãƒ¡ãƒ‡ã‚£ã‚¢ ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒ¼ (MP)ã‚’ä½¿ç”¨ã—ã¦ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã‚’æŠ½å‡ºã—ã¦ã„ã‚‹ã€‚ã“ã®Azure Media Indexer 2 Previewã¯è‡ªç„¶è¨€èªå‡¦ç†(NLP)ã‚„éŸ³å£°èªè­˜ã‚¨ãƒ³ã‚¸ãƒ³ã‚’é§†ä½¿ã—ã¦ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚ˆã‚Šå­—å¹•ç”¨ãƒ‡ãƒ¼ã‚¿ï¼ˆæ™‚é–“ã‚„ãƒ†ã‚­ã‚¹ãƒˆï¼‰ã‚„æ¤œç´¢å¯èƒ½ã«ã™ã‚‹ãŸã‚ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚Indexer 2ã¨ã„ã†åå‰ã®é€šã‚Šå‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã‚ã‚‹Azure Media IndexerãŒå­˜åœ¨ã™ã‚‹ãŒã€ã“ã‚Œã¨æ¯”è¼ƒã™ã‚‹ã¨ã€Azure Media Indexer 2 Previewã¯ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆãŒé«˜é€ŸåŒ–ã•ã‚Œã€ã‚ˆã‚Šå¤šãã®è¨€èªã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ãŒç‰¹å¾´ã§ã‚ã‚‹ã€‚2016å¹´11æœˆ6æ—¥æ™‚ç‚¹ã§è‹±èªã€ã‚¹ãƒšã‚¤ãƒ³èªã€ãƒ•ãƒ©ãƒ³ã‚¹èªã€ãƒ‰ã‚¤ãƒ„èªã€ã‚¤ã‚¿ãƒªã‚¢èªã€ä¸­å›½èªã€ãƒãƒ«ãƒˆã‚¬ãƒ«èªã€ã‚¢ãƒ©ãƒ“ã‚¢èªãªã©ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ï¼ˆæ®‹å¿µãªãŒã‚‰æ—¥æœ¬èªã¯ã¾ã æœªã‚µãƒãƒ¼ãƒˆï¼‰ã€‚\nä¸‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯Azure Media Indexer 2 (Preview)ã§ç”Ÿæˆã•ã‚Œã‚‹TTMLã¨WebVTTã¨ã„ã†ä»£è¡¨çš„ãªå­—å¹•ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€‚\nHTML5ã¨å­—å¹•(Closed Caption) HTML5ã«ã¯trackã‚¿ã‚°ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã‚’ä½¿ã£ã¦ãƒ“ãƒ‡ã‚ªãƒ•ã‚¡ã‚¤ãƒ«ã«å­—å¹•ã‚’è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ãŒæ¨™æº–çš„ã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã€‚æœ¬ãƒ‡ãƒ¢ã§ã¯HTML5ã«ä¸‹è¨˜ã®ã‚ˆã†ã«å‹•ç”»ï¼ˆPython_and_node.js_on_Visual_Studio.mp4ï¼‰ã‚’Videoã‚½ãƒ¼ã‚¹ã¨ã—ã¦trackã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã«å­—å¹•WebVttãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆbuild2016breakout.vttï¼‰ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã€‚\n\u0026lt;video id=\u0026#34;Video1\u0026#34; controls autoplay width=\u0026#34;600\u0026#34;\u0026gt; \u0026lt;source src=\u0026#34;Python_and_node.js_on_Visual_Studio.mp4\u0026#34; srclang=\u0026#34;en\u0026#34; type=\u0026#34;video/mp4\u0026#34;\u0026gt; \u0026lt;track id=\u0026#34;trackJA\u0026#34; src=\u0026#34;build2016breakout.vtt\u0026#34; kind=\u0026#34;captions\u0026#34; srclang=\u0026#34;ja\u0026#34; label=\u0026#34;Closed Captions\u0026#34; default\u0026gt; \u0026lt;/video\u0026gt; Azure Searchã«ã‚ˆã‚‹å…¨æ–‡æ¤œç´¢ ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸ä¸Šéƒ¨ã«ã‚ã‚‹æ¤œç´¢çª“ã«ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦Goãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ãƒ“ãƒ‡ã‚ªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å­—å¹•ãƒ‡ãƒ¼ã‚¿ã‚’å…¨æ–‡æ¤œç´¢ã—ã¦ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«ãƒãƒƒãƒã—ãŸãƒ†ã‚­ã‚¹ãƒˆã¨ãã®è¡¨ç¤ºæ™‚é–“ã«çµã‚Šè¾¼ã‚€ã“ã¨ãŒã§ãã‚‹ã€‚ã“ã“ã§ã¯å…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã«Azure Searchã‚’ä½¿ç”¨ã—ã€Azure Media Indexer 2 (Preview)ã‚ˆã‚ŠæŠ½å‡ºã•ã‚ŒãŸå­—å¹•ãƒ‡ãƒ¼ã‚¿ã‚’è§£æã—ã¦å­—å¹•è¡¨ç¤ºæ™‚é–“ã¨ãã®å¯¾å¿œãƒ†ã‚­ã‚¹ãƒˆã‚’1ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ¬ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦Azure Searchã«ã‚¤ãƒ³ã‚¸ã‚§ã‚¹ãƒˆã—ã¦ãã®ç”Ÿæˆã•ã‚ŒãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«å¯¾ã—ã¦ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…ƒã«å…¨æ–‡æ¤œç´¢ã™ã‚‹ã“ã¨ã§å®Ÿç¾ã—ã¦ã„ã‚‹ã€‚å­—å¹•ãƒ‡ãƒ¼ã‚¿æ¤œç´¢ç”¨ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚¹ã‚­ãƒ¼ãƒã¯æ¬¡ã®ã‚ˆã†ã«å­—å¹•è¡¨ç¤ºæ™‚é–“ã¨ãã®å¯¾å¿œãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒ¬ã‚³ãƒ¼ãƒ‰å˜ä½ã¨ãªã‚‹ã‚ˆã†ã«å®šç¾©ã—ã¦ã„ã‚‹ã€‚\n{ \u0026#34;name\u0026#34;: \u0026#34;stt\u0026#34;, \u0026#34;fields\u0026#34;: [ { \u0026#34;name\u0026#34;:\u0026#34;id\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.","title":"Speech-To-Text with Azure Media \u0026 Cognitive Services"},{"content":"UPDATED 2016-10-31: paramsã‚ªãƒ—ã‚·ãƒ§ãƒ³ + Bash Completionè¿½åŠ \nã¿ã‚“ãªå¤§å¥½ãSSHã¨Azureã®ãŠè©±ã—ã€‚ç‰©ç†ã‚µãƒ¼ãƒã€EC2/ä»®æƒ³ãƒã‚·ãƒ³ã€ã‚³ãƒ³ãƒ†ãƒŠãªã©ãªã‚“ã§ã‚‚ã‚ˆã„ãŒãã®ä¸Šã«Linuxã‚µãƒ¼ãƒã‚’ãŸã¦ãŸã‚‰ã¾ãšã‚„ã‚‹ã“ã¨ã®1ã¤ã«SSHãƒ­ã‚°ã‚¤ãƒ³ã®ãŸã‚ã«ãã®IPã‚¢ãƒ‰ãƒ¬ã‚¹èª¿ã¹ã¦~/.ssh/configã«ãã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’è¿½åŠ ã—ã¦ã‚„ã‚‹ã“ã¨ãŒã‚ã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚ã“ã®ä½œæ¥­ã€ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ•°ãŒå°‘ãªã‘ã‚Œã°å¤§ã—ãŸã“ã¨ã¯ãªã„ã‚‚ã®ã®ã€è¿½åŠ å¯¾è±¡ã®ãƒ›ã‚¹ãƒˆãŒå¤§é‡ã«ã‚ã‚‹å ´åˆã¯ã‹ãªã‚Šé¢å€’ãªä½œæ¥­ã«ãªã£ã¦ãã¾ã™ã€‚ã•ã‚‰ã«DHCPãªã©ã§ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å‹•çš„ã«å–å¾—ã™ã‚‹ã‚ˆã†ãªè¨­å®šã§ã‚ã‚Œã°ã‚µãƒ¼ãƒã®ä¸Šã’ä¸‹ã’ã®ãŸã³ã«IPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå¤‰ã‚ã£ã¦ãã‚‹ã®ã§~/.ssh/configã®æ›´æ–°ãŒå¿…è¦ã«ãªã£ã¦ãã¦ã€ã©ã†ã—ã‚ˆã†ã‚‚ãªãé¢å€’ã«ãªã£ã¦ãã¾ã™ã€‚ã“ã†ã„ã£ãŸå˜ç´”ã§ã©ã†ã—ã‚ˆã†ã‚‚ãªãã¤ã¾ã‚‰ãªã„ä½œæ¥­ã¯è‡ªå‹•åŒ–ã—ãŸã„ã§ã™ã‚ˆã­ï¼Ÿ ã“ã“ã§ã¯ãã‚“ãªçš†ã•ã‚“ã®ãŸã‚ã«azuresshconfigã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’ç´¹ä»‹ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚\nã“ã‚Œã¯çš†ã•ã‚“ã®Azureã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ä¸‹ã«ä½œã‚‰ã‚ŒãŸä»®æƒ³ãƒã‚·ãƒ³ä¸€è¦§ï¼ˆARMã«é™ã‚‹ï¼‰ã®æƒ…å ±ã‚’å–å¾—ã—ã¦å„ä»®æƒ³ãƒã‚·ãƒ³ã”ã¨ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼æƒ…å ±ï¼ˆãƒã‚·ãƒ³åã¨IPã‚¢ãƒ‰ãƒ¬ã‚¹ï¼‰ã‚’~/.ssh/configã«è¿½åŠ ãƒ»æ›´æ–°ã—ã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã€‚æ–°è¦ã«ä»®æƒ³ãƒã‚·ãƒ³ã‚’è¿½åŠ ã—ãŸéš›ã‚„ã€ä»®æƒ³ãƒã‚·ãƒ³ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒè¿½åŠ ã—ãŸéš›ã«ã¯azuresshconfigã‚’å®Ÿè¡Œã—ã¦ã‚ã’ã‚‹ã“ã¨ã§~/.ssh/configãŒæœ€æ–°ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼æƒ…å ±ã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã€å„ãƒã‚·ãƒ³ã«ãƒã‚·ãƒ³åã§SSHãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\nã¡ãªã¿ã«ã€~/.ssh/configã¨ã¯ä½•ã§ã™ã‹ï¼Ÿã¨ã„ã†äººã¯Qiitaã®è¨˜äº‹ã€Œ~/.ssh/configã«ã¤ã„ã¦ã€ãŒã¨ã¦ã‚‚åˆ†ã‹ã‚Šã‚„ã™ãæ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§å‚è€ƒã«ãªã‚‹ã‹ã¨ã€‚\nã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ãƒ„ãƒ¼ãƒ«pipã‚’ä½¿ã£ã¦azuresshconfigã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã«ä½•ã‹ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€ã“ã¡ã‚‰ã®ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã„ãŸã ãç‰¹ã«è©²å½“ã™ã‚‹äº‹è±¡ãŒãªã„ã‹ç¢ºèªãã ã•ã„ã€‚\n$ pip install azuresshconfig è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç·¨é›†ï¼ˆã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ«ï¼‰ $ vi $HOME/.azure/azuresshconfig.json { \u0026#34;subscription_id\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;client_id\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;client_scret\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;tenant_id\u0026#34;: \u0026#34;\u0026#34; } ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ«ã‚’ä½œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ«ã®ä½œã‚Šæ–¹ãŒåˆ†ã‹ã‚‰ãªã„äººã€ã¨ã£ã¦ã‚‚ã‚ˆã„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒã‚ã‚Šã¾ã™ã€‚ã“ã¡ã‚‰ã‚’å‚ç…§ãã ã•ã„ï¼šã€ŒUse Azure CLI to create a service principal to access resourcesã€\nä½¿ã„æ–¹ azuresshconfig --help usage: azuresshconfig.py [-h] [--version] [--init] [--profile PROFILE] [--user USER] [--identityfile IDENTITYFILE] [--private] [--resourcegroups RESOURCEGROUPS] [--params PARAMS] This program generates SSH config from Azure ARM VM inventry in subscription optional arguments: -h, --help show this help message and exit --version show program\u0026#39;s version number and exit --init Create template client profile at $HOME/.azure/azuresshconfig.json only if there is no existing one --profile PROFILE Specify azure client profile file to use ($HOME/.azure/azuresshconfig.json by default) --user USER SSH username to use for all hosts --identityfile IDENTITYFILE SSH identity file to use for all hosts --private Use private IP addresses (Public IP is used by default) --resourcegroups RESOURCEGROUPS A comma-separated list of resource group to be considered for ssh-config generation (all resource groups by default) --params PARAMS Any ssh-config params you want to add with query- string format: key1=value1\u0026amp;key2=value2\u0026amp;... å®Ÿè¡Œã™ã‚‹ 1. ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æŒ‡å®šãªã—ã§å®Ÿè¡Œ $ azuresshconfig ~/.ssh/configã«ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«### AZURE-SSH-CONFIG BEGIN ### ï½ ### AZURE-SSH-CONFIG END ###ã®ãƒ–ãƒ­ãƒƒã‚¯å†…ã«ãƒã‚·ãƒ³åã¨ãã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼šãƒ‘ãƒ–ãƒªãƒƒã‚¯ï¼‰ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ä¸€è¦§ãŒè¿½åŠ ãƒ»æ›´æ–°ã•ã‚Œã¾ã™ã€‚\n$ cat ~/.ssh/config ### AZURE-SSH-CONFIG BEGIN ### Host myvm1 HostName 40.74.124.30 Host myvm2 HostName 40.74.116.134 .... ### AZURE-SSH-CONFIG END ### 2. SSHãƒ¦ãƒ¼ã‚¶ã¨éµæŒ‡å®š $ azuresshconfig --user yoichika --identityfile ~/.ssh/id_rsa ~/.ssh/configã«ã¯å„ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã«IPã‚¢ãƒ‰ãƒ¬ã‚¹ã«åŠ ãˆã¦ãƒ¦ãƒ¼ã‚¶åã¨éµã®ãƒ‘ã‚¹æƒ…å ±ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚\n$ cat ~/.ssh/config ### AZURE-SSH-CONFIG BEGIN ### Host myvm1 HostName 40.74.124.30 IdentityFile /home/yoichika/.ssh/id_rsa User yoichika Host myvm2 HostName 40.74.116.134 IdentityFile /home/yoichika/.ssh/id_rsa User yoichika .... ### AZURE-SSH-CONFIG END ### 3. ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆIPã‚’æŒ‡å®š $ azuresshconfig --user yoichika --identityfile ~/.ssh/id_rsa --private privateã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã¦å®Ÿè¡Œã™ã‚‹ã“ã¨ã§~/.ssh/configã®å„ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã«ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯IPã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã¯ãªãã¦ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚\n4. ãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—ã§çµã‚‹ $ azuresshconfig --user yoichika --identityfile ~/.ssh/id_rsa --resourcegroups mygroup1,mygroup2 resourcegroupsã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§æŒ‡å®šã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—ã«æ‰€å±ã™ã‚‹ä»®æƒ³ãƒã‚·ãƒ³ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã®ã¿ãŒ~/.ssh/configã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚\n5. è¿½åŠ ssh-configãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æŒ‡å®š $ azuresshconfig.py --user yoichika \\ --identityfile ~/.ssh/id_rsa \\ --params \u0026#34;Port=2222\u0026amp;Protocol=2\u0026amp;UserKnownHostsFile=~/.ssh/known_hosts\u0026amp;ForwardAgent=yes\u0026#34; paramsã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ãã®ä»–æŒ‡å®šå¯èƒ½ãªssh-configãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¸Šè¨˜ã®ã‚ˆã†ã«paramsã«ssh-configã®Portã€Protocolã€UserKnownHostsFileã€ForwardAgentã‚­ãƒ¼ã¨å€¤ã‚’ã‚»ãƒƒãƒˆã™ã‚‹ã“ã¨ã§æ¬¡ã®ã‚ˆã†ã«å‡ºåŠ›ã•ã‚Œã‚‹ssh-configã«æŒ‡å®šã—ãŸã‚­ãƒ¼ã¨å€¤ãŒã‚»ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚\n$ cat ~/.ssh/config ### AZURE-SSH-CONFIG BEGIN ### Host myvm1 HostName 40.74.124.30 IdentityFile ~/.ssh/id_rsa User yoichika Port 2222 Protocol 2 UserKnownHostsFile ~/.ssh/known_hosts ForwardAgent yes Host myvm2 HostName 40.74.116.134 IdentityFile /home/yoichika/.ssh/id_rsa User yoichika Port 2222 Protocol 2 UserKnownHostsFile ~/.ssh/known_hosts ForwardAgent yes .... ### AZURE-SSH-CONFIG END ### Shell Completion Bashã§ã®è£œå®Œ æ¬¡ã®ã‚ˆã†ã«bash/azuresshconfig_completion.bashã‚’bashèµ·å‹•æ™‚ã«èª­ã¿è¾¼ã¾ã›ã¦ã‚ã’ã‚‹ã“ã¨ã§azuresshconfigã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è£œå®ŒãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™.\n# copy this under either of following directories $ cp azuresshconfig_completion.bash (/etc/bash_completion.d | /usr/local/etc/bash_completion.d | ~/bash_completion.d)` # or append \u0026#39;source /path/to/azuresshconfig_completion.bash\u0026#39; to .bashrc like this $ echo \u0026#39;source /path/to/azuresshconfig_completion.bash\u0026#39; \u0026gt;\u0026gt; .bashrc æ¬¡ã®ã‚ˆã†ã«tabã§azuresshconfigã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è£œå®Œã‚’è¡Œã„ã¾ã™ã€‚\n$ azuresshconfig -[tab] -h --identityfile --params --profile --user --help --init --private --resourcegroups $ azuresshconfig --i[tab] --identityfile --init $ azuresshconfig --p[tab] --params --private --profile $ azuresshconfig --user [tab] $ azuresshconfig --user \u0026lt;ssh_user\u0026gt; $ azuresshconfig --user \u0026lt;ssh_user\u0026gt; --identityfile [tab] $ azuresshconfig --user \u0026lt;ssh_user\u0026gt; --identityfile \u0026lt;ssh_identity_file\u0026gt; ãã®ä»– ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã®ã‚¨ãƒ©ãƒ¼ã‚„å®Ÿè¡Œæ™‚ã®ã‚¨ãƒ©ãƒ¼ã«ã¤ã„ã¦ã¯ã“ã¡ã‚‰ã«è¦‹ã¤ã‘æ¬¡ç¬¬äº‹è±¡ã¨ãã®å¯¾å¿œæ–¹æ³•ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚ https://github.com/yokawasa/azure-ssh-config/blob/master/Issues.md\nã‚‚ã—ãƒã‚°ã‚’è¦‹ã¤ã‘ãŸã‚Šã€è¿½åŠ æ©Ÿèƒ½ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã‚ã‚‹å ´åˆã«ã“ã¡ã‚‰ã«Issueè¿½åŠ ãã ã•ã„ã€‚é ‘å¼µã£ã¦æ™‚é–“ã‚’ã¿ã¤ã‘ã¦å¯¾å¿œã—ã¾ã™ã€‚ https://github.com/yokawasa/azure-ssh-config/issues\nLINKS https://github.com/yokawasa/azure-ssh-config https://pypi.python.org/pypi/azuresshconfig/ Use Azure CLI to create a service principal to access resources azuresshconfig makes your SSH life on Azure easy!\n","permalink":"https://unofficialism.info/posts/azuresshconfig/","summary":"UPDATED 2016-10-31: paramsã‚ªãƒ—ã‚·ãƒ§ãƒ³ + Bash Completionè¿½åŠ \nã¿ã‚“ãªå¤§å¥½ãSSHã¨Azureã®ãŠè©±ã—ã€‚ç‰©ç†ã‚µãƒ¼ãƒã€EC2/ä»®æƒ³ãƒã‚·ãƒ³ã€ã‚³ãƒ³ãƒ†ãƒŠãªã©ãªã‚“ã§ã‚‚ã‚ˆã„ãŒãã®ä¸Šã«Linuxã‚µãƒ¼ãƒã‚’ãŸã¦ãŸã‚‰ã¾ãšã‚„ã‚‹ã“ã¨ã®1ã¤ã«SSHãƒ­ã‚°ã‚¤ãƒ³ã®ãŸã‚ã«ãã®IPã‚¢ãƒ‰ãƒ¬ã‚¹èª¿ã¹ã¦~/.ssh/configã«ãã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’è¿½åŠ ã—ã¦ã‚„ã‚‹ã“ã¨ãŒã‚ã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚ã“ã®ä½œæ¥­ã€ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ•°ãŒå°‘ãªã‘ã‚Œã°å¤§ã—ãŸã“ã¨ã¯ãªã„ã‚‚ã®ã®ã€è¿½åŠ å¯¾è±¡ã®ãƒ›ã‚¹ãƒˆãŒå¤§é‡ã«ã‚ã‚‹å ´åˆã¯ã‹ãªã‚Šé¢å€’ãªä½œæ¥­ã«ãªã£ã¦ãã¾ã™ã€‚ã•ã‚‰ã«DHCPãªã©ã§ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å‹•çš„ã«å–å¾—ã™ã‚‹ã‚ˆã†ãªè¨­å®šã§ã‚ã‚Œã°ã‚µãƒ¼ãƒã®ä¸Šã’ä¸‹ã’ã®ãŸã³ã«IPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå¤‰ã‚ã£ã¦ãã‚‹ã®ã§~/.ssh/configã®æ›´æ–°ãŒå¿…è¦ã«ãªã£ã¦ãã¦ã€ã©ã†ã—ã‚ˆã†ã‚‚ãªãé¢å€’ã«ãªã£ã¦ãã¾ã™ã€‚ã“ã†ã„ã£ãŸå˜ç´”ã§ã©ã†ã—ã‚ˆã†ã‚‚ãªãã¤ã¾ã‚‰ãªã„ä½œæ¥­ã¯è‡ªå‹•åŒ–ã—ãŸã„ã§ã™ã‚ˆã­ï¼Ÿ ã“ã“ã§ã¯ãã‚“ãªçš†ã•ã‚“ã®ãŸã‚ã«azuresshconfigã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’ç´¹ä»‹ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚\nã“ã‚Œã¯çš†ã•ã‚“ã®Azureã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ä¸‹ã«ä½œã‚‰ã‚ŒãŸä»®æƒ³ãƒã‚·ãƒ³ä¸€è¦§ï¼ˆARMã«é™ã‚‹ï¼‰ã®æƒ…å ±ã‚’å–å¾—ã—ã¦å„ä»®æƒ³ãƒã‚·ãƒ³ã”ã¨ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼æƒ…å ±ï¼ˆãƒã‚·ãƒ³åã¨IPã‚¢ãƒ‰ãƒ¬ã‚¹ï¼‰ã‚’~/.ssh/configã«è¿½åŠ ãƒ»æ›´æ–°ã—ã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã€‚æ–°è¦ã«ä»®æƒ³ãƒã‚·ãƒ³ã‚’è¿½åŠ ã—ãŸéš›ã‚„ã€ä»®æƒ³ãƒã‚·ãƒ³ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒè¿½åŠ ã—ãŸéš›ã«ã¯azuresshconfigã‚’å®Ÿè¡Œã—ã¦ã‚ã’ã‚‹ã“ã¨ã§~/.ssh/configãŒæœ€æ–°ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼æƒ…å ±ã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã€å„ãƒã‚·ãƒ³ã«ãƒã‚·ãƒ³åã§SSHãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\nã¡ãªã¿ã«ã€~/.ssh/configã¨ã¯ä½•ã§ã™ã‹ï¼Ÿã¨ã„ã†äººã¯Qiitaã®è¨˜äº‹ã€Œ~/.ssh/configã«ã¤ã„ã¦ã€ãŒã¨ã¦ã‚‚åˆ†ã‹ã‚Šã‚„ã™ãæ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§å‚è€ƒã«ãªã‚‹ã‹ã¨ã€‚\nã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ãƒ„ãƒ¼ãƒ«pipã‚’ä½¿ã£ã¦azuresshconfigã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã«ä½•ã‹ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€ã“ã¡ã‚‰ã®ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã„ãŸã ãç‰¹ã«è©²å½“ã™ã‚‹äº‹è±¡ãŒãªã„ã‹ç¢ºèªãã ã•ã„ã€‚\n$ pip install azuresshconfig è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç·¨é›†ï¼ˆã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ«ï¼‰ $ vi $HOME/.azure/azuresshconfig.json { \u0026#34;subscription_id\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;client_id\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;client_scret\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;tenant_id\u0026#34;: \u0026#34;\u0026#34; } ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ«ã‚’ä½œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ«ã®ä½œã‚Šæ–¹ãŒåˆ†ã‹ã‚‰ãªã„äººã€ã¨ã£ã¦ã‚‚ã‚ˆã„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒã‚ã‚Šã¾ã™ã€‚ã“ã¡ã‚‰ã‚’å‚ç…§ãã ã•ã„ï¼šã€ŒUse Azure CLI to create a service principal to access resourcesã€\nä½¿ã„æ–¹ azuresshconfig --help usage: azuresshconfig.py [-h] [--version] [--init] [--profile PROFILE] [--user USER] [--identityfile IDENTITYFILE] [--private] [--resourcegroups RESOURCEGROUPS] [--params PARAMS] This program generates SSH config from Azure ARM VM inventry in subscription optional arguments: -h, --help show this help message and exit --version show program\u0026#39;s version number and exit --init Create template client profile at $HOME/.","title":"Making SSH lives in Azure easier with azuresshconfig"},{"content":"Here is a list of embulk plugins that you can leverage to transfer your data between Microsoft Azure Services and various other databases/storages/cloud services.\nPlugin Name Target Azure Services Note embulk-output-azure_blob_storage Blob Storage Embulk output plugin that stores files onto Microsoft Azure Blob Storage embulk-input-azure_blob_storage Blob Storage Embulk input plugin that reads files stored on Microsoft Azure Blob Storage embulk-output-sqlserver SQL Databases, SQL DWH Embulk output plugin that Inserts or updates records to SQL server type of services like SQL DB/SQL DWH embulk-input-sqlserver SQL Databases, SQL DWH Embulk input plugin that selects records from SQL type of services like SQL DB/SQL DWH embulk-output-documentdb Comos DB Embulk output plugin that dumps records to Azure Cosmos DB embulk-output-azuresearch Azure Search Embulk output plugin that dumps records to Azure Search (as of Aug 30, 2016)\nFor embulk, check this site: https://github.com/embulk/embulk\n","permalink":"https://unofficialism.info/posts/embulk-plugins-for-microsoft-azure-services/","summary":"Here is a list of embulk plugins that you can leverage to transfer your data between Microsoft Azure Services and various other databases/storages/cloud services.\nPlugin Name Target Azure Services Note embulk-output-azure_blob_storage Blob Storage Embulk output plugin that stores files onto Microsoft Azure Blob Storage embulk-input-azure_blob_storage Blob Storage Embulk input plugin that reads files stored on Microsoft Azure Blob Storage embulk-output-sqlserver SQL Databases, SQL DWH Embulk output plugin that Inserts or updates records to SQL server type of services like SQL DB/SQL DWH embulk-input-sqlserver SQL Databases, SQL DWH Embulk input plugin that selects records from SQL type of services like SQL DB/SQL DWH embulk-output-documentdb Comos DB Embulk output plugin that dumps records to Azure Cosmos DB embulk-output-azuresearch Azure Search Embulk output plugin that dumps records to Azure Search (as of Aug 30, 2016)","title":"embulk plugins for Microsoft Azure Services"},{"content":"Iâ€™d like to announce fluent-plugin-documentdb finally supports Azure DocumentDB Partitioned collections for higher storage and throughput. If you\u0026rsquo;re not familiar with fluent-plugin-documentdb, read my previous article before move on.\nPartitioned collections is kick-ass feature that I had wanted to support in fluent-plugin-documentdb since the feature came out public (see the announcement). For big fan of fluent-plugin-documentdb, sorry for keeping you waiting for such a long time :-) If I may make excuses, I would say I haven\u0026rsquo;t had as much time on the project, and I had to do ruby client implementation of Partitioned collections by myself as there is no official DocumentDB Ruby SDK that supports it (As a result I\u0026rsquo;ve created tiny Ruby DocumentDB client libraries that support the feature. Check this out if you\u0026rsquo;re interested).\nWhat are Partitioned collections? According to official documentation, Partitioned collections can span multiple partitions and support very large amounts of storage and throughput. You must specify a partition key for the collection. Partitioned collections can support larger data volumes and process more requests compared to Single-partitioned collection. Partitioned collections support up to 250 GB of storage and 250,000 request units per second of provisioned throughput[Updated Aug 21, 2016] (@arkramac pointed that out for me) Partitioned collections support unlimited storage and throughput. 250GB storage and 250k req/sec are soft cap. You can increase these limits by contacting and asking Azure support.\nOn the other hand, Single-partition collections have lower price options and the ability to query and perform transactions across all collection data. They have the scalability and storage limits of a single partition. You do not have to specify a partition key for these collections.\nCreation of Partitioned collections You can create Partitioned collections via the Azure portal, REST API ( \u0026gt;= version 2015-12-16), and client SDKs in .NET, Node.js, Java, and Python. In addition, you let fluent-plugin-documentdb create Partitioned collections automatically by adding the following configuration options upon the ones for single-partitioned collection in fluentd.conf:\nauto_create_collection true partitioned_collection true partition_key [partition key for the collection] offer_throughput [Offer throughtput value: must be more than and equals to 10100. See this for more info on offer throughtput in creating collection] It creates a partitioned collection as you configure in starting the plugin if not exist at that time.\nConfiguration Example Suppose that you want to read Apache access log as source for fluentd, and that you pick \u0026ldquo;host\u0026rdquo; as a partition Key for the collection, you can configure the plugin like this following:\n\u0026lt;source\u0026gt; @type tail # input plugin path /var/log/apache2/access.log # monitoring file pos_file /tmp/fluentd_pos_file # position file format apache # format tag documentdb.access # tag \u0026lt;/source\u0026gt; \u0026lt;match documentdb.*\u0026gt; @type documentdb docdb_endpoint https://yoichikademo.documents.azure.com:443/ docdb_account_key Tl1xykQxnExUisJ+BXwbbaC8NtUqYVE9kUDXCNust5aYBduhui29Xtxz3DLP88PayjtgtnARc1PW+2wlA6jCJw== docdb_database mydb docdb_collection my-partitioned-collection auto_create_database true auto_create_collection true partitioned_collection true partition_key host offer_throughput 10100 localtime true time_format %Y%m%d-%H:%M:%S add_time_field true time_field_name time add_tag_field true tag_field_name tag \u0026lt;/match\u0026gt; Basically that\u0026rsquo;s all additional configuration for Partitioned collections. Please refer to my previous article for the rest of setup and running work for the plugin.\nHappy log collections with fluent-plugin-documentdb!!\nLINKS https://github.com/yokawasa/fluent-plugin-documentdb https://rubygems.org/gems/fluent-plugin-documentdb Partitioning and scaling in Azure DocumentDB Performance levels in DocumentDB ","permalink":"https://unofficialism.info/posts/fluent-plugin-documentdb-supports-partitioned-collections/","summary":"Iâ€™d like to announce fluent-plugin-documentdb finally supports Azure DocumentDB Partitioned collections for higher storage and throughput. If you\u0026rsquo;re not familiar with fluent-plugin-documentdb, read my previous article before move on.\nPartitioned collections is kick-ass feature that I had wanted to support in fluent-plugin-documentdb since the feature came out public (see the announcement). For big fan of fluent-plugin-documentdb, sorry for keeping you waiting for such a long time :-) If I may make excuses, I would say I haven\u0026rsquo;t had as much time on the project, and I had to do ruby client implementation of Partitioned collections by myself as there is no official DocumentDB Ruby SDK that supports it (As a result I\u0026rsquo;ve created tiny Ruby DocumentDB client libraries that support the feature.","title":"fluent-plugin-documentdb supports Partitioned collections"},{"content":"In this article, I\u0026rsquo;d like to introduces a solution to collect logs and store them into Azure DocumentDB using fluentd and its plugin, fluent-plugin-documentdb.\nAzure DocumentDB is a managed NoSQL database service provided by Microsoft Azure. It\u0026rsquo;s schemaless, natively support JSON, very easy-to-use, very fast, highly reliable, and enables rapid deployment, you name it. Fluentd is an open source data collector, which lets you unify the data collection and consumption for a better use and understanding of data. fluent-plugin-documentdb is fluentd output plugin that enables to store event collections into Azure DocumentDB.\nThis article shows how to\nCollect Apache httpd logs across web servers Ship the collected logs into the aggregator Fluentd in near real-time Store the collected logs into DocumentDB Utilize the collected log data stored on Document DB for advanced scenarios - like archiving the data to Azure Storage, doing Big data analysis, visualizing the data with PowerBI, and so forth Pre-requisites A basic understanding of fluentd - if you\u0026rsquo;re not familiar with fluentd, fluentd quickstart guide is good starting point Azure subscription - you need to have Azure subscription that grants you access to Microsoft Azure services, and under which you can create DocumentDB cluster. If you don\u0026rsquo;t have yet click here to create it Setup: Azure DocumentDB To use Azure DocumentDB, you must create a DocumentDB database account using either the Azure portal, Azure Resource Manager templates, or Azure command-line interface (CLI). In addition, you must have a database and a collection to which fluent-plugin-documentdb writes event-stream out. Here are instructions:\nCreate a DocumentDB database account using the Azure portal, or Azure Resource Manager templates and Azure CLI How to create a database for DocumentDB Create a DocumentDB collection Setup: Fluentd Aggregator First of all, install Fluentd. The following shows how to install Fluentd using Ruby gem packger but if you are not using Ruby Gem for the installation, please refer to this installation guide where you can find many other ways to install Fluentd on many platforms.\n# install fluentd $ sudo gem install fluentd --no-ri --no-rdoc # create fluent.conf $ fluentd --setup Also, install fluent-plugin-documentdb for fluentd aggregator to store collected logs data into Azure DocumentDB.\n$ sudo gem install fluent-plugin-documentdb Next, configure fluent.conf, a fluentd configuration file as follows. Please see this for fluent-plugin-documentdb configuration.\n# Receive events from 24224/tcp # This is used by log forwarding and the fluent-cat command \u0026lt;source\u0026gt; @type forward port 24224 \u0026lt;/source\u0026gt; # Store Data in DocumentDB \u0026lt;match apache.access\u0026gt; @type documentdb docdb_endpoint https://yoichikademo.documents.azure.com:443/ docdb_account_key Tl1+ikQtnExxxUisJ+BXwbbaC8NtUqYVE9kUDXCNust5aYBduhui29Xtxz3DLP88PayjtgtnARc1PW+2wlA6jCJw== (dummy) docdb_database LogDB docdb_collection Collection1 auto_create_database true auto_create_collection true time_format %Y%m%d-%H:%M:%S localtime true add_time_field true time_field_name time add_tag_field true tag_field_name tag \u0026lt;/match\u0026gt; Regarding he port number of the aggregator host above, the default is 24224. Note that both TCP packets (event stream) and UDP packets (heartbeat message) are sent to this port, which mean you need to open both TCP and UDP for this port if you have access controls between forwarders and aggregator. Please see the forward Output plugin article to understand more about forward plugin.\nFinally, run fluentd with specifiying fluent.conf that you configurea above.\n$ fluentd -c ./fluent.conf -vv \u0026amp; Setup: Fluentd Forwarders First, to set up Fluentd, run the following command to setup Fluentd. Again If you are not using Ruby Gem for the installation, please refer to the installation document.\n# install fluentd $ sudo gem install fluentd --no-ri --no-rdoc` # create fluent.conf $ fluentd --setup Then, give Fluentd a read access to servers\u0026rsquo;log files.\n$ sudo chmod og+rx /var/log/apache2 $ sudo chmod og+r /var/log/apache2/* Next, configure fluent.conf, a fluentd configuration file as follows to tail apache access logs and forard event to aggregator\n# Apache Access Logs \u0026lt;source\u0026gt; @type tail path /var/log/apache2/access.log # monitoring file pos_file /tmp/fluentd_pos_file # position file format apache # format tag apache.access # tag \u0026lt;/source\u0026gt; # Forward data to the aggregator \u0026lt;match apache.access\u0026gt; @type forward buffer_type memory buffer_chunk_limit 8m buffer_queue_limit 64 flush_interval 1s \u0026lt;server\u0026gt; host \u0026lt;Aggregator\u0026#39;s hostname or IP\u0026gt; port 24224 \u0026lt;/server\u0026gt; \u0026lt;secondary\u0026gt; @type file path /var/log/fluentd/forward-failed \u0026lt;/secondary\u0026gt; \u0026lt;/match\u0026gt; Finally, start Fluentd with the configuration above to start log collections\n$ fluentd -c ./fluent.conf -vv \u0026amp; TEST Let\u0026rsquo;s check if logs will be forwarded from apache nodes to aggegator and ultimately stored in documentdb. First, create log events by sending test requests to web servers somehow (here using apache bench for example)\n$ ab -n 5 -c 2 http://\u0026lt;targetserver\u0026gt;/foo/bar/test.html If logs are collected successfully, you can see the logs stored in DocumentDB easily by using Document DB\u0026rsquo;s query explorer. Go to Azure Portal \u0026gt; Display your DocumentDB dashboard \u0026gt; Query Explorer.\nMore log collections from external sources Fluentd\u0026rsquo;s Input plugins extend Fluentd to retrieve and pull event logs from external sources. An input plugin typically creates a thread socket and a listen socket. It can also periodically pull data from data sources. For examples, listening syslog events, tailing apache/nginx logs, and pulling data from well-known RDBMS/NoSQLs on-premices or on public cloud. See http://www.fluentd.org/plugins\nSetup for Advanced senarios Using Secure-forward instead of simple forward plugin in order to have communication over SSL between forward servers and aggregator: https://github.com/tagomoris/fluent-plugin-secure-forward Configuring DocumentDB\u0026rsquo;s Hadoop connector that allows DocumentDB to act as both a source and sink for Hive, Pig and MapReduce jobs: https://azure.microsoft.com/en-us/documentation/articles/documentdb-run-hadoop-with-hdinsight/ Setup Azure Data factory to from DocumentDB to Azure Blob Storage for Archiving the data: https://azure.microsoft.com/en-us/documentation/articles/data-factory-azure-documentdb-connector/ Configuring DocumentDB\u0026rsquo;s PowerBI connector that allows DocumentDB to act as a source for PowerBI to create insightful visualizations for DocumentDB data: https://azure.microsoft.com/en-us/blog/unleashing-insights-from-data-in-documentdb-with-power-bi/ Happy log collections with Azure DocumentDB and fluentd!!\nEND\n","permalink":"https://unofficialism.info/posts/collecting-logs-into-azure-documentdb-using-fluent-plugin-documentdb/","summary":"In this article, I\u0026rsquo;d like to introduces a solution to collect logs and store them into Azure DocumentDB using fluentd and its plugin, fluent-plugin-documentdb.\nAzure DocumentDB is a managed NoSQL database service provided by Microsoft Azure. It\u0026rsquo;s schemaless, natively support JSON, very easy-to-use, very fast, highly reliable, and enables rapid deployment, you name it. Fluentd is an open source data collector, which lets you unify the data collection and consumption for a better use and understanding of data.","title":"Collecting logs into Azure DocumentDB using fluent-plugin-documentdb"},{"content":"UPDATED:\n2016-12-10: Added fluent-plugin-azure-loganalytics to the list 2016-11-23: Added fluent-plugin-azurefunctions to the list Here is a list of fluentd plugins for Microsoft Azure Services.\nPlugin Name Target Azure Services Note fluent-plugin-azurestorage Blob Storage Azure Storate output plugin buffers logs in local file and upload them to Azure Storage periodicall fluent-plugin-azureeventhubs Event Hubs Azure Event Hubs buffered output plugin for Fluentd. Currently it supports only HTTPS (not AMQP) fluent-plugin-azuretables Azure Tables Fluent plugin to add event record into Azure Tables Storage fluent-plugin-azuresearch Azure Search Fluent plugin to add event record into Azure Search fluent-plugin-documentdb Cosmos DB Fluent plugin to add event record into Azure Cosmos DB fluent-plugin-azurefunctions Azure Functions Azure Functions (HTTP Trigger) output plugin for Fluentd. The plugin aggregates semi-structured data in real-time and writes the buffered data via HTTPS request to HTTP Trigger Function fluent-plugin-azure-loganalytics Log Analytics Azure Log Analytics output plugin for Fluentd. The plugin aggregates semi-structured data in real-time and writes the buffered data via HTTPS request to Azure Log Analytics (as of Nov 23, 2016)\n","permalink":"https://unofficialism.info/posts/fluentd-plugins-for-microsoft-azure-services/","summary":"UPDATED:\n2016-12-10: Added fluent-plugin-azure-loganalytics to the list 2016-11-23: Added fluent-plugin-azurefunctions to the list Here is a list of fluentd plugins for Microsoft Azure Services.\nPlugin Name Target Azure Services Note fluent-plugin-azurestorage Blob Storage Azure Storate output plugin buffers logs in local file and upload them to Azure Storage periodicall fluent-plugin-azureeventhubs Event Hubs Azure Event Hubs buffered output plugin for Fluentd. Currently it supports only HTTPS (not AMQP) fluent-plugin-azuretables Azure Tables Fluent plugin to add event record into Azure Tables Storage fluent-plugin-azuresearch Azure Search Fluent plugin to add event record into Azure Search fluent-plugin-documentdb Cosmos DB Fluent plugin to add event record into Azure Cosmos DB fluent-plugin-azurefunctions Azure Functions Azure Functions (HTTP Trigger) output plugin for Fluentd.","title":"fluentd plugins for Microsoft Azure Services"},{"content":"I\u0026rsquo;ve just noticed that some of patents, which I was involved in for its publishing process, have been granted. Good news!\nç‰¹é–‹2011-065245 ç‰¹é–‹2011-065244 ç‰¹é–‹2011-065243 ç‰¹é–‹2011-060094 ç‰¹é–‹2011-060093 ç‰¹é–‹2008-287407 ","permalink":"https://unofficialism.info/posts/patents/","summary":"I\u0026rsquo;ve just noticed that some of patents, which I was involved in for its publishing process, have been granted. Good news!\nç‰¹é–‹2011-065245 ç‰¹é–‹2011-065244 ç‰¹é–‹2011-065243 ç‰¹é–‹2011-060094 ç‰¹é–‹2011-060093 ç‰¹é–‹2008-287407 ","title":"My patents"},{"content":"ã“ã‚Œã¯Elasticsearch Advent Calendar 2015ã®17æ—¥ç›®ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼\nARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨å‘¼ã°ã‚Œã‚‹ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹æ³•ã‚’ä½¿ã£ã¦Azureä¸Šã«Elasticsearchã‚¯ãƒ©ã‚¹ã‚¿ã‚’ã•ãã£ã¨æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã®ãŠè©±ã§ã€ä¸»ã«Azureç•Œéšˆã®Elasticsearchãƒ¦ãƒ¼ã‚¶å‘ã‘ã®å†…å®¹ã¨ãªã£ã¦ã„ã‚‹ã€‚ã‚¿ã‚¤ãƒˆãƒ«ã«ã‚ã‚‹3åˆ†ã§ã¨ã„ã†ã®ã¯å®Ÿéš›ã«è¨ˆã£ãŸã‚ã‘ã§ã¯ãªã„ãŒãã‚Œãã‚‰ã„ç°¡å˜ä¸”ã¤çŸ­æ™‚é–“ã§ã§ãã‚‹ã“ã¨ã‚’å¼·èª¿ã—ãŸãä½¿ã‚ã›ã¦ã„ãŸã ã„ã¦ã„ã‚‹ãƒ»ãƒ»ãƒ»ã¨ã„ã†ã“ã¨ã‚’å‰ã‚‚ã£ã¦è£œè¶³ã—ã¦ãŠãï¼ˆæ±—ï¼‰ã€‚\nARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã¯ï¼Ÿ ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å‰ã«ARMã«ã¤ã„ã¦å°‘ã—è§£èª¬ã™ã‚‹ã€‚ARMã¯Azure Resource Managerã®ç•¥ã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ§‹ç¯‰ã«å¿…è¦ãª\nãƒªã‚½ãƒ¼ã‚¹ï¼ˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒˆ/ä»®æƒ³ãƒã‚·ãƒ³ãªã©ï¼‰ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ç®¡ç†ã™ã‚‹ãŸã‚ã®ä»•çµ„ã¿ã§ã‚ã‚‹ã€‚ã©ã‚“ãªã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã«ãŠã„ã¦ã‚‚å°‘ãªã‹ã‚‰ãšä»®æƒ³ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã€ä»®æƒ³ãƒã‚·ãƒ³ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã€LBãªã©ã®ã‚¤ãƒ³ãƒ•ãƒ©ã®æ§‹ç¯‰ãŒå¿…è¦ã§æ—§æ¥ã®ã‚„ã‚Šæ–¹ã§ã¯ã“ã‚Œã‚‰ã‚’ï¼‘ã¤ï¼‘ã¤ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã„ãŸã‹ã¨æ€ã†ã€‚ä¸€æ–¹ARMã®ä¸–ç•Œã§ã¯å¿…è¦ãªæ§‹ç¯‰è¦ç´ ã‚’ãƒªã‚½ãƒ¼ã‚¹ã¨ã„ã†å˜ä½ã«ã—ã¦ã€ã“ã‚Œã‚‰ãƒªã‚½ãƒ¼ã‚¹ã‚’å€‹åˆ¥ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã®ã§ã¯ãªãå…¨ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦ã¾ã¨ã‚ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã€ãã‚Œã‚‰ã‚’ç®¡ç†ãƒ»ç›£è¦–ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ãã—ã¦ã€ãã‚Œã‚‰è¤‡æ•°ã®ãƒªã‚½ãƒ¼ã‚¹ã¯JSONå½¢å¼ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§è¡¨ç¾ãƒ»å±•é–‹ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¦ã€ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã“ã¨ã‚’ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨å‘¼ã¶ã€‚Infrastructure as Codeãªã‚“ã¦è¨€è‘‰ãŒã¯ã‚„ã£ã¦ã„ãŸã‚Šã™ã‚‹ãŒã€ã¾ã•ã«ãã‚Œã‚’Azureã§å®Ÿç¾ã™ã‚‹ãŸã‚ã®å…¬å¼ãªä»•çµ„ã¿ãŒARMã§ã‚ã‚Šã€ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãªã®ã§ã‚ã‚‹ã€‚\nã¡ãªã¿ã«ã“ã®ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€æ‰‹ã§ã„ã¡ã‹ã‚‰ä½œã‚‹å¿…è¦ã¯ãªãã€Azureã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã•ã¾ã–ã¾ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒå…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã®ã§ã¾ãšã¯è‡ªåˆ†ã®ç›®çš„ã«ä¼¼ãŸã‚ˆã†ãªã“ã¨ã‚’å®Ÿç¾ã—ã¦ã„ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸ã‚“ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã¿ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã™ã‚‹ã€‚å®Œæˆã•ã‚ŒãŸã‚‚ã®ã‚’è¦‹ã‚‹ã“ã¨ã§ãŠä½œæ³•ãŒå­¦ã¹ã‚‹ã—ã€ãã‚Œã‚’ãƒ™ãƒ¼ã‚¹ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã„ãã®ãŒåŠ¹ç‡çš„ã§ã‚ã‚‹ã€‚\nhttps://azure.microsoft.com/ja-jp/documentation/templates/ https://github.com/Azure/azure-quickstart-templates Elasticsearchã‚¯ãƒ©ã‚¹ã‚¿ã®ãƒ‡ãƒ—ãƒ­ã‚¤ ä¸Šè¨˜ã§èª¬æ˜ã—ãŸARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’åˆ©ç”¨ã—ã¦Elasticsearchã‚¯ãƒ©ã‚¹ã‚¿ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¡Œã†ã€‚ã“ã“ã§ä½¿ã†ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯Azureã‚¯ã‚¤ãƒƒã‚¯ãƒ»ã‚¹ã‚¿ãƒ¼ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚®ãƒ£ãƒ©ãƒªãƒ¼ã«ã‚ã‚‹Elasticsearchãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’åˆ©ç”¨ã™ã‚‹ã€‚ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã£ãŸãƒ‡ãƒ—ãƒ­ã‚¤ã«ã¯è¤‡æ•°ã®æ–¹æ³•ãŒã‚ã‚‹ãŒã“ã“ã§ã¯Linuxä¸Šã§Azure CLIã‚’ä½¿ã£ãŸæ–¹æ³•ã§è¡Œã†ã€‚ã“ã“ã§ã®å®Ÿè¡ŒOSã¯Ubuntu 14.10ã€‚\næœ€æ–°ç‰ˆã®Azure CLIã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‹ã‚‰Azureã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã«æ¥ç¶šã™ã‚‹\n$ sudo npm install -g azure-cli $ azure --version $ azure login ã€ŒAzure ã‚³ãƒãƒ³ãƒ‰ ãƒ©ã‚¤ãƒ³ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ (Azure CLI) ã‹ã‚‰ã® Azure ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã¸ã®æ¥ç¶šã€ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€Azure CLI ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 0.9.10 ä»¥é™ã§ã¯ã€å¯¾è©±å‹ã® azure login ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€ä»»æ„ã® ID ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹ã€‚å°šã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 0.9.9 ä»¥é™ã¯ã€å¤šè¦ç´ èªè¨¼ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã€‚\nãƒ‡ãƒ—ãƒ­ã‚¤ç”¨ã®ãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆã™ã‚‹\nã“ã“ã§ã¯è¥¿æ—¥æœ¬ï¼ˆJapan Westï¼‰ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã«Resource-ES-JapanWestã¨ã„ã†åå‰ã®ãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆã™ã‚‹ã€‚\n# azure group create -n \u0026#34;\u0026lt;ãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—å\u0026gt;\u0026#34; -l \u0026#34;\u0026lt;ãƒªãƒ¼ã‚¸ãƒ§ãƒ³å\u0026gt;\u0026#34; $ azure group create -n \u0026#34;Resource-ES-JapanWest\u0026#34; -l \u0026#34;Japan West\u0026#34; ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ç·¨é›†\nGithubã‚ˆã‚Šazure-quickstart-templatesã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€Elasticsearchç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã™ã‚‹\n$ git clone https://github.com/Azure/azure-quickstart-templates.git $ cd azure-quickstart-template/elasticsearch azuredeploy.parameters.jsonã‚’ç·¨é›†ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ç”¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã™ã‚‹ã€‚ã“ã“ã§ã®å…¥åŠ›å†…å®¹ã¯ä¸‹è¨˜ã®ã¨ãŠã‚Š\n{ \u0026#34;$schema\u0026#34;: \u0026#34;http://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#\u0026#34;, \u0026#34;contentVersion\u0026#34;: \u0026#34;1.0.0.0\u0026#34;, \u0026#34;parameters\u0026#34;: { \u0026#34;adminUsername\u0026#34;: { \u0026#34;value\u0026#34;: \u0026#34;yoichika\u0026#34; # ç®¡ç†ç”¨ãƒ¦ãƒ¼ã‚¶å }, \u0026#34;adminPassword\u0026#34;: { \u0026#34;value\u0026#34;: \u0026#34;*********\u0026#34; # ä¸Šè¨˜ç®¡ç†ãƒ¦ãƒ¼ã‚¶ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ }, \u0026#34;vmDataNodeCount\u0026#34;: { \u0026#34;value\u0026#34;: 3 # ãƒ‡ãƒ¼ã‚¿ãƒãƒ¼ãƒ‰æ•° }, \u0026#34;virtualNetworkName\u0026#34;: { \u0026#34;value\u0026#34;: \u0026#34;esvnet\u0026#34; # ä»®æƒ³ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å }, \u0026#34;esClusterName\u0026#34;: { \u0026#34;value\u0026#34;: \u0026#34;elasticsearch\u0026#34; # ESã‚¯ãƒ©ã‚¹ã‚¿å }, \u0026#34;loadBalancerType\u0026#34;: { \u0026#34;value\u0026#34;: \u0026#34;internal\u0026#34; # LBã‚¿ã‚¤ãƒ— external or internal }, \u0026#34;vmSizeDataNodes\u0026#34;: { \u0026#34;value\u0026#34;: \u0026#34;Standard_D1\u0026#34; # ãƒ‡ãƒ¼ã‚¿ãƒãƒ¼ãƒ‰ç”¨ã®VMã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚µã‚¤ã‚º }, \u0026#34;vmClientNodeCount\u0026#34;: { \u0026#34;value\u0026#34;: 0 #ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒãƒ¼ãƒ‰æ•° }, \u0026#34;marvel\u0026#34;: { \u0026#34;value\u0026#34;: \u0026#34;no\u0026#34; # Marvelæœ‰åŠ¹åŒ–: yes or no }, \u0026#34;kibana\u0026#34;: { \u0026#34;value\u0026#34;: \u0026#34;yes\u0026#34; # Kibanaæœ‰åŠ¹åŒ–: yes or no }, \u0026#34;OS\u0026#34;: { \u0026#34;value\u0026#34;: \u0026#34;ubuntu\u0026#34; } } } ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å…ƒã«ã‚¯ãƒ©ã‚¹ã‚¿ã®ãƒ‡ãƒ—ãƒ­ã‚¤\nä¸€é€šã‚Šæº–å‚™ãŒæ•´ã£ãŸã®ã§ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å…ƒã«ä¸Šè¨˜ã§ä½œæˆã—ãŸãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—ã«ESã‚¯ãƒ©ã‚¹ã‚¿ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã€‚\n# azure group create \u0026#34;\u0026lt;resource groupå\u0026gt;\u0026#34; \u0026#34;\u0026lt;ãƒªãƒ¼ã‚¸ãƒ§ãƒ³\u0026gt;\u0026#34; \\ # -f \u0026lt;azuredeploy.jsonãƒ•ã‚¡ã‚¤ãƒ«\u0026gt; # -d \u0026#34;\u0026lt;deployå\u0026gt;\u0026#34; # -e \u0026lt;azuredeploy.parameters.jsonãƒ•ã‚¡ã‚¤ãƒ«\u0026gt; $ azure group create \u0026#34;Resource-ES-JapanWest\u0026#34; \u0026#34;JapanWest\u0026#34; \\ -f azuredeploy.json \\ -d \u0026#34;Deploy-ES-JapanWest\u0026#34; \\ -e azuredeploy.parameters.json é€”ä¸­ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆçŠ¶æ³ã¯æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n# azure group deployment show \u0026#34;\u0026lt;Resource groupå\u0026gt;\u0026#34; \u0026#34;\u0026lt;deploymentå\u0026gt;\u0026#34; $ azure group deployment show \u0026#34;Resource-ES-JapanWest\u0026#34; \u0026#34;Deploy-ES-JapanWest\u0026#34; ä¸Šè¨˜ã‚³ãƒãƒ³ãƒ‰ã®å‡¦ç†ãŒå®Œäº†ã™ã‚Œã°ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ã€‚ãŸã£ãŸã“ã‚Œã ã‘ã€‚å‡ºæ¥ä¸ŠãŒã£ãŸæ§‹æˆã ãŒã€æ‰‹ã£å–ã‚Šæ—©ãã¯Azureãƒãƒ¼ã‚¿ãƒ«ã§ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ãƒ‡ãƒ—ãƒ­ã‚¤ç”¨ã«ä½œæˆã—ãŸãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆã“ã“ã§ã¯Resource-ES-JapanWestï¼‰ã®ä¸­èº«ã‚’è¦‹ã¦ã„ãŸã ãã¨ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸæ§˜ã€…ãªãƒªã‚½ãƒ¼ã‚¹ä¸€è¦§ï¼ˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã€ä»®æƒ³ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã€ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ã€ä»®æƒ³ãƒã‚·ãƒ³ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã€ãƒ‘ãƒ–ãƒªãƒƒã‚¯ç”¨IPãƒ»ãƒ»ãƒ»ãªã©ï¼‰ãŒå‡ºæ¥ä¸ŠãŒã£ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚å°šã€å‡ºæ¥ä¸ŠãŒã£ãŸESã‚¯ãƒ©ã‚¹ã‚¿ã¯åˆè¨ˆ8VMã§æ§‹æˆã•ã‚Œã¦ãŠã‚Šã€ESãƒã‚¹ã‚¿ãƒ¼ãƒãƒ¼ãƒ‰ç”¨ã«3ã¤ã€ESãƒ‡ãƒ¼ã‚¿ãƒãƒ¼ãƒ‰ç”¨ã«3ã¤ã€Kibanaç”¨ã«ï¼‘ã¤ã€è¸ã¿å°ã‚µãƒ¼ãƒç”¨ã«ï¼‘ã¤ã¨ãªã£ã¦ã„ã‚‹ã€‚ä»®æƒ³ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å†…ã®VMã®é…ç½®çŠ¶æ³ã‚’å›³ã«ã™ã‚‹ã¨æ¬¡ã®ã‚ˆã†ã«ãªã‚‹ã€‚\nãƒ†ã‚¹ãƒˆå®Ÿè¡Œ ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’æŠ•å…¥ã—ã¦ã€å•é¡Œãªãã‚¯ãƒ©ã‚¹ã‚¿ãŒå‹•ä½œã™ã‚‹ã®ã‹ã‚’ç¢ºèªã—ã¦ã¿ã‚‹ã€‚ãƒ‡ãƒ¼ã‚¿ã¯ã“ã¡ã‚‰ã§ãƒ†ã‚¹ãƒˆã«æä¾›ã•ã‚Œã¦ã„ã‚‹ shakespeare.jsonã‚’åˆ©ç”¨ã™ã‚‹ã€‚shakespeare.jsonã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨å‰æã«ä¸‹è¨˜ã®ã‚ˆã†ã«ESã‚¯ãƒ©ã‚¹ã‚¿ã«ãƒ‡ãƒ¼ã‚¿ã‚’æŠ•å…¥ã™ã‚‹ã€‚\nã¾ãšã¯shakespeareãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ãŸã‚ã«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®Mappingã‚’å®Ÿè¡Œ\ncurl -XPUT http://\u0026lt;ESãƒãƒ¼ãƒ‰ã®ã‚¢ãƒ‰ãƒ¬ã‚¹\u0026gt;:9200/shakespeare -d \u0026#39; { \u0026#34;mappings\u0026#34; : { \u0026#34;_default_\u0026#34; : { \u0026#34;properties\u0026#34; : { \u0026#34;speaker\u0026#34; : {\u0026#34;type\u0026#34;: \u0026#34;string\u0026#34;, \u0026#34;index\u0026#34; : \u0026#34;not_analyzed\u0026#34; }, \u0026#34;play_name\u0026#34; : {\u0026#34;type\u0026#34;: \u0026#34;string\u0026#34;, \u0026#34;index\u0026#34; : \u0026#34;not_analyzed\u0026#34; }, \u0026#34;line_id\u0026#34; : { \u0026#34;type\u0026#34; : \u0026#34;integer\u0026#34; }, \u0026#34;speech_number\u0026#34; : { \u0026#34;type\u0026#34; : \u0026#34;integer\u0026#34; } } } } } \u0026#39;; æ¬¡ã«shakespeareãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ESã‚¯ãƒ©ã‚¹ã‚¿ã«ãƒ­ãƒ¼ãƒ‰ã€‚\n$ curl -XPOST \u0026#34;\u0026lt;ESãƒãƒ¼ãƒ‰ã®ã‚¢ãƒ‰ãƒ¬ã‚¹\u0026gt;:9200/shakespeare/_bulk?pretty\u0026#34; --data-binary @shakespeare.json ä¸Šè¨˜å‡¦ç†å®Œäº†å¾Œç„¡äº‹ãƒ­ãƒ¼ãƒ‰ãŒå®Œäº†ã—ãŸã‹ã©ã†ã‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ç¢ºèªã™ã‚‹ã€‚\n$ curl \u0026#39;\u0026lt;ESãƒãƒ¼ãƒ‰ã®ã‚¢ãƒ‰ãƒ¬ã‚¹\u0026gt;:9200/_cat/indices?v\u0026#39; (çµæœ) health status index pri rep docs.count docs.deleted store.size pri.store.size green open shakespeare 5 1 111396 0 36.2mb 18mb green open .kibana 1 1 2 0 35.6kb 17.8kb å¿µã®ãŸã‚ã«æ¤œç´¢ã‚¯ã‚¨ãƒªãƒ¼ã‚’æŠ•ã’ã¦ã¿ã‚‹ã€‚\n$ curl -s \u0026#39;\u0026lt;ESãƒãƒ¼ãƒ‰ã®ã‚¢ãƒ‰ãƒ¬ã‚¹\u0026gt;:9200/shakespeare/_search?q=*\u0026amp;size=1\u0026#39; | \\ python -mjson.tool| perl -Xpne \u0026#39;s/\\\\u([0-9a-fA-F]{4})/chr(hex($1))/eg\u0026#39; (çµæœ) { \u0026#34;_shards\u0026#34;: { \u0026#34;failed\u0026#34;: 0, \u0026#34;successful\u0026#34;: 5, \u0026#34;total\u0026#34;: 5 }, \u0026#34;hits\u0026#34;: { \u0026#34;hits\u0026#34;: [ { \u0026#34;_id\u0026#34;: \u0026#34;4904\u0026#34;, \u0026#34;_index\u0026#34;: \u0026#34;shakespeare\u0026#34;, \u0026#34;_score\u0026#34;: 1.0, \u0026#34;_source\u0026#34;: { \u0026#34;line_id\u0026#34;: 4905, \u0026#34;line_number\u0026#34;: \u0026#34;3.3.74\u0026#34;, \u0026#34;play_name\u0026#34;: \u0026#34;Henry VI Part 1\u0026#34;, \u0026#34;speaker\u0026#34;: \u0026#34;JOAN LA PUCELLE\u0026#34;, \u0026#34;speech_number\u0026#34;: 18, \u0026#34;text_entry\u0026#34;: \u0026#34;See, then, thou fightst against thy countrymen\u0026#34; }, \u0026#34;_type\u0026#34;: \u0026#34;line\u0026#34; } ], \u0026#34;max_score\u0026#34;: 1.0, \u0026#34;total\u0026#34;: 111396 }, \u0026#34;timed_out\u0026#34;: false, \u0026#34;took\u0026#34;: 9 } ã•ã‚‰ã«Kibanaã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ESã‚¯ãƒ©ã‚¹ã‚¿ã¨ã®é€£æºã«å•é¡ŒãŒãªã„ã‹ç¢ºèªã™ã‚‹ã€‚å¿µã®ãŸã‚ã«Kibanaã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã¯http://Kibanaã‚¢ãƒ‰ãƒ¬ã‚¹:5601ã€‚ç‰¹ã«å•é¡Œãªã‘ã‚Œã°Kibanaä¸Šã§æ¤œç´¢ã™ã‚‹ã¨æ¬¡ã®ã‚ˆã†ã«ãƒ†ã‚¹ãƒˆãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒé–²è¦§ã§ãã‚‹ã¯ãšã€‚\nelasticsearch-headã§ã‚¯ãƒ©ã‚¹ã‚¿ãƒãƒ¼ãƒ‰ã®çŠ¶æ…‹ã‚’ç¢ºèª\nelasticsearch-headã¯ã‚¯ãƒ©ã‚¹ã‚¿ã®æ§‹æˆã‚„ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ä¸­èº«è¡¨ç¤ºã€æ¤œç´¢ã‚¯ã‚¨ãƒªã®ä½œæˆã€çµæœå–å¾—ãªã©æ‰‹è»½ã«ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã‚‹ä¾¿åˆ©ãªGUIãƒ„ãƒ¼ãƒ«ã€‚ã“ã®elasticsearch-headã‚’ä½¿ã£ã¦ã‚¯ãƒ©ã‚¹ã‚¿ãƒãƒ¼ãƒ‰ã®çŠ¶æ…‹ã‚’ç¢ºèªã™ã‚‹ã€‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯æ¬¡ã®ã‚ˆã†ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚³ãƒãƒ³ãƒ‰ã§è¡Œã†ã€‚\n$ sudo /usr/share/elasticsearch/bin/plugin install mobz/elasticsearch-head elasticsearch-headã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã¯http://:9200/_plugin/headã§çµæœã¯æ¬¡ã®ã¨ãŠã‚Šã€‚\nã“ã‚Œã‚’åˆ†ã‹ã‚Šã‚„ã™ããƒˆãƒãƒ­ã‚¸ãƒ¼ã«ã—ã¦ã¿ãŸã®ãŒä¸‹å›³ã€‚ç·‘ã®å¤ªæ ã®ã¨ã“ã‚ãŒãƒ—ãƒ©ã‚¤ãƒãƒªãƒ¼ã‚·ãƒ£ãƒ¼ãƒ‰ã§ç´°æ ãŒãƒ¬ãƒ—ãƒªã‚«ã‚·ãƒ£ãƒ¼ãƒ‰ã‚’è¡¨ã™ã€‚\nãƒãƒ¼ãƒ‰discoveryã«ã¤ã„ã¦ Elasticsearchã¯ãƒãƒ¼ãƒ‰discoveryæ–¹å¼ã¨ã—ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§multicastãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ã†ã‚ˆã†ã«ãªã£ã¦ãŠã‚Šã€ãƒãƒ¼ãƒ‰é–“ã§ã‚¯ãƒ©ã‚¹ã‚¿åï¼ˆã“ã“ã§ã¯elasticsearchï¼‰ã‚’åˆã‚ã›ã‚‹ã“ã¨ã§å†…éƒ¨çš„ã«å‹æ‰‹ã«ã‚¯ãƒ©ã‚¹ã‚¿æ§‹æˆã‚’çµ„ã‚“ã§ãã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚ã“ã®ã‚¯ãƒ©ã‚¹ã‚¿å†…ãƒãƒ¼ãƒ‰æ¢ç´¢ã¯zen discoveryã¨ã„ã†æ¢ç´¢ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ã€‚ãŸã ã—ã€Azureã®å ´åˆã¯ä»•çµ„ã¿ä¸Šãƒãƒ«ãƒã‚­ãƒ£ã‚¹ãƒˆãŒåˆ©ç”¨ã§ããªã„ï¼ˆã“ã‚Œã¯AWSã§ã‚‚åŒã˜ï¼‰ãŸã‚unicastãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦è¦‹ã¤ã‘ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nãƒãƒ¼ãƒ‰discoveryæ–¹å¼ã¯elasticsearchã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«elasticsearch.ymlã«æŒ‡å®šã—ã€unicastãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã¯discovery.zen.ping.unicast.hostsãƒ‘ãƒ©ãƒ¡ã‚¿ãƒ¼ã«ãƒãƒ¼ãƒ‰ç¾¤ã®IPã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§æŒ‡å®šã™ã‚‹ã€‚å‚è€ƒã¾ã§ã«ä»Šå›ã®ãƒ‡ãƒ¼ã‚¿ãƒãƒ¼ãƒ‰ã®elasticsearch.ymlã§ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«3ã¤ã®ãƒ‡ãƒ¼ã‚¿ãƒãƒ¼ãƒ‰ã®IPã‚’discovery.zen.ping.unicast.hostsã«æŒ‡å®šã—ã¦ã„ã‚‹ã€‚\n/etc/elasticsearch/elasticsearch.yml cluster.name: elasticsearch node.name: esdatavm0 path.data: /datadisks/disk2/elasticsearch/data,/datadisks/disk1/elasticsearch/data discovery.zen.ping.multicast.enabled: false discovery.zen.ping.unicast.hosts: [\u0026#34;10.0.0.10\u0026#34;,\u0026#34;10.0.0.11\u0026#34;,\u0026#34;10.0.0.12\u0026#34;] node.master: false node.data: true discovery.zen.minimum_master_nodes: 2 network.host: _non_loopback_ Azure Cloud pluginã®ç´¹ä»‹ æœ€å¾Œã«Azure Cloud pluginã®ç´¹ä»‹ã‚’ã—ãŸã„ã€‚ã“ã‚Œã¯Azure APIã‚’ä½¿ã£ã¦è‡ªå‹•ã§Azureã«å±•é–‹ã•ã‚ŒãŸãƒãƒ¼ãƒ‰ã®æ¢ç´¢ã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹ãƒãƒ¼ãƒ‰discoveryãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã€unicastãƒ¢ãƒ¼ãƒ‰ã®ã‚ˆã†ã«ãƒãƒ¼ãƒ‰IPã‚’ã„ã¡ã„ã¡æŒ‡å®šã™ã‚‹å¿…è¦ãŒãªã„ç‚¹ã§multicastãƒ¢ãƒ¼ãƒ‰ã«ä¼¼ã¦ã„ã‚‹ã€‚ãŸã ã—æ³¨æ„ç‚¹ã¨ã—ã¦ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ã‚¯ãƒ©ã‚·ãƒƒã‚¯ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¢ãƒ‡ãƒ«ç®¡ç†ä¸‹ã®ãƒªã‚½ãƒ¼ã‚¹ï¼ˆV1ï¼‰ã®ã¿ã¨ãªã£ã¦ã„ã‚‹ã€‚ã‚ˆã£ã¦ã€ä»Šå›ã®ã‚ˆã†ã«ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸESã‚¯ãƒ©ã‚¹ã‚¿ã¯å¯¾è±¡å¤–ã§ã‚ã‚‹ãŒã€ã‚‚ã—ã‚¯ãƒ©ã‚·ãƒƒã‚¯ãƒ¢ãƒ‡ãƒ«ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸESã‚¯ãƒ©ã‚¹ã‚¿ã§ã‚ã‚Œã°ãƒãƒ¼ãƒ‰discoveryæ–¹å¼ã®ï¼‘ã¤ã¨ã—ã¦æ˜¯éãŠè©¦ã—ã„ãŸã ã‘ã‚Œã°ã¨æ€ã†ã€‚\nEnjoy Elasticsearch on Azure!!\nãŠã‚ã‚Š\nLINKS Azureã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ Elasticsearch ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’Azure CLI ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ Azure ãƒªã‚½ãƒ¼ã‚¹ ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§ã®Azure CLI ã®ä½¿ç”¨ Getting Started with Kibana Elasticsearch from the Top Down elasticsearch-head zen discovery Azure Cloud Plugin ","permalink":"https://unofficialism.info/posts/deploy-elasticsearch-cluster-in-azure-using-arm-template/","summary":"ã“ã‚Œã¯Elasticsearch Advent Calendar 2015ã®17æ—¥ç›®ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼\nARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨å‘¼ã°ã‚Œã‚‹ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹æ³•ã‚’ä½¿ã£ã¦Azureä¸Šã«Elasticsearchã‚¯ãƒ©ã‚¹ã‚¿ã‚’ã•ãã£ã¨æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã®ãŠè©±ã§ã€ä¸»ã«Azureç•Œéšˆã®Elasticsearchãƒ¦ãƒ¼ã‚¶å‘ã‘ã®å†…å®¹ã¨ãªã£ã¦ã„ã‚‹ã€‚ã‚¿ã‚¤ãƒˆãƒ«ã«ã‚ã‚‹3åˆ†ã§ã¨ã„ã†ã®ã¯å®Ÿéš›ã«è¨ˆã£ãŸã‚ã‘ã§ã¯ãªã„ãŒãã‚Œãã‚‰ã„ç°¡å˜ä¸”ã¤çŸ­æ™‚é–“ã§ã§ãã‚‹ã“ã¨ã‚’å¼·èª¿ã—ãŸãä½¿ã‚ã›ã¦ã„ãŸã ã„ã¦ã„ã‚‹ãƒ»ãƒ»ãƒ»ã¨ã„ã†ã“ã¨ã‚’å‰ã‚‚ã£ã¦è£œè¶³ã—ã¦ãŠãï¼ˆæ±—ï¼‰ã€‚\nARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã¯ï¼Ÿ ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å‰ã«ARMã«ã¤ã„ã¦å°‘ã—è§£èª¬ã™ã‚‹ã€‚ARMã¯Azure Resource Managerã®ç•¥ã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ§‹ç¯‰ã«å¿…è¦ãª\nãƒªã‚½ãƒ¼ã‚¹ï¼ˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒˆ/ä»®æƒ³ãƒã‚·ãƒ³ãªã©ï¼‰ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ç®¡ç†ã™ã‚‹ãŸã‚ã®ä»•çµ„ã¿ã§ã‚ã‚‹ã€‚ã©ã‚“ãªã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã«ãŠã„ã¦ã‚‚å°‘ãªã‹ã‚‰ãšä»®æƒ³ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã€ä»®æƒ³ãƒã‚·ãƒ³ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã€LBãªã©ã®ã‚¤ãƒ³ãƒ•ãƒ©ã®æ§‹ç¯‰ãŒå¿…è¦ã§æ—§æ¥ã®ã‚„ã‚Šæ–¹ã§ã¯ã“ã‚Œã‚‰ã‚’ï¼‘ã¤ï¼‘ã¤ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã„ãŸã‹ã¨æ€ã†ã€‚ä¸€æ–¹ARMã®ä¸–ç•Œã§ã¯å¿…è¦ãªæ§‹ç¯‰è¦ç´ ã‚’ãƒªã‚½ãƒ¼ã‚¹ã¨ã„ã†å˜ä½ã«ã—ã¦ã€ã“ã‚Œã‚‰ãƒªã‚½ãƒ¼ã‚¹ã‚’å€‹åˆ¥ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã®ã§ã¯ãªãå…¨ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦ã¾ã¨ã‚ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã€ãã‚Œã‚‰ã‚’ç®¡ç†ãƒ»ç›£è¦–ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ãã—ã¦ã€ãã‚Œã‚‰è¤‡æ•°ã®ãƒªã‚½ãƒ¼ã‚¹ã¯JSONå½¢å¼ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§è¡¨ç¾ãƒ»å±•é–‹ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¦ã€ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã“ã¨ã‚’ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨å‘¼ã¶ã€‚Infrastructure as Codeãªã‚“ã¦è¨€è‘‰ãŒã¯ã‚„ã£ã¦ã„ãŸã‚Šã™ã‚‹ãŒã€ã¾ã•ã«ãã‚Œã‚’Azureã§å®Ÿç¾ã™ã‚‹ãŸã‚ã®å…¬å¼ãªä»•çµ„ã¿ãŒARMã§ã‚ã‚Šã€ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãªã®ã§ã‚ã‚‹ã€‚\nã¡ãªã¿ã«ã“ã®ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€æ‰‹ã§ã„ã¡ã‹ã‚‰ä½œã‚‹å¿…è¦ã¯ãªãã€Azureã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã•ã¾ã–ã¾ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒå…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã®ã§ã¾ãšã¯è‡ªåˆ†ã®ç›®çš„ã«ä¼¼ãŸã‚ˆã†ãªã“ã¨ã‚’å®Ÿç¾ã—ã¦ã„ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸ã‚“ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã¿ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã™ã‚‹ã€‚å®Œæˆã•ã‚ŒãŸã‚‚ã®ã‚’è¦‹ã‚‹ã“ã¨ã§ãŠä½œæ³•ãŒå­¦ã¹ã‚‹ã—ã€ãã‚Œã‚’ãƒ™ãƒ¼ã‚¹ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã„ãã®ãŒåŠ¹ç‡çš„ã§ã‚ã‚‹ã€‚\nhttps://azure.microsoft.com/ja-jp/documentation/templates/ https://github.com/Azure/azure-quickstart-templates Elasticsearchã‚¯ãƒ©ã‚¹ã‚¿ã®ãƒ‡ãƒ—ãƒ­ã‚¤ ä¸Šè¨˜ã§èª¬æ˜ã—ãŸARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’åˆ©ç”¨ã—ã¦Elasticsearchã‚¯ãƒ©ã‚¹ã‚¿ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¡Œã†ã€‚ã“ã“ã§ä½¿ã†ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯Azureã‚¯ã‚¤ãƒƒã‚¯ãƒ»ã‚¹ã‚¿ãƒ¼ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚®ãƒ£ãƒ©ãƒªãƒ¼ã«ã‚ã‚‹Elasticsearchãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’åˆ©ç”¨ã™ã‚‹ã€‚ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã£ãŸãƒ‡ãƒ—ãƒ­ã‚¤ã«ã¯è¤‡æ•°ã®æ–¹æ³•ãŒã‚ã‚‹ãŒã“ã“ã§ã¯Linuxä¸Šã§Azure CLIã‚’ä½¿ã£ãŸæ–¹æ³•ã§è¡Œã†ã€‚ã“ã“ã§ã®å®Ÿè¡ŒOSã¯Ubuntu 14.10ã€‚\næœ€æ–°ç‰ˆã®Azure CLIã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‹ã‚‰Azureã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã«æ¥ç¶šã™ã‚‹\n$ sudo npm install -g azure-cli $ azure --version $ azure login ã€ŒAzure ã‚³ãƒãƒ³ãƒ‰ ãƒ©ã‚¤ãƒ³ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ (Azure CLI) ã‹ã‚‰ã® Azure ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã¸ã®æ¥ç¶šã€ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€Azure CLI ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 0.9.10 ä»¥é™ã§ã¯ã€å¯¾è©±å‹ã® azure login ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€ä»»æ„ã® ID ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹ã€‚å°šã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 0.9.9 ä»¥é™ã¯ã€å¤šè¦ç´ èªè¨¼ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã€‚\nãƒ‡ãƒ—ãƒ­ã‚¤ç”¨ã®ãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆã™ã‚‹\nã“ã“ã§ã¯è¥¿æ—¥æœ¬ï¼ˆJapan Westï¼‰ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã«Resource-ES-JapanWestã¨ã„ã†åå‰ã®ãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆã™ã‚‹ã€‚\n# azure group create -n \u0026#34;\u0026lt;ãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—å\u0026gt;\u0026#34; -l \u0026#34;\u0026lt;ãƒªãƒ¼ã‚¸ãƒ§ãƒ³å\u0026gt;\u0026#34; $ azure group create -n \u0026#34;Resource-ES-JapanWest\u0026#34; -l \u0026#34;Japan West\u0026#34; ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ç·¨é›†","title":"ARMãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã£ã¦3åˆ†ã§Azureä¸Šã«Elasticsearchã‚¯ãƒ©ã‚¹ã‚¿ã‚’æ§‹ç¯‰ã™ã‚‹"},{"content":"AzureãŒæä¾›ã™ã‚‹DNSã«ã‚ˆã‚‹ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã§ã‚ã‚‹Traffic Managerã«ã¤ã„ã¦ã€æ—¢ã«Azureåˆ©ç”¨ãƒ¦ãƒ¼ã‚¶ã«ä½¿ã„å°½ãã•ã‚Œã¦æ–°é®®å‘³ã«æ¬ ã‘ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ã‚ã‚‹ã‚‚ã®ã®ã€ãã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç›£è¦–ã¯Traffic Managerã‚’æ‰±ã†ä¸Šã§ã¨ã¦ã‚‚é‡è¦ãªã“ã¨ãªã®ã§ä»Šä¸€åº¦ãã®ãƒ«ãƒ¼ãƒ«ã«ã¤ã„ã¦æ•´ç†ã—ãŸã„ã€‚\nTraffic managerã®å®Ÿæ…‹ã¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ç›£è¦–ï¼‹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’è¡Œã†DNSã‚µãƒ¼ãƒ“ã‚¹ã§ã‚ã‚‹ã€‚ä»¥ä¸‹digã®çµæœã‚’è¦‹ã¦ã„ãŸã ã„ã¦ã‚ã‹ã‚‹é€šã‚Šyoichika-demo1.trafficmanager.netã¨ã„ã†å¤–å‘ãã®åå‰ã«å¯¾ã—ã¦ã“ã®æ™‚ç‚¹ã§ã¯webappdemo3.cloudapp.netãŒCNAMEã•ã‚Œã¦ã„ã‚‹ã€‚Traffic Managerã¯åˆ©ç”¨ãƒ¦ãƒ¼ã‚¶ãŒè¨­å®šã—ãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ç›£è¦–ã—ã€ãã®çµæœã«å¿œã˜ã¦é©åˆ‡ãªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’è¡Œã†ã€‚ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ–¹æ³•ã«ã¯ãƒ•ã‚§ãƒ¼ãƒ«ã‚ªãƒ¼ãƒãƒ¼ã€ãƒ©ã‚¦ãƒ³ãƒ‰ãƒ­ãƒ“ãƒ³ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®3é€šã‚ŠãŒã‚ã‚‹ã€‚ã“ã‚Œã«ã¤ã„ã¦è©³ã—ãã¯ã€ŒTraffic Managerã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ–¹æ³•ã€ã‚’å‚ç…§ã„ãŸã ããŸã„ã€‚\n; \u0026lt;\u0026lt;\u0026gt;\u0026gt; DiG 9.9.5-4.3ubuntu0.1-Ubuntu \u0026lt;\u0026lt;\u0026gt;\u0026gt; yoichika-demo1.trafficmanager.net +noall +answer ;; global options: +cmd yoichika-demo1.trafficmanager.net. 30 IN CNAME webappdemo3.cloudapp.net. webappdemo3.cloudapp.net. 60 IN A 70.37.93.167 æ¬¡ã«è‚å¿ƒã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ç›£è¦–ã«ã¤ã„ã¦ã€ŒTraffic Manager ã®ç›£è¦–ã«ã¤ã„ã¦ã€ã®ç›£è¦–ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’ä½¿ã£ã¦è¦ç‚¹ã‚’æ•´ç†ã™ã‚‹ã€‚\nã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¸ã®Probeé€ä¿¡(ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆ)ã¯30ã”ã¨ã«å®Ÿè¡Œ Probeã¯HTTP 200 OKã‹ã©ã†ã‹ã§åˆ¤å®š 4å›é€£ç¶šã—ã¦å¤±æ•—ãŒç¶šã„ãŸå¾Œã€ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã¯ä½¿ç”¨ä¸å¯ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ç”¨ä¸å¯ã¨ã¿ãªã—ãã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’è¡Œã‚ãªã„(â‘£ã«ã‚ãŸã‚‹ã€‚â‘¥ã¯å¾Œè¿°) DNS ã®æœ‰åŠ¹æœŸé™ (TTL) ã«ã‚ˆã‚ŠDNSãƒªã‚¾ãƒ«ãƒãƒ¼ã§è§£æ±ºã•ã‚ŒãŸåå‰ãŒDNS ã‚µãƒ¼ãƒãƒ¼ä¸Šã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ã‚‹æœŸé–“ä½¿ç”¨ã§ããªã„ã‚µãƒ¼ãƒ“ã‚¹ã® DNS æƒ…å ±ã‚’å¼•ãç¶šãé…ä¿¡ã—ã¦ã—ã¾ã†â‡’ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯æ¸›å°‘æœŸé–“ (â‘¥ã«ã‚ãŸã‚‹)ã€‚DNSã®TTLã®æ—¢å®šå€¤ã¯ã€300ç§’(5åˆ†) ã¤ã¾ã‚Šã€ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒãƒ€ã‚¦ãƒ³ã—ãŸå ´åˆã€Probeã«ã‚ˆã‚Šä½¿ç”¨ä¸å¯ã¨ã¿ãªã™ã®ã«æœ€å¤§120ç§’(30ç§’ x 4)ã€ã•ã‚‰ã«DNSã®TTLã®æœŸé–“ï¼ˆæ—¢å®šå€¤ã¯300ç§’ï¼‰ã‚’åŠ ãˆã‚‹ã¨ã€å®Œå…¨ã«å•é¡Œã®ã‚ã£ãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¸ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒåœæ­¢ã™ã‚‹ã¾ã§ã«æ¨™æº–çš„ã«420ç§’ã€ç´„7åˆ†ã¯è¦‹ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ã¨ã„ã†ã“ã¨ã«ãªã‚‹ã€‚å½“ç„¶ãªãŒã‚‰ã“ã®7åˆ†é–“ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒãƒ­ã‚¹ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€ä¿Šæ•ãªãƒ•ã‚§ãƒ¼ãƒ«ã‚ªãƒ¼ãƒãƒ¼ã‚’æœŸå¾…ã™ã‚‹å ´åˆã¯åˆ¥ã®ä»•æ›ã‘ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ã”æ³¨æ„ãã ã•ã„ã€‚\n","permalink":"https://unofficialism.info/posts/traffic-manager-endpoint-monitoring/","summary":"AzureãŒæä¾›ã™ã‚‹DNSã«ã‚ˆã‚‹ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã§ã‚ã‚‹Traffic Managerã«ã¤ã„ã¦ã€æ—¢ã«Azureåˆ©ç”¨ãƒ¦ãƒ¼ã‚¶ã«ä½¿ã„å°½ãã•ã‚Œã¦æ–°é®®å‘³ã«æ¬ ã‘ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ã‚ã‚‹ã‚‚ã®ã®ã€ãã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç›£è¦–ã¯Traffic Managerã‚’æ‰±ã†ä¸Šã§ã¨ã¦ã‚‚é‡è¦ãªã“ã¨ãªã®ã§ä»Šä¸€åº¦ãã®ãƒ«ãƒ¼ãƒ«ã«ã¤ã„ã¦æ•´ç†ã—ãŸã„ã€‚\nTraffic managerã®å®Ÿæ…‹ã¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ç›£è¦–ï¼‹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’è¡Œã†DNSã‚µãƒ¼ãƒ“ã‚¹ã§ã‚ã‚‹ã€‚ä»¥ä¸‹digã®çµæœã‚’è¦‹ã¦ã„ãŸã ã„ã¦ã‚ã‹ã‚‹é€šã‚Šyoichika-demo1.trafficmanager.netã¨ã„ã†å¤–å‘ãã®åå‰ã«å¯¾ã—ã¦ã“ã®æ™‚ç‚¹ã§ã¯webappdemo3.cloudapp.netãŒCNAMEã•ã‚Œã¦ã„ã‚‹ã€‚Traffic Managerã¯åˆ©ç”¨ãƒ¦ãƒ¼ã‚¶ãŒè¨­å®šã—ãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ç›£è¦–ã—ã€ãã®çµæœã«å¿œã˜ã¦é©åˆ‡ãªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’è¡Œã†ã€‚ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ–¹æ³•ã«ã¯ãƒ•ã‚§ãƒ¼ãƒ«ã‚ªãƒ¼ãƒãƒ¼ã€ãƒ©ã‚¦ãƒ³ãƒ‰ãƒ­ãƒ“ãƒ³ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®3é€šã‚ŠãŒã‚ã‚‹ã€‚ã“ã‚Œã«ã¤ã„ã¦è©³ã—ãã¯ã€ŒTraffic Managerã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ–¹æ³•ã€ã‚’å‚ç…§ã„ãŸã ããŸã„ã€‚\n; \u0026lt;\u0026lt;\u0026gt;\u0026gt; DiG 9.9.5-4.3ubuntu0.1-Ubuntu \u0026lt;\u0026lt;\u0026gt;\u0026gt; yoichika-demo1.trafficmanager.net +noall +answer ;; global options: +cmd yoichika-demo1.trafficmanager.net. 30 IN CNAME webappdemo3.cloudapp.net. webappdemo3.cloudapp.net. 60 IN A 70.37.93.167 æ¬¡ã«è‚å¿ƒã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ç›£è¦–ã«ã¤ã„ã¦ã€ŒTraffic Manager ã®ç›£è¦–ã«ã¤ã„ã¦ã€ã®ç›£è¦–ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’ä½¿ã£ã¦è¦ç‚¹ã‚’æ•´ç†ã™ã‚‹ã€‚\nã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¸ã®Probeé€ä¿¡(ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆ)ã¯30ã”ã¨ã«å®Ÿè¡Œ Probeã¯HTTP 200 OKã‹ã©ã†ã‹ã§åˆ¤å®š 4å›é€£ç¶šã—ã¦å¤±æ•—ãŒç¶šã„ãŸå¾Œã€ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã¯ä½¿ç”¨ä¸å¯ã®ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ç”¨ä¸å¯ã¨ã¿ãªã—ãã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’è¡Œã‚ãªã„(â‘£ã«ã‚ãŸã‚‹ã€‚â‘¥ã¯å¾Œè¿°) DNS ã®æœ‰åŠ¹æœŸé™ (TTL) ã«ã‚ˆã‚ŠDNSãƒªã‚¾ãƒ«ãƒãƒ¼ã§è§£æ±ºã•ã‚ŒãŸåå‰ãŒDNS ã‚µãƒ¼ãƒãƒ¼ä¸Šã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ã‚‹æœŸé–“ä½¿ç”¨ã§ããªã„ã‚µãƒ¼ãƒ“ã‚¹ã® DNS æƒ…å ±ã‚’å¼•ãç¶šãé…ä¿¡ã—ã¦ã—ã¾ã†â‡’ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯æ¸›å°‘æœŸé–“ (â‘¥ã«ã‚ãŸã‚‹)ã€‚DNSã®TTLã®æ—¢å®šå€¤ã¯ã€300ç§’(5åˆ†) ã¤ã¾ã‚Šã€ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒãƒ€ã‚¦ãƒ³ã—ãŸå ´åˆã€Probeã«ã‚ˆã‚Šä½¿ç”¨ä¸å¯ã¨ã¿ãªã™ã®ã«æœ€å¤§120ç§’(30ç§’ x 4)ã€ã•ã‚‰ã«DNSã®TTLã®æœŸé–“ï¼ˆæ—¢å®šå€¤ã¯300ç§’ï¼‰ã‚’åŠ ãˆã‚‹ã¨ã€å®Œå…¨ã«å•é¡Œã®ã‚ã£ãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¸ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒåœæ­¢ã™ã‚‹ã¾ã§ã«æ¨™æº–çš„ã«420ç§’ã€ç´„7åˆ†ã¯è¦‹ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ã¨ã„ã†ã“ã¨ã«ãªã‚‹ã€‚å½“ç„¶ãªãŒã‚‰ã“ã®7åˆ†é–“ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒãƒ­ã‚¹ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€ä¿Šæ•ãªãƒ•ã‚§ãƒ¼ãƒ«ã‚ªãƒ¼ãƒãƒ¼ã‚’æœŸå¾…ã™ã‚‹å ´åˆã¯åˆ¥ã®ä»•æ›ã‘ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ã”æ³¨æ„ãã ã•ã„ã€‚","title":"ä»Šä¸€åº¦Traffic Managerã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç›£è¦–ã«ã¤ã„ã¦"},{"content":"Q1. C Sharpã§exeã«è¤‡æ•°DLLã‚’ã‚¹ã‚¿ãƒ†ã‚£ãƒƒã‚¯ãƒªãƒ³ã‚¯ã•ã›ã¦ï¼‘ãƒ•ã‚¡ã‚¤ãƒ«ã«ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã™ã‹ï¼Ÿ\nCã€C++ã§ã¯ãŠãªã˜ã¿ã®ã‚¹ã‚¿ãƒ†ã‚£ãƒƒã‚¯ãƒªãƒ³ã‚¯ã ãŒã€ãã‚‚ãã‚‚C Sharpã§ã¯ã‚¹ã‚¿ãƒ†ã‚£ãƒƒã‚¯ãƒªãƒ³ã‚¯ãŒã§ããªã„ã€‚ãŸã ã—\nMS Researchè¬¹è£½ã®ILMergeã‚’ä½¿ãˆã°å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«(exe)ã«å¯¾ã—ã¦è¤‡æ•°ã®ã‚¯ãƒ©ã‚¹ã‚¢ã‚»ãƒ³ãƒ–ãƒª(DLL)ã‚’ï¼‘ã¤ã®ã‚¢ã‚»ãƒ³ãƒ–ãƒªã«ãƒãƒ¼ã‚¸ã™ã‚‹ã“ã¨ã¯ã§ãã‚‹ã€‚ä½¿ã„æ–¹ã¯ã“ã¡ã‚‰ãŒå‚è€ƒã«ãªã‚‹ã€‚ã¾ãŸã€ILMerge-GUIã¨ã„ã†GUIãƒ„ãƒ¼ãƒ«ã‚‚ã‚ã‚‹ã€‚\nQ2. Visual Studioã®ãƒ“ãƒ«ãƒ‰ã§ã‚‚è‡ªå‹•çš„ã«è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ï¼‘ã¤ã«ã¾ã¨ã‚ã‚‹ã“ã¨ã¯ã§ãã¾ã™ã‹ï¼Ÿ\nãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§ILMerge.MSBuild.Tasksã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦*.csprojãƒ•ã‚¡ã‚¤ãƒ«ã«è‡ªå‹•ã‚¢ã‚»ãƒ³ãƒ–ãƒªç”Ÿæˆã™ã‚‹ãŸã‚ã®è¨­å®šã‚’è¿½è¨˜ã™ã‚‹ã¨VSã®ãƒ“ãƒ«ãƒ‰ã§è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ãŒï¼‘ã¤ã®ã‚¢ã‚»ãƒ³ãƒ–ãƒªã«ãƒãƒ¼ã‚¸ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•çš„ã«ã§ãã‚ãŒã‚‹ã€‚å‚è€ƒ: StackOverflow ã€ŒHow to Integrate ILMerge into Visual Studio Build Process to Merge Assemblies?ã€\nILMerge.MSBuild.Tasksã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« Install-Package ILMerge.MSBuild.Tasks *.csprojãƒ•ã‚¡ã‚¤ãƒ«ã«ä¸‹è¨˜è¨­å®šã‚’è¿½è¨˜ \u0026lt;!-- Code to merge the assemblies into one --\u0026gt; \u0026lt;UsingTask TaskName=\u0026#34;ILMerge.MSBuild.Tasks.ILMerge\u0026#34; AssemblyFile=\u0026#34;$(SolutionDir)\\packages\\ILMerge.MSBuild.Tasks.1.0.0.3\\tools\\ILMerge.MSBuild.Tasks.dll\u0026#34; /\u0026gt; \u0026lt;Target Name=\u0026#34;AfterBuild\u0026#34;\u0026gt; \u0026lt;ItemGroup\u0026gt; \u0026lt;MergeAsm Include=\u0026#34;$(OutputPath)$(TargetFileName)\u0026#34; /\u0026gt; \u0026lt;MergeAsm Include=\u0026#34;$(OutputPath)è¿½åŠ ã™ã‚‹DLLãƒ•ã‚¡ã‚¤ãƒ«å1\u0026#34; /\u0026gt; \u0026lt;MergeAsm Include=\u0026#34;$(OutputPath)è¿½åŠ ã™ã‚‹DLLãƒ•ã‚¡ã‚¤ãƒ«å2\u0026#34; /\u0026gt; ... \u0026lt;MergeAsm Include=\u0026#34;$(OutputPath)è¿½åŠ ã™ã‚‹DLLãƒ•ã‚¡ã‚¤ãƒ«åN\u0026#34; /\u0026gt; \u0026lt;/ItemGroup\u0026gt; \u0026lt;PropertyGroup\u0026gt; \u0026lt;MergedAssembly\u0026gt;å‡ºåŠ›ã™ã‚‹çµæœã‚¢ã‚»ãƒ³ãƒ–ãƒªãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆãƒ•ãƒ«ãƒ‘ã‚¹ï¼‰\u0026lt;/MergedAssembly\u0026gt; \u0026lt;/PropertyGroup\u0026gt; \u0026lt;Message Text=\u0026#34;ILMerge @(MergeAsm) -\u0026amp;gt; $(MergedAssembly)\u0026#34; Importance=\u0026#34;high\u0026#34; /\u0026gt; \u0026lt;ILMerge InputAssemblies=\u0026#34;@(MergeAsm)\u0026#34; OutputFile=\u0026#34;$(MergedAssembly)\u0026#34; TargetKind=\u0026#34;SameAsPrimaryAssembly\u0026#34; /\u0026gt; \u0026lt;/Target\u0026gt; \u0026lt;/Project\u0026gt; VSãƒ“ãƒ«ãƒ‰å®Ÿè¡Œã§ã€ãƒãƒ¼ã‚¸ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆï¼ˆ*.csprofã®MergedAssemblyã§æŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«åï¼‰ å°šã€å‰è¨˜äº‹ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¢ãƒ—ãƒªã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã§ã¯â€˜*.csprojãƒ•ã‚¡ã‚¤ãƒ«ã«ã“ã®è¨­å®šã‚’è¿½åŠ ã—ã¦ãŠã‚Šã€VSãƒ“ãƒ«ãƒ‰ã§è‡ªå‹•çš„ã«1ã‚¢ã‚»ãƒ³ãƒ–ãƒªã«ãƒãƒ¼ã‚¸ã•ã‚ŒãŸexeãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚\n","permalink":"https://unofficialism.info/posts/tips-visual-studio-csharp-merge-exe-and-dll/","summary":"Q1. C Sharpã§exeã«è¤‡æ•°DLLã‚’ã‚¹ã‚¿ãƒ†ã‚£ãƒƒã‚¯ãƒªãƒ³ã‚¯ã•ã›ã¦ï¼‘ãƒ•ã‚¡ã‚¤ãƒ«ã«ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã™ã‹ï¼Ÿ\nCã€C++ã§ã¯ãŠãªã˜ã¿ã®ã‚¹ã‚¿ãƒ†ã‚£ãƒƒã‚¯ãƒªãƒ³ã‚¯ã ãŒã€ãã‚‚ãã‚‚C Sharpã§ã¯ã‚¹ã‚¿ãƒ†ã‚£ãƒƒã‚¯ãƒªãƒ³ã‚¯ãŒã§ããªã„ã€‚ãŸã ã—\nMS Researchè¬¹è£½ã®ILMergeã‚’ä½¿ãˆã°å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«(exe)ã«å¯¾ã—ã¦è¤‡æ•°ã®ã‚¯ãƒ©ã‚¹ã‚¢ã‚»ãƒ³ãƒ–ãƒª(DLL)ã‚’ï¼‘ã¤ã®ã‚¢ã‚»ãƒ³ãƒ–ãƒªã«ãƒãƒ¼ã‚¸ã™ã‚‹ã“ã¨ã¯ã§ãã‚‹ã€‚ä½¿ã„æ–¹ã¯ã“ã¡ã‚‰ãŒå‚è€ƒã«ãªã‚‹ã€‚ã¾ãŸã€ILMerge-GUIã¨ã„ã†GUIãƒ„ãƒ¼ãƒ«ã‚‚ã‚ã‚‹ã€‚\nQ2. Visual Studioã®ãƒ“ãƒ«ãƒ‰ã§ã‚‚è‡ªå‹•çš„ã«è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ï¼‘ã¤ã«ã¾ã¨ã‚ã‚‹ã“ã¨ã¯ã§ãã¾ã™ã‹ï¼Ÿ\nãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§ILMerge.MSBuild.Tasksã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦*.csprojãƒ•ã‚¡ã‚¤ãƒ«ã«è‡ªå‹•ã‚¢ã‚»ãƒ³ãƒ–ãƒªç”Ÿæˆã™ã‚‹ãŸã‚ã®è¨­å®šã‚’è¿½è¨˜ã™ã‚‹ã¨VSã®ãƒ“ãƒ«ãƒ‰ã§è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ãŒï¼‘ã¤ã®ã‚¢ã‚»ãƒ³ãƒ–ãƒªã«ãƒãƒ¼ã‚¸ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•çš„ã«ã§ãã‚ãŒã‚‹ã€‚å‚è€ƒ: StackOverflow ã€ŒHow to Integrate ILMerge into Visual Studio Build Process to Merge Assemblies?ã€\nILMerge.MSBuild.Tasksã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« Install-Package ILMerge.MSBuild.Tasks *.csprojãƒ•ã‚¡ã‚¤ãƒ«ã«ä¸‹è¨˜è¨­å®šã‚’è¿½è¨˜ \u0026lt;!-- Code to merge the assemblies into one --\u0026gt; \u0026lt;UsingTask TaskName=\u0026#34;ILMerge.MSBuild.Tasks.ILMerge\u0026#34; AssemblyFile=\u0026#34;$(SolutionDir)\\packages\\ILMerge.MSBuild.Tasks.1.0.0.3\\tools\\ILMerge.MSBuild.Tasks.dll\u0026#34; /\u0026gt; \u0026lt;Target Name=\u0026#34;AfterBuild\u0026#34;\u0026gt; \u0026lt;ItemGroup\u0026gt; \u0026lt;MergeAsm Include=\u0026#34;$(OutputPath)$(TargetFileName)\u0026#34; /\u0026gt; \u0026lt;MergeAsm Include=\u0026#34;$(OutputPath)è¿½åŠ ã™ã‚‹DLLãƒ•ã‚¡ã‚¤ãƒ«å1\u0026#34; /\u0026gt; \u0026lt;MergeAsm Include=\u0026#34;$(OutputPath)è¿½åŠ ã™ã‚‹DLLãƒ•ã‚¡ã‚¤ãƒ«å2\u0026#34; /\u0026gt; ... \u0026lt;MergeAsm Include=\u0026#34;$(OutputPath)è¿½åŠ ã™ã‚‹DLLãƒ•ã‚¡ã‚¤ãƒ«åN\u0026#34; /\u0026gt; \u0026lt;/ItemGroup\u0026gt; \u0026lt;PropertyGroup\u0026gt; \u0026lt;MergedAssembly\u0026gt;å‡ºåŠ›ã™ã‚‹çµæœã‚¢ã‚»ãƒ³ãƒ–ãƒªãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆãƒ•ãƒ«ãƒ‘ã‚¹ï¼‰\u0026lt;/MergedAssembly\u0026gt; \u0026lt;/PropertyGroup\u0026gt; \u0026lt;Message Text=\u0026#34;ILMerge @(MergeAsm) -\u0026amp;gt; $(MergedAssembly)\u0026#34; Importance=\u0026#34;high\u0026#34; /\u0026gt; \u0026lt;ILMerge InputAssemblies=\u0026#34;@(MergeAsm)\u0026#34; OutputFile=\u0026#34;$(MergedAssembly)\u0026#34; TargetKind=\u0026#34;SameAsPrimaryAssembly\u0026#34; /\u0026gt; \u0026lt;/Target\u0026gt; \u0026lt;/Project\u0026gt; VSãƒ“ãƒ«ãƒ‰å®Ÿè¡Œã§ã€ãƒãƒ¼ã‚¸ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆï¼ˆ*.","title":"Static linking DLL to EXE in C Sharp"},{"content":"UPDATED 2017-03-22: Added SOCKS Proxy Configuration for Internet Explorer\nå¤–éƒ¨ã‹ã‚‰ã®æ¥ç¶šï¼ˆSSHã€HTTPãªã©ï¼‰ã‚’å—ã‘ä»˜ã‘ã¦ã„ãªã„Azure ä»®æƒ³ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯(ä»¥ä¸‹VNET)å†…ã®ãƒªã‚½ãƒ¼ã‚¹ã«SOCKSãƒ—ãƒ­ã‚­ã‚·ã‚’çµŒç”±ã—ã¦å¤–éƒ¨ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã—ã‚‡ã†ã¨ã„ã†ãŠè©±ã€‚æœ¬è¨˜äº‹ã§ã¯Azure VNETå†…ã®å¤–éƒ¨ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ã—ã¦ã„ãªã„VMã¸ã®SSHãƒ­ã‚°ã‚¤ãƒ³ã¨HTTPã‚µãƒ¼ãƒã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã®ãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°ã®2ã¤ã®æ–¹æ³•ã‚’ç´¹ä»‹ã™ã‚‹ã€‚\nSOCKS(RFC1928) ã¨ã¯ã•ã¾ã–ã¾ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒé–“ã«ãƒ•ã‚¡ã‚¤ã‚¢ãƒ¼ã‚¦ã‚©ãƒ¼ãƒ«ã‚’æŒŸã‚“ã§ã„ã¦ã‚‚å®‰å…¨ã«å¿«é©ã«ã‚„ã‚Šå–ã‚ŠãŒã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ä½œã‚‰ã‚ŒãŸãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®ã“ã¨ã§ã€SOCKSãƒ—ãƒ­ã‚­ã‚·ã¯SOCKSãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’å—ã‘å–ã‚Šãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«å†…å¤–ã¨ã®æ¥ç¶šã‚’å¯èƒ½ã«ã™ã‚‹ã‚‚ã®ã§ã‚ã‚‹ã€‚ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚„Network Security Group (NSG)ã«ã‚ˆã‚Šãƒãƒƒãƒˆãƒ¼ãƒ¯ãƒ¼ã‚¯åˆ†é›¢è¨­å®šã•ã‚ŒãŸAzure VNETå†…ã®ãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦ä¸€æ™‚çš„ã«æœ¬æ¥ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ã—ãªã„ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ãŒå¿…è¦ãªçŠ¶æ³ã¯ã‚ã‚‹ã‹ã¨æ€ã†ã€‚ãã®ã‚ˆã†ãªæ™‚ã«æ¯å›è¨­å®šå¤‰æ›´ã§å¿…è¦ãªãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€ã‚¢ã‚¯ã‚»ã‚¹å…ˆã«å¯¾ã—ã¦ç©´ã‚’ã‚ã‘ã‚‹ã®ã¯éå¸¸ã«é¢å€’ã§ã‚ã‚Šã€ã¾ãŸã‚µã‚¤ãƒˆé–“VPNã€ãƒã‚¤ãƒ³ãƒˆå¯¾ã‚µã‚¤ãƒˆVPNã¨ãªã‚‹ã¨ã•ã‚‰ã«æ‰‹é–“ãŒã‹ã‹ã‚‹ã€‚ãŠæ‰‹è»½ã«ã€ã‚‚ã—ãã¯å®šå¸¸çš„ã§ã¯ãªã„ãŒä¸€æ™‚çš„ã«å†…éƒ¨ãƒªã‚½ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã„å ´åˆã«SOCKSãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã§ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æ¤œè¨ã—ã¦ã¿ã¦ã¯ã„ã‹ãŒã ã‚ã†ã‹ã€‚ä»¥ä¸‹ã¯SOCKSãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã«ã‚ˆã‚‹Azure VNETå†…ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªã‚½ãƒ¼ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã‚ã‚‹ã€‚\nSOCKSãƒ—ãƒ­ã‚­ã‚·ã®ä½œæˆ ã¾ãšã¯OpenSSHã®ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰æ©Ÿèƒ½ã‚’ä½¿ã£ã¦SOCKSãƒ—ãƒ­ã‚­ã‚·ã‚’ä½œæˆã™ã‚‹ã€‚ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã¯SSHã‚’SOCKSãƒ—ãƒ­ã‚­ã‚·ã¨ã—ã¦æŒ¯èˆã†ã“ã¨ã‚’å¯èƒ½ã«ã™ã‚‹ã€‚SSHã§ã‚¢ã‚¯ã‚»ã‚¹å…ˆãƒ›ã‚¹ãƒˆã¨ DynamicFoward(-D)ã§ãƒãƒ¼ãƒˆã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§localhostã«SOCKSãƒ—ãƒ­ã‚­ã‚·ãŒç«‹ã¡ä¸ŠãŒã‚ŠæŒ‡å®šã®TCPãƒãƒ¼ãƒˆ(SOCKSãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒã¯åŸºæœ¬çš„ã¯1080ã ãŒã€å‰²ã‚Šå½“ã¦å¯èƒ½ãªãƒãƒ¼ãƒˆã§ã‚ã‚Œã°ã©ã®ãƒãƒ¼ãƒˆã§ã‚‚OK)ã‚’localhostå´ã‹ã‚‰ãƒ­ã‚°ã‚¤ãƒ³å…ˆãƒ›ã‚¹ãƒˆã®SSHã‚µãƒ¼ãƒã«è»¢é€ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚ã‚‚ã¡ã‚ã‚“çµŒè·¯ã¯æš—å·åŒ–ã•ã‚Œã‚‹ã€‚ç¾çŠ¶ã®ã‚µãƒãƒ¼ãƒˆãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¯SOCKS4ã¨SOCKS5ã€‚\nä¾‹ãˆã°ä¸Šå›³ã§ã„ã†ã¨Jump Server(è¸ã¿å°)ã«DynamicFoward(-D)1080ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ã€Jump Serverã«ãƒãƒ¼ãƒˆ1080ã‚’è»¢é€ã™ã‚‹SOCKSãƒ—ãƒ­ã‚­ã‚·ãŒ localhostã«ç«‹ã¡ä¸ŠãŒã‚Šã€ãã®localhost:1080ã«å¯¾ã—ã¦SOCKS4ã¾ãŸã¯SOCKS5ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§æ¥ç¶šã™ã‚‹ã“ã¨ã§Jump Serverã‚’çµŒç”±ã—ã¦é€šä¿¡ã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚\nlocalhostãƒãƒ¼ãƒˆ1080ã®Jump Serverã¸ã®ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã¯æ¬¡ã®ã‚ˆã†ã«-Dã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§è¡Œã†ã€‚\n$ ssh -2 -D 1080 -l [Account] [Jump Server] æ¯å›-Dã‚ªãƒ—ã‚·ãƒ§ãƒ³æŒ‡å®šãŒé¢å€’ãªå ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«confg(ssh_config)ã«DynamicForwardã®è¨˜è¿°ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã€‚\n~/.ssh/config\nHost JumpServer User [Accountå] HostName/IP [Jump Serverãƒ›ã‚¹ãƒˆ/IPã‚¢ãƒ‰ãƒ¬ã‚¹] Protocol 2 ForwardAgent yes DynamicForward 1080 ä¸Šè¨˜OpenSSHã®è¨­å®šã¯ã€Linux/Macã®å ´åˆã¯æ¨™æº–Terminalã‚’ä½¿ãˆã°ã‚ˆã„ãŒã€Windowsã®å ´åˆã¯Cygwinã€Xmingãªã©Xç«¯æœ«ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‚½ãƒ•ãƒˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãŸã ãå¿…è¦ãŒã‚ã‚‹ã€‚ã¾ãŸXç«¯æœ«ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãªãã¨ã‚‚Windowsã§ã¯æœ‰åãªSSHã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚½ãƒ•ãƒˆPuttyãŒãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã«å¯¾å¿œã—ã¦ã„ã‚‹ãŸã‚Puttyã‚’ä½¿ã£ã¦SOCKSãƒ—ãƒ­ã‚­ã‚·ä½œæˆã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã€‚è©³ã—ãã¯ã€ŒDynamic Port Forwarding with SOCKS over SSHã€ãŒå‚è€ƒã«ãªã‚‹ã‹ã¨ã€‚\nSOCKSãƒ—ãƒ­ã‚­ã‚·ã‚’ä½¿ã£ãŸSSHæ¥ç¶š æ¬¡ã«ä¸Šè¨˜ã§ä½œæˆã—ãŸSOCKSãƒ—ãƒ­ã‚­ã‚·ã‚’çµŒç”±ã—ã¦VNETå†…ã®ã‚µãƒ¼ãƒã«SSHæ¥ç¶šã‚’ã™ã‚‹ã€‚ netcatã§SOCKSãƒ—ãƒ­ã‚­ã‚·ã‚’çµŒç”±ã—ã¦localhostã‹ã‚‰ç›®çš„ã®VNETå†…ã‚µãƒ¼ãƒï¼ˆServerXï¼‰é–“ã«netcatãƒˆãƒ³ãƒãƒ«ã‚’ä½œæˆã—ã¦ServerXã«ã¯ãã®netcatãƒˆãƒ³ãƒãƒ«ã‚’é€šã˜ã¦æ¥ç¶šã™ã‚‹ã€‚\nlocal$ ssh -2 -l [Account] -o \u0026#39;ProxyCommand nc -x localhost:1080 %h %p\u0026#39; [ServerX] netcat ã®ãƒ—ãƒ­ã‚­ã‚·æŒ‡å®šã¯-xã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§è¡Œã†ã€‚ ã“ã“ã§ã¯äº‹å‰ã«ä½œæˆã—ãŸSOCKSãƒ—ãƒ­ã‚­ã‚·(localhost:1080)ã‚’æŒ‡å®šã€‚ netcatãƒˆãƒ³ãƒãƒ«ã®ä½œæˆã‚³ãƒãƒ³ãƒ‰ã¯ProxyCommandã«è¨˜è¿°ã™ã‚‹ã€‚ã“ã¡ã‚‰ã‚‚æ¯å›é•·ã„ã‚ªãƒ—ã‚·ãƒ§ãƒ³å…¥åŠ›ã‚’é¿ã‘ã‚‹ãŸã‚ã« configï¼ˆssh_configï¼‰è¨­å®šã™ã‚‹ã¨ä¾¿åˆ©ã§ã‚ã‚‹ã€‚\n** ~/.ssh/config**\nHost ServerX User [Account] Protocol 2 ForwardAgent yes ProxyCommand nc -x localhost:1080 -w1 %h %p æ³¨æ„ç‚¹ã¨ã—ã¦ã€netcatã«ã¯GNUæœ¬å®¶ç‰ˆã¨ãã‚Œä»¥å¤–ã«ã„ãã¤ã‹æ´¾ç”ŸãŒã‚ã‚‹ãŒ-x ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®åˆ©ç”¨å¯èƒ½ãªnetcatã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ã‚ªãƒªã‚¸ãƒŠãƒ«ã®netcatã‚„GNU netcatã«ã¯-xã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ãªã„ã€‚ã“ã“ã§ä½¿ç”¨ã—ã¦ã„ã‚‹netcatã¯IPv6ã«å¯¾å¿œã—ã¦ã„ã‚‹OpenBSD netcatã€‚\nã‚‚ã¡ã‚ã‚“VNETå†…ã®VMã¸ã®SSHæ¥ç¶šã®åˆ¥è§£ã¨ã—ã¦ProxyCommandã§Jump Serverã‹ã‚‰ServerXã¸netcatãƒˆãƒ³ãƒãƒ«ã‚’ä½œæˆã—ã¦localã‹ã‚‰ServerXã«ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã€‚\nlocal$ ssh -2 -o \u0026#39;ProxyCommand ssh [Jump Server] nc -w1 %h %p\u0026#39; [ServerX] å®Ÿã¯ã“ã®æ–¹æ³•ã®ã»ã†ãŒProxyCommand ã§ãƒ—ãƒ­ã‚­ã‚·è¨­å®šã‚’è¡Œã†ãŸã‚äº‹å‰ã«åˆ¥ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ä½•ã‹ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒãªãé–“é•ã„ãªãSOCKSãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã§ã®æ¥ç¶šã‚ˆã‚Šã‚‚æ¥½ã€‚ã§ã¯SOCKSãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã§æ¥ç¶šã™ã‚‹ç†ç”±ã¯ä½•ã‹ï¼Ÿ ç†ç”±ã¯å˜ç´”ã§ã€é€šå¸¸Jump Serverã¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šä¸Šã®ç†ç”±ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã‚‚ã»ã¨ã‚“ã©ä½•ã‚‚ã§ããªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«æ©Ÿèƒ½ã‚’ç„¡åŠ¹åŒ–ã—ã¦ã„ã‚‹ã“ã¨ãŒå¤šãã€ã‚ˆã£ã¦netcatãŒä½¿ãˆãªã„(ncã¯ãŠã‚ã‹sshã‚³ãƒãƒ³ãƒ‰ä»¥å¤–ã»ã¨ã‚“ã©ä½•ã‚‚ä½¿ãˆãªã„)ç’°å¢ƒã ã£ãŸã‚Šã™ã‚‹ã€‚ã“ã®å ´åˆã€ä¸Šè¨˜ã§èª¬æ˜ã—ãŸã‚ˆã†ã«SOCKSãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã§ã®SSHãƒ­ã‚°ã‚¤ãƒ³ãŒæœ‰åŠ¹ãªæ‰‹æ®µã¨ãªã‚‹ã€‚\nSOCKSãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã§ã®ãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚° ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã«SOCKSãƒ—ãƒ­ã‚­ã‚·å¯¾å¿œã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’\tå…¥ã‚Œã‚‹ã“ã¨ã§ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã«ã‚ˆã‚‹ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªã‚½ãƒ¼ã‚¹ï¼ˆå†…éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å†…ã®ã‚¢ãƒ—ãƒªãƒ»ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ç­‰ã®ã‚¦ã‚§ãƒ–UIã‚’æŒã£ãŸç®¡ç†ãƒ„ãƒ¼ãƒ«ãªã©ï¼‰ã®é–²è¦§ã‚‚å¯èƒ½ã¨ãªã‚‹ã€‚æœ‰åãªã‚‚ã®ã«SwitchySharp(Google Chrome)ã‚„Foxyproxy(Firefox)ãªã©ãŒã‚ã‚‹ã€‚ä»¥ä¸‹ç°¡å˜ãªè¨­å®šã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ä¹—ã›ã¦ãŠãã€‚å…±ã«ã€Œhttp://yoichika-.cloudapp.netã€ãªURIãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ™‚ã«ã®ã¿SOCKSãƒ—ãƒ­ã‚­ã‚·localhost:12345çµŒç”±ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹è¨­å®šã¨ãªã£ã¦ã„ã‚‹ã€‚\nGoogle Chrome - SwitchySharp\nFirefox - Foxyproxy\nInternet Explorer - Out-of-box feature\nAs answered in Stack Overflow, Internet Explorer does support SOCKS proxies.\nTools \u0026gt; Internet Options \u0026gt; Connections \u0026gt; LAN Settings \u0026gt; Proxy Server \u0026gt; Advanced Enjoy Accessing private resources with SOCKS Proxy!\n","permalink":"https://unofficialism.info/posts/accessing-private-resource-in-azure-vnet-via-socks-proxy/","summary":"UPDATED 2017-03-22: Added SOCKS Proxy Configuration for Internet Explorer\nå¤–éƒ¨ã‹ã‚‰ã®æ¥ç¶šï¼ˆSSHã€HTTPãªã©ï¼‰ã‚’å—ã‘ä»˜ã‘ã¦ã„ãªã„Azure ä»®æƒ³ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯(ä»¥ä¸‹VNET)å†…ã®ãƒªã‚½ãƒ¼ã‚¹ã«SOCKSãƒ—ãƒ­ã‚­ã‚·ã‚’çµŒç”±ã—ã¦å¤–éƒ¨ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã—ã‚‡ã†ã¨ã„ã†ãŠè©±ã€‚æœ¬è¨˜äº‹ã§ã¯Azure VNETå†…ã®å¤–éƒ¨ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ã—ã¦ã„ãªã„VMã¸ã®SSHãƒ­ã‚°ã‚¤ãƒ³ã¨HTTPã‚µãƒ¼ãƒã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã®ãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°ã®2ã¤ã®æ–¹æ³•ã‚’ç´¹ä»‹ã™ã‚‹ã€‚\nSOCKS(RFC1928) ã¨ã¯ã•ã¾ã–ã¾ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒé–“ã«ãƒ•ã‚¡ã‚¤ã‚¢ãƒ¼ã‚¦ã‚©ãƒ¼ãƒ«ã‚’æŒŸã‚“ã§ã„ã¦ã‚‚å®‰å…¨ã«å¿«é©ã«ã‚„ã‚Šå–ã‚ŠãŒã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ä½œã‚‰ã‚ŒãŸãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®ã“ã¨ã§ã€SOCKSãƒ—ãƒ­ã‚­ã‚·ã¯SOCKSãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’å—ã‘å–ã‚Šãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«å†…å¤–ã¨ã®æ¥ç¶šã‚’å¯èƒ½ã«ã™ã‚‹ã‚‚ã®ã§ã‚ã‚‹ã€‚ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚„Network Security Group (NSG)ã«ã‚ˆã‚Šãƒãƒƒãƒˆãƒ¼ãƒ¯ãƒ¼ã‚¯åˆ†é›¢è¨­å®šã•ã‚ŒãŸAzure VNETå†…ã®ãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦ä¸€æ™‚çš„ã«æœ¬æ¥ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯ã—ãªã„ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ãŒå¿…è¦ãªçŠ¶æ³ã¯ã‚ã‚‹ã‹ã¨æ€ã†ã€‚ãã®ã‚ˆã†ãªæ™‚ã«æ¯å›è¨­å®šå¤‰æ›´ã§å¿…è¦ãªãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€ã‚¢ã‚¯ã‚»ã‚¹å…ˆã«å¯¾ã—ã¦ç©´ã‚’ã‚ã‘ã‚‹ã®ã¯éå¸¸ã«é¢å€’ã§ã‚ã‚Šã€ã¾ãŸã‚µã‚¤ãƒˆé–“VPNã€ãƒã‚¤ãƒ³ãƒˆå¯¾ã‚µã‚¤ãƒˆVPNã¨ãªã‚‹ã¨ã•ã‚‰ã«æ‰‹é–“ãŒã‹ã‹ã‚‹ã€‚ãŠæ‰‹è»½ã«ã€ã‚‚ã—ãã¯å®šå¸¸çš„ã§ã¯ãªã„ãŒä¸€æ™‚çš„ã«å†…éƒ¨ãƒªã‚½ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã„å ´åˆã«SOCKSãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã§ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æ¤œè¨ã—ã¦ã¿ã¦ã¯ã„ã‹ãŒã ã‚ã†ã‹ã€‚ä»¥ä¸‹ã¯SOCKSãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã«ã‚ˆã‚‹Azure VNETå†…ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªã‚½ãƒ¼ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã‚ã‚‹ã€‚\nSOCKSãƒ—ãƒ­ã‚­ã‚·ã®ä½œæˆ ã¾ãšã¯OpenSSHã®ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰æ©Ÿèƒ½ã‚’ä½¿ã£ã¦SOCKSãƒ—ãƒ­ã‚­ã‚·ã‚’ä½œæˆã™ã‚‹ã€‚ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã¯SSHã‚’SOCKSãƒ—ãƒ­ã‚­ã‚·ã¨ã—ã¦æŒ¯èˆã†ã“ã¨ã‚’å¯èƒ½ã«ã™ã‚‹ã€‚SSHã§ã‚¢ã‚¯ã‚»ã‚¹å…ˆãƒ›ã‚¹ãƒˆã¨ DynamicFoward(-D)ã§ãƒãƒ¼ãƒˆã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§localhostã«SOCKSãƒ—ãƒ­ã‚­ã‚·ãŒç«‹ã¡ä¸ŠãŒã‚ŠæŒ‡å®šã®TCPãƒãƒ¼ãƒˆ(SOCKSãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒã¯åŸºæœ¬çš„ã¯1080ã ãŒã€å‰²ã‚Šå½“ã¦å¯èƒ½ãªãƒãƒ¼ãƒˆã§ã‚ã‚Œã°ã©ã®ãƒãƒ¼ãƒˆã§ã‚‚OK)ã‚’localhostå´ã‹ã‚‰ãƒ­ã‚°ã‚¤ãƒ³å…ˆãƒ›ã‚¹ãƒˆã®SSHã‚µãƒ¼ãƒã«è»¢é€ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚ã‚‚ã¡ã‚ã‚“çµŒè·¯ã¯æš—å·åŒ–ã•ã‚Œã‚‹ã€‚ç¾çŠ¶ã®ã‚µãƒãƒ¼ãƒˆãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¯SOCKS4ã¨SOCKS5ã€‚\nä¾‹ãˆã°ä¸Šå›³ã§ã„ã†ã¨Jump Server(è¸ã¿å°)ã«DynamicFoward(-D)1080ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ã€Jump Serverã«ãƒãƒ¼ãƒˆ1080ã‚’è»¢é€ã™ã‚‹SOCKSãƒ—ãƒ­ã‚­ã‚·ãŒ localhostã«ç«‹ã¡ä¸ŠãŒã‚Šã€ãã®localhost:1080ã«å¯¾ã—ã¦SOCKS4ã¾ãŸã¯SOCKS5ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§æ¥ç¶šã™ã‚‹ã“ã¨ã§Jump Serverã‚’çµŒç”±ã—ã¦é€šä¿¡ã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚\nlocalhostãƒãƒ¼ãƒˆ1080ã®Jump Serverã¸ã®ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã¯æ¬¡ã®ã‚ˆã†ã«-Dã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§è¡Œã†ã€‚\n$ ssh -2 -D 1080 -l [Account] [Jump Server] æ¯å›-Dã‚ªãƒ—ã‚·ãƒ§ãƒ³æŒ‡å®šãŒé¢å€’ãªå ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«confg(ssh_config)ã«DynamicForwardã®è¨˜è¿°ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã€‚\n~/.ssh/config\nHost JumpServer User [Accountå] HostName/IP [Jump Serverãƒ›ã‚¹ãƒˆ/IPã‚¢ãƒ‰ãƒ¬ã‚¹] Protocol 2 ForwardAgent yes DynamicForward 1080 ä¸Šè¨˜OpenSSHã®è¨­å®šã¯ã€Linux/Macã®å ´åˆã¯æ¨™æº–Terminalã‚’ä½¿ãˆã°ã‚ˆã„ãŒã€Windowsã®å ´åˆã¯Cygwinã€Xmingãªã©Xç«¯æœ«ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‚½ãƒ•ãƒˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãŸã ãå¿…è¦ãŒã‚ã‚‹ã€‚ã¾ãŸXç«¯æœ«ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãªãã¨ã‚‚Windowsã§ã¯æœ‰åãªSSHã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚½ãƒ•ãƒˆPuttyãŒãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã«å¯¾å¿œã—ã¦ã„ã‚‹ãŸã‚Puttyã‚’ä½¿ã£ã¦SOCKSãƒ—ãƒ­ã‚­ã‚·ä½œæˆã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã€‚è©³ã—ãã¯ã€ŒDynamic Port Forwarding with SOCKS over SSHã€ãŒå‚è€ƒã«ãªã‚‹ã‹ã¨ã€‚\nSOCKSãƒ—ãƒ­ã‚­ã‚·ã‚’ä½¿ã£ãŸSSHæ¥ç¶š æ¬¡ã«ä¸Šè¨˜ã§ä½œæˆã—ãŸSOCKSãƒ—ãƒ­ã‚­ã‚·ã‚’çµŒç”±ã—ã¦VNETå†…ã®ã‚µãƒ¼ãƒã«SSHæ¥ç¶šã‚’ã™ã‚‹ã€‚ netcatã§SOCKSãƒ—ãƒ­ã‚­ã‚·ã‚’çµŒç”±ã—ã¦localhostã‹ã‚‰ç›®çš„ã®VNETå†…ã‚µãƒ¼ãƒï¼ˆServerXï¼‰é–“ã«netcatãƒˆãƒ³ãƒãƒ«ã‚’ä½œæˆã—ã¦ServerXã«ã¯ãã®netcatãƒˆãƒ³ãƒãƒ«ã‚’é€šã˜ã¦æ¥ç¶šã™ã‚‹ã€‚\nlocal$ ssh -2 -l [Account] -o \u0026#39;ProxyCommand nc -x localhost:1080 %h %p\u0026#39; [ServerX] netcat ã®ãƒ—ãƒ­ã‚­ã‚·æŒ‡å®šã¯-xã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§è¡Œã†ã€‚ ã“ã“ã§ã¯äº‹å‰ã«ä½œæˆã—ãŸSOCKSãƒ—ãƒ­ã‚­ã‚·(localhost:1080)ã‚’æŒ‡å®šã€‚ netcatãƒˆãƒ³ãƒãƒ«ã®ä½œæˆã‚³ãƒãƒ³ãƒ‰ã¯ProxyCommandã«è¨˜è¿°ã™ã‚‹ã€‚ã“ã¡ã‚‰ã‚‚æ¯å›é•·ã„ã‚ªãƒ—ã‚·ãƒ§ãƒ³å…¥åŠ›ã‚’é¿ã‘ã‚‹ãŸã‚ã« configï¼ˆssh_configï¼‰è¨­å®šã™ã‚‹ã¨ä¾¿åˆ©ã§ã‚ã‚‹ã€‚","title":"SOCKSãƒ—ãƒ­ã‚­ã‚·ã‚’çµŒç”±ã—ãŸAzure VNETãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªã‚½ãƒ¼ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹"},{"content":"ARMã¨Azure Insights API Azureä¸Šã®ã•ã¾ã–ã¾ãªã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ¡ãƒˆãƒªãƒƒã‚¯æƒ…å ±ã‚’APIçµŒç”±ã§å–å¾—ã—ãŸã„ã€‚ãã†ã„ã†ã“ã¨ã§ã‚ã‚Œã°Azure Service Management APIã‚’ä½¿ãˆã°ã„ã„ã˜ã‚ƒãªã„ã‹ã¨ã„ã†å£°ãŒèã“ãˆã¦ããã†ãªã¨ã“ã‚ã ãŒå®Ÿã¯æ—¢ã«ã“ã®ã‚„ã‚Šæ–¹ã¯æ™‚ä»£é…ã‚Œã¨ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ã”å­˜ã˜ã ã‚ã†ã‹ï¼Ÿ 2014å¹´5æœˆã”ã‚ï¼Ÿã«ç™»å ´ã—ãŸAzureã®æ–°ã—ã„è€ƒãˆæ–¹ã«Resourceã€ResourceGroupã€Azure Resource Managerã¨ã„ã†ã‚‚ã®ãŒã‚ã‚‹ã€‚ç°¡å˜ãªèª¬æ˜ã™ã‚‹ã¨ã€Azureä¸Šã®PaaSã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã€ä»®æƒ³ãƒã‚·ãƒ³ãªã©ã™ã¹ã¦ã®ç®¡ç†å¯èƒ½ãªè³‡æºã‚’ãƒªã‚½ãƒ¼ã‚¹(Resource)ã¨ã‚ˆã°ã‚Œã‚‹å˜ä½ã«ç´°åˆ†åŒ–ã—ã€ãã‚Œã‚‰ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ãŸã‚‚ã®ãŒResourceGroupã€ãã—ã¦å…¨ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ã¯Azure Resource Managerï¼ˆä»¥ä¸‹ARMï¼‰ã¨ã„ã†ã‚‚ã®ã§ç®¡ç†å¯èƒ½ã«ãªã£ã¦ã„ã‚‹ã€‚ãã—ã¦ã“ã®ARMã§ç®¡ç†å¯èƒ½ãªä¸–ç•Œã®ãƒªã‚½ãƒ¼ã‚¹ç¾¤ã«ç´ã¥ããƒ¡ãƒˆãƒªãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã¯Azure Insights APIã§å–å¾—å¯èƒ½ã¨ãªã£ã¦ã„ã‚‹ã€‚æœ¬è¨˜äº‹ã§ã¯ã•ã¾ã–ã¾ãªãƒªã‚½ãƒ¼ã‚¹ã®ä¸­ã§ã‚‚Web Appsã«çµã£ã¦ã€Azure Insights REST API (Metric)ã‚’ä½¿ã£ã¦ãã®ãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã™ã‚‹ã€‚\nARM Explorerã§ã©ã®ãƒ¡ãƒˆãƒªãƒƒã‚¯ãŒå–å¾—å¯èƒ½ãªã®ã‹ç¢ºèªã™ã‚‹ ARM Explorer (https://resources.azure.com/) ã‚’ã”å­˜ã˜ã ã‚ã†ã‹ï¼Ÿã€€ã“ã‚Œã¯ãã®åã®é€šã‚ŠAzureä¸Šã®å…¨ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ï¼ˆã”åˆ©ç”¨ã®ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã«ç´ã¥ãå…¨ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ï¼‰ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã§ã‚ã‚Šã€ã“ã‚Œã‚’ä½¿ã†ã“ã¨ã§ã“ã®ARMç®¡ç†ä¸‹ã®ä¸–ç•Œã®ã™ã¹ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ãƒ“ãƒ¥ãƒ¼ã§é–²è¦§ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ã“ã®ARM Explorerã§é–²è¦§å¯èƒ½ãªå„ãƒªã‚½ãƒ¼ã‚¹ã®æƒ…å ±ã®ä¸­ã«metricdefinitionsã¨ã„ã†ã‚‚ã®ãŒã‚ã£ã¦ã€ã“ã‚Œã«ã¯ãã®ãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦æŒ‡å®šå¯èƒ½ãªãƒ¡ãƒˆãƒªãƒƒã‚¯ã®ç¨®é¡ã‚„ãã®å®šç¾©æƒ…å ±ãªã©ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã€‚ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ¡ãƒˆãƒªãƒƒã‚¯å–å¾—ã‚’ã™ã‚‹éš›ã¯ã€ã¾ãšã¯ARM Explorerã§ç›®çš„ã®ãƒªã‚½ãƒ¼ã‚¹ã®metricdefinitionsã‹ã‚‰æŒ‡å®šå¯èƒ½ãªãƒ¡ãƒˆãƒªãƒƒã‚¯ã®ç¨®é¡ã‚’æŠŠæ¡ã—ã¦ã‹ã‚‰APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’çµ„ã¿ç«‹ã¦ã¦ã„ãŸã ã‘ã‚Œã°ã¨æ€ã†ã€‚ARM Explorerã‚’ä½¿ã£ã¦æœ¬è¨˜äº‹ã§å–å¾—å¯¾è±¡ã¨ã—ã¦ã„ã‚‹Web Appsï¼ˆã“ã“ã§ã¯ã‚µã‚¤ãƒˆåyoichikademoã‚’å¯¾è±¡ï¼‰ã®metricdefinitionsã‚’é–²è¦§ã—ã¦ã„ã‚‹ã®ãŒä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã«ãªã‚‹ã€‚\nAzure Insights REST APIãƒ¡ãƒˆãƒªãƒƒã‚¯å–å¾—ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ Azure Insights APIã«ã¯æ¬¡ã®ã‚ˆã†ãª(1)ãƒ¡ãƒˆãƒªãƒƒã‚¯å®šç¾©ä¸€è¦§ã®å–å¾—ã¨(2)å¯¾è±¡ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ¡ãƒˆãƒªãƒƒã‚¯æƒ…å ±å–å¾—ã®2ã¤ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒã‚ã‚‹ã€‚å½“ç„¶ãªãŒã‚‰ãƒ¡ãƒˆãƒªãƒƒã‚¯ã®å–å¾—ã«ã¯(2)ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã€‚\n(1)ãƒ¡ãƒˆãƒªãƒƒã‚¯å®šç¾©ä¸€è¦§å–å¾—\nGET https://management.azure.com /subscriptions/{-id}/resourceGroups/{resource-group-name}/providers/{resource-provider-namespace}/{resource-type}/{resource-name}/metricDefinitions [Parameters] api-version={api-version} $filter={filter} (2)ãƒ¡ãƒˆãƒªãƒƒã‚¯æƒ…å ±å–å¾—\nGET https://management.azure.com /subscriptions/{-id}/resourceGroups/{resource-group-name}/providers/{resource-provider-namespace}/sites/{sitename}/metrics [Parameters] api-version={api-version} $filter={filter} APIã®å…±é€šéƒ¨åˆ†ã¯ä¸‹è¨˜ã®é€šã‚Šã€‚Azure Insights APIã¸ã®å…¨ã¦ã®è¦æ±‚ã¯Azure Active Directoryã‚’ä½¿ç”¨ã—ã¦èªè¨¼ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ã“ã®èªè¨¼ã«ã‚ˆã‚Šå¾—ã‚‰ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’å„APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã®Authorizationãƒ˜ãƒƒãƒ€ã«æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—ã®æ–¹æ³•ã«ã¯PowerShellã‚’ä½¿ç”¨ã—ãŸæ–¹æ³•ã¨Azureç®¡ç†ãƒãƒ¼ã‚¿ãƒ«ã‚’ä½¿ç”¨ã—ã¦èªè¨¼ã™ã‚‹2ã¤ã®æ–¹æ³•ãŒã‚ã‚‹ã€‚è©³ã—ãã¯ã€ŒAzure ã‚¤ãƒ³ã‚µã‚¤ãƒˆè¦æ±‚ã‚’èªè¨¼ã™ã‚‹ã€ã‚’å‚ç…§ãã ã•ã„ã€‚\n{api-version}ï¼š\u0026ldquo;2014-04-01\u0026rdquo; {subscription-id} ï¼š ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ID {resource-group-name}ï¼š ãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—ã‚’æŒ‡å®šã€‚è©³ç´°ã¯ã€Œãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½¿ç”¨ã—ãŸ Azure ãƒªã‚½ãƒ¼ã‚¹ã®ç®¡ç†ã€ã‚’å‚ç…§ãã ã•ã„ Acceptãƒ˜ãƒƒãƒ€ãƒ¼ï¼š\u0026quot;application/json\u0026quot;ã‚’æŒ‡å®šã€‚ã“ã‚Œã‚’æŒ‡å®šã—ãªã„å ´åˆã€çµæœã¯XMLã§è¿”å´ã•ã‚Œã‚‹ Authorizationãƒ˜ãƒƒãƒ€ãƒ¼ã«Azure Active Directory ã‹ã‚‰å–å¾—ã™ã‚‹ JSON Web Tokenï¼ˆJWTï¼‰ ã«è¨­å®šã™ã‚‹ã€‚è©³ç´°ã¯ã€ŒAzure ã‚¤ãƒ³ã‚µã‚¤ãƒˆè¦æ±‚ã‚’èªè¨¼ã™ã‚‹ã€ã‚’å‚ç…§ãã ã•ã„ å®Ÿéš›ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹å–å¾—APIã§ã¯$filterãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ä»˜ä¸ãŒå¿…è¦ã¨ãªã‚‹ã€‚$filterã«ã¯ä¸»ã«ãƒ¡ãƒˆãƒªãƒƒã‚¯ã®ç¨®é¡(name.value)ã€æ™‚é–“ãƒ¬ãƒ³ã‚¸(startTime - endTime)ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ¼ãƒ«(timeGrain)ã®3ç¨®é¡ã®æ¡ä»¶ã‚’æŒ‡å®šã™ã‚‹ã€‚\nCpuTimeã¨MemoryWorkingSetãƒ¡ãƒˆãƒªãƒƒã‚¯æŒ‡å®šä¾‹ (å®Ÿéš›ã¯1è¡Œã«ã¾ã¨ã‚ã‚‹)\n$filter= (name.value eq â€˜CpuTimeâ€™ or name.value eq â€˜MemoryWorkingSetâ€™) and startTime eq â€˜2015-08-01T15:00:00Zâ€™ and endTime eq â€˜2015-08-02T15:00:00Zâ€™ and timeGrain eq durationâ€™PT1Mâ€™ $filterãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã¯å®Ÿéš›ã¯URL Encodeã‹ã‘ãŸæ–‡å­—åˆ—ã‚’æ¸¡ã™ã€‚ãƒ¡ãƒˆãƒªãƒƒã‚¯ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ï¼ˆtimeGrainï¼‰ã¯1åˆ†å˜ä½ãªã‚‰PT1Mã€5åˆ†å˜ä½ãªã‚‰PT5Mã€1æ™‚é–“å˜ä½ãªã‚‰ã°PT1Hã€1æ—¥å˜ä½ãªã‚‰ã°PT1Dãªã©ã‚’æŒ‡å®šã™ã‚‹ã€‚\nã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ Azure Insightsã®ãƒ¡ãƒˆãƒªãƒƒã‚¯å–å¾—APIã‚’ä½¿ã£ã¦Web Appã®ãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚’å–å¾—ã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’Githubã«ã‚¢ãƒƒãƒ—ã—ãŸã€‚åŒæ§˜ã®ã“ã¨ã‚’è€ƒãˆã¦ã„ã‚‹äººã«ã¨ã£ã¦å°‘ã—ã§ã‚‚å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã‚ã‚‹ã€‚\nhttps://github.com/yokawasa/azure-samples/tree/master/GetAppServiceMetrics\nã“ã®ã‚µãƒ³ãƒ—ãƒ«ã§ã¯CpuTimeã€MemoryWorkingSetã€AverageResponseTimeã®3ã¤ã®ãƒ¡ãƒˆãƒªãƒƒã‚¯æƒ…å ±ã‚’1æ™‚é–“ã”ã¨ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«ã§2015-08-01ï½2015-08-30ã®æœŸé–“åˆ†å–å¾—ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚ã“ã®éƒ¨åˆ†ã¯ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¦ã„ã‚‹ã®ã§å¿…è¦ã«å¿œã˜ã¦ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ï¼ˆProgram.csï¼‰ã‚’é©å®œå¤‰æ›´ã„ãŸã ã‘ã‚Œã°ã¨æ€ã†ã€‚ã¾ãŸåˆ©ç”¨è€…ã”ã¨ã®æƒ…å ±ã¯è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«App.configã§æŒ‡å®šã™ã‚‹ã€‚ä»¥ä¸‹ç°¡å˜ã«App.configã®è¨­å®šå†…å®¹ã‚’è§£èª¬ã™ã‚‹ã€‚\nApp.config\n\u0026lt;appSettings\u0026gt; \u0026lt;add key=\u0026#34;subscriptionId\u0026#34; value=\u0026#34;[your subscription Id]\u0026#34; /\u0026gt; \u0026lt;add key=\u0026#34;resourceGroup\u0026#34; value=\u0026#34;[your resource group name]\u0026#34; /\u0026gt; \u0026lt;add key=\u0026#34;siteName\u0026#34; value=\u0026#34;[site Name]\u0026#34; /\u0026gt; \u0026lt;add key=\u0026#34;tenantId\u0026#34; value=\u0026#34;[you tenant ID]\u0026#34; /\u0026gt; \u0026lt;add key=\u0026#34;applicationId\u0026#34; value=\u0026#34;[your application id]\u0026#34; /\u0026gt; \u0026lt;add key=\u0026#34;redirectUri\u0026#34; value=\u0026#39;[redirect url]\u0026#39; /\u0026gt; \u0026lt;/appSettings\u0026gt; siteNameã¯Web Appã§ã„ã†ã¨ã“ã‚ã®Appåã€xxxx.azurewebsites.netã®xxxéƒ¨åˆ† tenant IDã¨application IDã®å–å¾—æ–¹æ³•ã«ã¤ã„ã¦ã¯ã€ŒAzure ã‚¤ãƒ³ã‚µã‚¤ãƒˆè¦æ±‚ã‚’èªè¨¼ã™ã‚‹ã€ã‚’å‚ç…§ãã ã•ã„ redirect Uriã¯AADèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—æ™‚ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURIã€‚ã¨ã‚Šã‚ãˆãšhttp://foobarãªã©ä½•ã‹æŒ‡å®šã—ã¦ãŠãã§OK LINKS Azure Service Management REST API Reference (old) Azure Service Management monitoring (classic) API (old) Azure Resource Management APIs Azure Insights REST API Reference (Metricå–å¾—API) Azure ã‚¤ãƒ³ã‚µã‚¤ãƒˆè¦æ±‚ã‚’èªè¨¼ã™ã‚‹ ãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½¿ç”¨ã—ãŸ Azure ãƒªã‚½ãƒ¼ã‚¹ã®ç®¡ç† ","permalink":"https://unofficialism.info/posts/getting-resource-metrics-with-azure-insights-rest-api/","summary":"ARMã¨Azure Insights API Azureä¸Šã®ã•ã¾ã–ã¾ãªã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ¡ãƒˆãƒªãƒƒã‚¯æƒ…å ±ã‚’APIçµŒç”±ã§å–å¾—ã—ãŸã„ã€‚ãã†ã„ã†ã“ã¨ã§ã‚ã‚Œã°Azure Service Management APIã‚’ä½¿ãˆã°ã„ã„ã˜ã‚ƒãªã„ã‹ã¨ã„ã†å£°ãŒèã“ãˆã¦ããã†ãªã¨ã“ã‚ã ãŒå®Ÿã¯æ—¢ã«ã“ã®ã‚„ã‚Šæ–¹ã¯æ™‚ä»£é…ã‚Œã¨ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ã”å­˜ã˜ã ã‚ã†ã‹ï¼Ÿ 2014å¹´5æœˆã”ã‚ï¼Ÿã«ç™»å ´ã—ãŸAzureã®æ–°ã—ã„è€ƒãˆæ–¹ã«Resourceã€ResourceGroupã€Azure Resource Managerã¨ã„ã†ã‚‚ã®ãŒã‚ã‚‹ã€‚ç°¡å˜ãªèª¬æ˜ã™ã‚‹ã¨ã€Azureä¸Šã®PaaSã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã€ä»®æƒ³ãƒã‚·ãƒ³ãªã©ã™ã¹ã¦ã®ç®¡ç†å¯èƒ½ãªè³‡æºã‚’ãƒªã‚½ãƒ¼ã‚¹(Resource)ã¨ã‚ˆã°ã‚Œã‚‹å˜ä½ã«ç´°åˆ†åŒ–ã—ã€ãã‚Œã‚‰ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ãŸã‚‚ã®ãŒResourceGroupã€ãã—ã¦å…¨ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ã¯Azure Resource Managerï¼ˆä»¥ä¸‹ARMï¼‰ã¨ã„ã†ã‚‚ã®ã§ç®¡ç†å¯èƒ½ã«ãªã£ã¦ã„ã‚‹ã€‚ãã—ã¦ã“ã®ARMã§ç®¡ç†å¯èƒ½ãªä¸–ç•Œã®ãƒªã‚½ãƒ¼ã‚¹ç¾¤ã«ç´ã¥ããƒ¡ãƒˆãƒªãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã¯Azure Insights APIã§å–å¾—å¯èƒ½ã¨ãªã£ã¦ã„ã‚‹ã€‚æœ¬è¨˜äº‹ã§ã¯ã•ã¾ã–ã¾ãªãƒªã‚½ãƒ¼ã‚¹ã®ä¸­ã§ã‚‚Web Appsã«çµã£ã¦ã€Azure Insights REST API (Metric)ã‚’ä½¿ã£ã¦ãã®ãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã™ã‚‹ã€‚\nARM Explorerã§ã©ã®ãƒ¡ãƒˆãƒªãƒƒã‚¯ãŒå–å¾—å¯èƒ½ãªã®ã‹ç¢ºèªã™ã‚‹ ARM Explorer (https://resources.azure.com/) ã‚’ã”å­˜ã˜ã ã‚ã†ã‹ï¼Ÿã€€ã“ã‚Œã¯ãã®åã®é€šã‚ŠAzureä¸Šã®å…¨ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ï¼ˆã”åˆ©ç”¨ã®ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã«ç´ã¥ãå…¨ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ï¼‰ã®ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã§ã‚ã‚Šã€ã“ã‚Œã‚’ä½¿ã†ã“ã¨ã§ã“ã®ARMç®¡ç†ä¸‹ã®ä¸–ç•Œã®ã™ã¹ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ãƒ“ãƒ¥ãƒ¼ã§é–²è¦§ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ã“ã®ARM Explorerã§é–²è¦§å¯èƒ½ãªå„ãƒªã‚½ãƒ¼ã‚¹ã®æƒ…å ±ã®ä¸­ã«metricdefinitionsã¨ã„ã†ã‚‚ã®ãŒã‚ã£ã¦ã€ã“ã‚Œã«ã¯ãã®ãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦æŒ‡å®šå¯èƒ½ãªãƒ¡ãƒˆãƒªãƒƒã‚¯ã®ç¨®é¡ã‚„ãã®å®šç¾©æƒ…å ±ãªã©ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã€‚ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ¡ãƒˆãƒªãƒƒã‚¯å–å¾—ã‚’ã™ã‚‹éš›ã¯ã€ã¾ãšã¯ARM Explorerã§ç›®çš„ã®ãƒªã‚½ãƒ¼ã‚¹ã®metricdefinitionsã‹ã‚‰æŒ‡å®šå¯èƒ½ãªãƒ¡ãƒˆãƒªãƒƒã‚¯ã®ç¨®é¡ã‚’æŠŠæ¡ã—ã¦ã‹ã‚‰APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’çµ„ã¿ç«‹ã¦ã¦ã„ãŸã ã‘ã‚Œã°ã¨æ€ã†ã€‚ARM Explorerã‚’ä½¿ã£ã¦æœ¬è¨˜äº‹ã§å–å¾—å¯¾è±¡ã¨ã—ã¦ã„ã‚‹Web Appsï¼ˆã“ã“ã§ã¯ã‚µã‚¤ãƒˆåyoichikademoã‚’å¯¾è±¡ï¼‰ã®metricdefinitionsã‚’é–²è¦§ã—ã¦ã„ã‚‹ã®ãŒä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã«ãªã‚‹ã€‚\nAzure Insights REST APIãƒ¡ãƒˆãƒªãƒƒã‚¯å–å¾—ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ Azure Insights APIã«ã¯æ¬¡ã®ã‚ˆã†ãª(1)ãƒ¡ãƒˆãƒªãƒƒã‚¯å®šç¾©ä¸€è¦§ã®å–å¾—ã¨(2)å¯¾è±¡ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ¡ãƒˆãƒªãƒƒã‚¯æƒ…å ±å–å¾—ã®2ã¤ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒã‚ã‚‹ã€‚å½“ç„¶ãªãŒã‚‰ãƒ¡ãƒˆãƒªãƒƒã‚¯ã®å–å¾—ã«ã¯(2)ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã€‚\n(1)ãƒ¡ãƒˆãƒªãƒƒã‚¯å®šç¾©ä¸€è¦§å–å¾—\nGET https://management.azure.com /subscriptions/{-id}/resourceGroups/{resource-group-name}/providers/{resource-provider-namespace}/{resource-type}/{resource-name}/metricDefinitions [Parameters] api-version={api-version} $filter={filter} (2)ãƒ¡ãƒˆãƒªãƒƒã‚¯æƒ…å ±å–å¾—\nGET https://management.azure.com /subscriptions/{-id}/resourceGroups/{resource-group-name}/providers/{resource-provider-namespace}/sites/{sitename}/metrics [Parameters] api-version={api-version} $filter={filter} APIã®å…±é€šéƒ¨åˆ†ã¯ä¸‹è¨˜ã®é€šã‚Šã€‚Azure Insights APIã¸ã®å…¨ã¦ã®è¦æ±‚ã¯Azure Active Directoryã‚’ä½¿ç”¨ã—ã¦èªè¨¼ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ã“ã®èªè¨¼ã«ã‚ˆã‚Šå¾—ã‚‰ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’å„APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã®Authorizationãƒ˜ãƒƒãƒ€ã«æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—ã®æ–¹æ³•ã«ã¯PowerShellã‚’ä½¿ç”¨ã—ãŸæ–¹æ³•ã¨Azureç®¡ç†ãƒãƒ¼ã‚¿ãƒ«ã‚’ä½¿ç”¨ã—ã¦èªè¨¼ã™ã‚‹2ã¤ã®æ–¹æ³•ãŒã‚ã‚‹ã€‚è©³ã—ãã¯ã€ŒAzure ã‚¤ãƒ³ã‚µã‚¤ãƒˆè¦æ±‚ã‚’èªè¨¼ã™ã‚‹ã€ã‚’å‚ç…§ãã ã•ã„ã€‚\n{api-version}ï¼š\u0026ldquo;2014-04-01\u0026rdquo; {subscription-id} ï¼š ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ID {resource-group-name}ï¼š ãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—ã‚’æŒ‡å®šã€‚è©³ç´°ã¯ã€Œãƒªã‚½ãƒ¼ã‚¹ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½¿ç”¨ã—ãŸ Azure ãƒªã‚½ãƒ¼ã‚¹ã®ç®¡ç†ã€ã‚’å‚ç…§ãã ã•ã„ Acceptãƒ˜ãƒƒãƒ€ãƒ¼ï¼š\u0026quot;application/json\u0026quot;ã‚’æŒ‡å®šã€‚ã“ã‚Œã‚’æŒ‡å®šã—ãªã„å ´åˆã€çµæœã¯XMLã§è¿”å´ã•ã‚Œã‚‹ Authorizationãƒ˜ãƒƒãƒ€ãƒ¼ã«Azure Active Directory ã‹ã‚‰å–å¾—ã™ã‚‹ JSON Web Tokenï¼ˆJWTï¼‰ ã«è¨­å®šã™ã‚‹ã€‚è©³ç´°ã¯ã€ŒAzure ã‚¤ãƒ³ã‚µã‚¤ãƒˆè¦æ±‚ã‚’èªè¨¼ã™ã‚‹ã€ã‚’å‚ç…§ãã ã•ã„ å®Ÿéš›ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹å–å¾—APIã§ã¯$filterãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ä»˜ä¸ãŒå¿…è¦ã¨ãªã‚‹ã€‚$filterã«ã¯ä¸»ã«ãƒ¡ãƒˆãƒªãƒƒã‚¯ã®ç¨®é¡(name.","title":"Azure Insights REST APIã‚’ä½¿ã£ã¦Azureå„ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ¡ãƒˆãƒªãƒƒã‚¯ã‚’æŠ½å‡ºã™ã‚‹"},{"content":"Azure Searchã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ›´æ–°æ–¹æ³•ã«ã¯å¤§ããåˆ†ã‘ã¦PUSHã¨PULLã®ï¼’ç¨®é¡ã‚ã‚‹ã€‚PUSHã¯ç›´æ¥Indexing APIã‚’ä½¿ã£ã¦Azure Searchã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’POSTã—ã¦æ›´æ–°ã€‚PULLã¯ç‰¹å®šãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦ãƒãƒ¼ãƒªãƒ³ã‚°ã—ã¦æ›´æ–°ã§ã€Azure Searchã®å ´åˆã€DocumentDBã¨SQL Databaseã®2ç¨®é¡ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’å¯¾è±¡ã«ãƒ¯ãƒ³ã‚¿ã‚¤ãƒ ã‚‚ã—ãã¯å®šæœŸçš„ãªã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡ŒãŒå¯èƒ½ã¨ãªã£ã¦ã„ã‚‹ã€‚ã“ã“ã§ã¯DocumentDBã‚’ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¨ã—ã¦ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã™ã‚‹ã€‚\nã‚µãƒ³ãƒ—ãƒ«æ§‹æˆã¨å‡¦ç†ãƒ•ãƒ­ãƒ¼ã®èª¬æ˜ ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã«DocumentDBã‚’åˆ©ç”¨ã™ã‚‹ã€‚ãƒ‡ãƒ¼ã‚¿ã€ŒDOCUMENTDB PYTHON SDKã¨FEEDPARSERã§ä½œã‚‹ç°¡æ˜“ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ã€ã«ãŠã„ã¦ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã•ã‚ŒDocumentDBã«ä¿å­˜ã•ã‚ŒãŸãƒ–ãƒ­ã‚°è¨˜äº‹ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã™ã‚‹ã€‚ãã—ã¦DocumentDBã‚’å®šæœŸçš„ã«ãƒãƒ¼ãƒªãƒ³ã‚°ã‚’è¡Œã„æ›´æ–°ãŒã‚ã£ãŸãƒ¬ã‚³ãƒ¼ãƒ‰ã®ã¿ã‚’Azure Searchã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«åæ˜ ã™ã‚‹ãŸã‚ã«DocumentDBã‚¤ãƒ³ãƒ‡ã‚¯ã‚µãƒ¼ã‚’è¨­å®šã™ã‚‹ã€‚å…¨ä½“æ§‹æˆã¨ã—ã¦ã¯ä¸‹è¨˜ã®é€šã‚Šã¨ãªã‚‹ã€‚\nDocumentDBã¨æ›´æ–°å…ˆæ¤œç´¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒãƒƒãƒ”ãƒ³ã‚° DocumentDBã‚’ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¨ã—ã¦Azure Searchã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«æ›´æ–°ã‚’è¡Œã†ãŸã‚DocumentDBã®å‚ç…§å…ˆã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨æ›´æ–°å…ˆAzure Searchã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’è¡Œã†ã€‚ãƒãƒƒãƒ”ãƒ³ã‚°ã¯ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹å®šç¾©ä¸­ã®DocumentDBå‚ç…§ç”¨Queryã§è¡Œã†ã€‚Azure Searchã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«ã‚¤ãƒ³ã‚¸ã‚§ã‚¹ãƒˆã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’DocumentDBã®SELECTã‚¯ã‚¨ãƒªãƒ¼æŒ‡å®šã™ã‚‹ã®ã ãŒã€Azure Searchã¨DocumentDBã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒç•°ãªã‚‹å ´åˆã¯ä¸‹å›³ã®ã‚ˆã†ã«SELECT \u0026ldquo;Docdbãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å\u0026rdquo; AS \u0026ldquo;Searchãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å\u0026quot;ã§ã‚¤ãƒ³ã‚¸ã‚§ã‚¹ãƒˆå…ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‚’æŒ‡å®šã™ã‚‹ã€‚ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹å®šç¾©ã«ã¤ã„ã¦ã¯å¾Œè¿°ã®è¨­å®šå†…å®¹ã‚’ç¢ºèªãã ã•ã„ã€‚\nConfiguration ä»¥ä¸‹ï¼‘ï½ï¼”ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®ä½œæˆã€æ¤œç´¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ä½œæˆã€ã‚¤ãƒ³ãƒ‡ã‚¯ã‚µãƒ¼ã®ä½œæˆã€ã‚¤ãƒ³ãƒ‡ã‚¯ã‚µãƒ¼ã®å®Ÿè¡Œã‚’è¡Œã†ã€‚\n(1) ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®ä½œæˆ\ncredential.connectionStringã§æ¥ç¶šå…ˆDocumentDBæ–‡å­—åˆ—ã¨å¯¾è±¡ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æŒ‡å®šã‚’è¡Œã†ã€‚container.(name|query)ã§å¯¾è±¡ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³åã¨å‚ç…§ç”¨SELECTæ–‡ã‚’æŒ‡å®šã™ã‚‹ã€‚SELECTæ–‡ã¯DocumentDBã¨ã‚¤ãƒ³ã‚¸ã‚§ã‚¹ãƒˆå…ˆAzure Searchã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚»ãƒƒãƒˆï¼ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã¨æ•°ï¼‰ãŒåŒã˜ã§ã‚ã‚Œã°çœç•¥å¯ã€‚è©³ç´°ã¯ã“ã¡ã‚‰ã‚’å‚ç…§ã€‚\n#!/bin/sh SERVICE_NAME=\u0026#39;\u0026lt;Azure Search Service Name\u0026gt;\u0026#39; API_VER=\u0026#39;2015-02-28-Preview\u0026#39; ADMIN_KEY=\u0026#39;\u0026lt;API KEY\u0026gt;\u0026#39; CONTENT_TYPE=\u0026#39;application/json\u0026#39; URL=\u0026#34;https://$SERVICE_NAME.search.windows.net/datasources?api-version=$API_VER\u0026#34; curl -s\\ -H \u0026#34;Content-Type: $CONTENT_TYPE\u0026#34;\\ -H \u0026#34;api-key: $ADMIN_KEY\u0026#34;\\ -XPOST $URL -d\u0026#39;{ \u0026#34;name\u0026#34;: \u0026#34;docdbds-article\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;documentdb\u0026#34;, \u0026#34;credentials\u0026#34;: { \u0026#34;connectionString\u0026#34;: \u0026#34;AccountEndpoint=https://\u0026lt;DOCUMENTDB_ACCOUNT\u0026gt;.documents.azure.com;AccountKey=\u0026lt;DOCUMENTDB_MASTER_KEY_STRING\u0026gt;;Database=\u0026lt;DOCUMENTDB_DBNAME\u0026gt;\u0026#34; }, \u0026#34;container\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;article_collection\u0026#34;, \u0026#34;query\u0026#34;: \u0026#34;SELECT s.id AS itemno, s.title AS subject, s.content AS body, s.permalink AS url, s.postdate AS date, s._ts FROM Sessions s WHERE s._ts \u0026gt; @HighWaterMark\u0026#34; }, \u0026#34;dataChangeDetectionPolicy\u0026#34;: { \u0026#34;@odata.type\u0026#34;: \u0026#34;#Microsoft.Azure.Search.HighWaterMarkChangeDetectionPolicy\u0026#34;, \u0026#34;highWaterMarkColumnName\u0026#34;: \u0026#34;_ts\u0026#34; }, \u0026#34;dataDeletionDetectionPolicy\u0026#34;: { \u0026#34;@odata.type\u0026#34;: \u0026#34;#Microsoft.Azure.Search.SoftDeleteColumnDeletionDetectionPolicy\u0026#34;, \u0026#34;softDeleteColumnName\u0026#34;: \u0026#34;isDeleted\u0026#34;, \u0026#34;softDeleteMarkerValue\u0026#34;: \u0026#34;true\u0026#34; } }\u0026#39; (2) ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ä½œæˆ\nä¸‹è¨˜ã®ã‚¹ã‚­ãƒ¼ãƒã§Azure Searchã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½œæˆã™ã‚‹ã€‚\n{ \u0026#34;name\u0026#34;: \u0026#34;articles-test\u0026#34;, \u0026#34;fields\u0026#34;: [ { \u0026#34;name\u0026#34;:\u0026#34;itemno\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;key\u0026#34;: true, \u0026#34;searchable\u0026#34;: false }, { \u0026#34;name\u0026#34;:\u0026#34;subject\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;filterable\u0026#34;:false, \u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false}, { \u0026#34;name\u0026#34;:\u0026#34;body\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;,\u0026#34;filterable\u0026#34;:false,\u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false, \u0026#34;analyzer\u0026#34;:\u0026#34;ja.lucene\u0026#34;}, { \u0026#34;name\u0026#34;:\u0026#34;url\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false }, { \u0026#34;name\u0026#34;:\u0026#34;date\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.DateTimeOffset\u0026#34;, \u0026#34;facetable\u0026#34;:false} ] } (3) DocumentDBã‚¤ãƒ³ãƒ‡ã‚¯ã‚µãƒ¼ã®ä½œæˆ\nDocumentDBã‚¤ãƒ³ãƒ‡ã‚¯ã‚µãƒ¼ä½œæˆã®ãŸã‚ã®è¨­å®šã€‚DatSourceNameã¨targetIndexNameã«ãã‚Œãã‚Œ1ã§ä½œæˆã—ãŸãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹åã¨ã‚¤ãƒ³ã‚¸ã‚§ã‚¹ãƒˆå…ˆã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹åã‚’æŒ‡å®šã™ã‚‹ã€‚ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡Œã•ã›ãŸã„å ´åˆã¯ä¸‹è¨˜ã®é€šã‚Šscheduleã‚’è¨­å®šã™ã‚‹ã€‚ã“ã“ã§ã¯intervalã‚’PT5Mã¨ã—ã¦ã„ã‚‹ãŒã“ã‚Œã¯5åˆ†æ¯å®Ÿè¡Œã‚’æ„å‘³ã™ã‚‹ã€‚è©³ã—ãã¯ã“ã¡ã‚‰ã‚’å‚ç…§ã€‚\n#!/bin/sh SERVICE_NAME=\u0026#39;\u0026lt;Azure Search Service Name\u0026gt;\u0026#39; API_VER=\u0026#39;2015-02-28-Preview\u0026#39; ADMIN_KEY=\u0026#39;\u0026lt;API KEY\u0026gt;\u0026#39; CONTENT_TYPE=\u0026#39;application/json\u0026#39; URL=\u0026#34;https://$SERVICE_NAME.search.windows.net/indexers?api-version=$API_VER\u0026#34; curl -s\\ -H \u0026#34;Content-Type: $CONTENT_TYPE\u0026#34;\\ -H \u0026#34;api-key: $ADMIN_KEY\u0026#34;\\ -XPOST $URL -d\u0026#39;{ \u0026#34;name\u0026#34;: \u0026#34;docdbindexer\u0026#34;, \u0026#34;dataSourceName\u0026#34;: \u0026#34;docdbds-article\u0026#34;, \u0026#34;targetIndexName\u0026#34; : \u0026#34;articles\u0026#34;, \u0026#34;schedule\u0026#34;: { \u0026#34;interval\u0026#34; : \u0026#34;PT5M\u0026#34;, \u0026#34;startTime\u0026#34; :\u0026#34;2015-06-17T00:00:00Z\u0026#34; } }\u0026#39; (4) ã‚¤ãƒ³ãƒ‡ã‚¯ã‚µãƒ¼ã®æ˜ç¤ºçš„ã«å®Ÿè¡Œ\nã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡Œã§ã¯ãªãã‚¤ãƒ³ãƒ‡ã‚¯ã‚µãƒ¼ã‚’ã™ãã«å®Ÿè¡Œã—ãŸã„å ´åˆã¯ä¸‹è¨˜ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚‹ã€‚\nPOST https://[Search service name].search.windows.net/indexers/[indexer name]/run?api-version=[api-version] api-key: [Search service admin key] å®Ÿè¡Œçµæœç¢ºèªæ–¹æ³• ä¸Šè¨˜ã‚¤ãƒ¡ãƒ¼ã‚¸ã®é€šã‚ŠAzureãƒãƒ¼ã‚¿ãƒ«(preview)ã‚ˆã‚ŠAzure Search â†’ indexersã‚¿ã‚¤ãƒ«ã‚’ãŸã©ã‚‹ã“ã¨ã§ã‚¤ãƒ³ãƒ‡ã‚¯ã‚µãƒ¼ã®å®Ÿè¡Œçµæœã‚„éå»ã®å±¥æ­´ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ãŸã ã—ã€ã“ã“ã§ã¯APIçµŒç”±ã§å–å¾—ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã™ã‚‹ã€‚\nä¸‹è¨˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§GETãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ã“ã¨ã§ã‚¤ãƒ³ãƒ‡ã‚¯ã‚µãƒ¼ã®ç¾åœ¨ã®ç¨¼åƒçŠ¶æ…‹ã¨å®Ÿè¡Œå±¥æ­´ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚å®Ÿè¡Œå±¥æ­´ã¯æœ€å¾Œã®å®Ÿè¡Œçµæœã ã‘ã§ã¯ãªãæœ€è¿‘å®Œäº†ã—ãŸ50ä»¶ã®å®Ÿè¡Œå†…å®¹ãŒå«ã¾ã‚Œã‚‹ã€‚\nGET https://[Search service name].search.windows.net/indexers/[indexer name]/status?api-version=[api-version] api-key: [Search service admin key] ä»¥ä¸‹å®Ÿè¡Œçµæœã€‚executionHistoryãŒå±¥æ­´ã€lastResultãŒæœ€å¾Œã®å®Ÿè¡Œçµæœã€statusãŒç¾åœ¨ã®ã‚¤ãƒ³ãƒ‡ã‚¯ã‚µãƒ¼ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨ãªã£ã¦ã„ã‚‹ã€‚\n{ \u0026#34;@odata.context\u0026#34;: \u0026#34;https://yoichidemo.search.windows.net/$metadata#Microsoft.Azure.Search.V2015_02_28_Preview.IndexerExecutionInfo\u0026#34;, \u0026#34;executionHistory\u0026#34;: [ { \u0026#34;endTime\u0026#34;: \u0026#34;2015-06-25T05:55:01.393Z\u0026#34;, \u0026#34;errorMessage\u0026#34;: \u0026#34;Data source \u0026#39;docdbds-article\u0026#39; does not exist\u0026#34;, \u0026#34;errors\u0026#34;: [], \u0026#34;finalTrackingState\u0026#34;: null, \u0026#34;initialTrackingState\u0026#34;: null, \u0026#34;itemsFailed\u0026#34;: 0, \u0026#34;itemsProcessed\u0026#34;: 0, \u0026#34;startTime\u0026#34;: \u0026#34;2015-06-25T05:55:01.393Z\u0026#34;, \u0026#34;status\u0026#34;: \u0026#34;transientFailure\u0026#34; }, ...(omit)... { \u0026#34;endTime\u0026#34;: \u0026#34;2015-06-25T02:15:02.155Z\u0026#34;, \u0026#34;errorMessage\u0026#34;: null, \u0026#34;errors\u0026#34;: [], \u0026#34;finalTrackingState\u0026#34;: \u0026#34;1434871500\u0026#34;, \u0026#34;initialTrackingState\u0026#34;: \u0026#34;1434871500\u0026#34;, \u0026#34;itemsFailed\u0026#34;: 0, \u0026#34;itemsProcessed\u0026#34;: 0, \u0026#34;startTime\u0026#34;: \u0026#34;2015-06-25T02:15:01.452Z\u0026#34;, \u0026#34;status\u0026#34;: \u0026#34;success\u0026#34; }, { \u0026#34;endTime\u0026#34;: \u0026#34;2015-06-25T02:10:01.144Z\u0026#34;, \u0026#34;errorMessage\u0026#34;: null, \u0026#34;errors\u0026#34;: [], \u0026#34;finalTrackingState\u0026#34;: \u0026#34;1434871500\u0026#34;, \u0026#34;initialTrackingState\u0026#34;: \u0026#34;1434871500\u0026#34;, \u0026#34;itemsFailed\u0026#34;: 0, \u0026#34;itemsProcessed\u0026#34;: 0, \u0026#34;startTime\u0026#34;: \u0026#34;2015-06-25T02:10:00.022Z\u0026#34;, \u0026#34;status\u0026#34;: \u0026#34;success\u0026#34; } ], \u0026#34;lastResult\u0026#34;: { \u0026#34;endTime\u0026#34;: \u0026#34;2015-06-25T05:59:02.016Z\u0026#34;, \u0026#34;errorMessage\u0026#34;: \u0026#34;Data source \u0026#39;docdbds-article\u0026#39; does not exist\u0026#34;, \u0026#34;errors\u0026#34;: [], \u0026#34;finalTrackingState\u0026#34;: null, \u0026#34;initialTrackingState\u0026#34;: null, \u0026#34;itemsFailed\u0026#34;: 0, \u0026#34;itemsProcessed\u0026#34;: 0, \u0026#34;startTime\u0026#34;: \u0026#34;2015-06-25T05:59:02.016Z\u0026#34;, \u0026#34;status\u0026#34;: \u0026#34;transientFailure\u0026#34; }, \u0026#34;name\u0026#34;: \u0026#34;docdbindexer\u0026#34;, \u0026#34;status\u0026#34;: \u0026#34;running\u0026#34; } Content DBã®æœ‰åŠ¹æ€§ã«ã¤ã„ã¦ ã“ã“ã§ã¯Azure Searchã®feedingã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦DocumentDBã‚’ä½¿ç”¨ã—ãŸPULLã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ›´æ–°æ–¹æ³•ã‚’ç´¹ä»‹ã—ãŸã€‚ã“ã®ã‚ˆã†ã«ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’ç›´æ¥Azure Searchã®Index APIã‚’ä½¿ã£ã¦ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°ã™ã‚‹ã®ã§ã¯ãªãã€ä»Šå›ã®DocumentDBã®ã‚ˆã†ã«æ‰€è¬‚Content DBã«æ ¼ç´ã—ã¦ã‹ã‚‰ãã‚Œã‚’å…ƒã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°ã™ã‚‹ã®ã«ã¯ã„ãã¤ã‹æ„å‘³ãŒã‚ã‚‹ã€‚ä¾‹ãˆã°ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ§‹é€ ã‚’å¤‰æ›´ã—ãŸã„å ´åˆã€å†ãƒ•ã‚£ãƒ¼ãƒ‰ãŒå¿…è¦ã«ãªã‚‹ãŒContent DBãŒã‚ã‚Œã°å†åº¦ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹å¿…è¦ãŒãªã„ã€‚é€šå¸¸ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ï¼ˆç‰¹ã«ãƒ•ãƒ«ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ï¼‰ã®ã‚³ã‚¹ãƒˆã¯å¤§ãã„ã€‚ã¾ãŸã€Content DBãŒã‚ã‚Œã°åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã€ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ãƒ¬ãƒ—ãƒªã‚«ã®æ§‹ç¯‰ã€ä»–ã«ã€åŒä¸€ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦åˆ¥æ§‹é€ ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚’æ§‹ç¯‰ã™ã‚‹ã¨ã„ã£ãŸã“ã¨ã‚‚å®¹æ˜“ã«å¯èƒ½ã«ãªã‚‹ã€‚\nã•ã‚‰ã«ã€ç¾æ™‚ç‚¹ã§Azure SearchãŒãƒ‡ãƒ¼ã‚¿åŠ å·¥ã®ãŸã‚ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ä»•çµ„ã¿ï¼ˆLucene/Solr, ElasticSearchã§ã„ã†ã¨ã“ã‚ã®ã‚«ã‚¹ã‚¿ãƒ Analyzerï¼‰ãŒãªã„ã“ã¨ã‹ã‚‰ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«æ”¾ã‚Šè¾¼ã‚€å‰ã®ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿åŠ å·¥ç”¨ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦ã‚‚æœ‰åŠ¹ã§ã‚ã‚‹ã¨è€ƒãˆã¦ã„ã‚‹ã€‚\nLINKS ã‚¤ãƒ³ãƒ‡ã‚¯ã‚µãƒ¼ã‚’ä½¿ç”¨ã—ãŸ DocumentDB ã¨ Azure Search ã®æ¥ç¶š ","permalink":"https://unofficialism.info/posts/levelage-documentdb-as-azuresearch-datasource/","summary":"Azure Searchã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ›´æ–°æ–¹æ³•ã«ã¯å¤§ããåˆ†ã‘ã¦PUSHã¨PULLã®ï¼’ç¨®é¡ã‚ã‚‹ã€‚PUSHã¯ç›´æ¥Indexing APIã‚’ä½¿ã£ã¦Azure Searchã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’POSTã—ã¦æ›´æ–°ã€‚PULLã¯ç‰¹å®šãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦ãƒãƒ¼ãƒªãƒ³ã‚°ã—ã¦æ›´æ–°ã§ã€Azure Searchã®å ´åˆã€DocumentDBã¨SQL Databaseã®2ç¨®é¡ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’å¯¾è±¡ã«ãƒ¯ãƒ³ã‚¿ã‚¤ãƒ ã‚‚ã—ãã¯å®šæœŸçš„ãªã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡ŒãŒå¯èƒ½ã¨ãªã£ã¦ã„ã‚‹ã€‚ã“ã“ã§ã¯DocumentDBã‚’ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¨ã—ã¦ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã™ã‚‹ã€‚\nã‚µãƒ³ãƒ—ãƒ«æ§‹æˆã¨å‡¦ç†ãƒ•ãƒ­ãƒ¼ã®èª¬æ˜ ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã«DocumentDBã‚’åˆ©ç”¨ã™ã‚‹ã€‚ãƒ‡ãƒ¼ã‚¿ã€ŒDOCUMENTDB PYTHON SDKã¨FEEDPARSERã§ä½œã‚‹ç°¡æ˜“ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ã€ã«ãŠã„ã¦ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã•ã‚ŒDocumentDBã«ä¿å­˜ã•ã‚ŒãŸãƒ–ãƒ­ã‚°è¨˜äº‹ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã™ã‚‹ã€‚ãã—ã¦DocumentDBã‚’å®šæœŸçš„ã«ãƒãƒ¼ãƒªãƒ³ã‚°ã‚’è¡Œã„æ›´æ–°ãŒã‚ã£ãŸãƒ¬ã‚³ãƒ¼ãƒ‰ã®ã¿ã‚’Azure Searchã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«åæ˜ ã™ã‚‹ãŸã‚ã«DocumentDBã‚¤ãƒ³ãƒ‡ã‚¯ã‚µãƒ¼ã‚’è¨­å®šã™ã‚‹ã€‚å…¨ä½“æ§‹æˆã¨ã—ã¦ã¯ä¸‹è¨˜ã®é€šã‚Šã¨ãªã‚‹ã€‚\nDocumentDBã¨æ›´æ–°å…ˆæ¤œç´¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒãƒƒãƒ”ãƒ³ã‚° DocumentDBã‚’ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¨ã—ã¦Azure Searchã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«æ›´æ–°ã‚’è¡Œã†ãŸã‚DocumentDBã®å‚ç…§å…ˆã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨æ›´æ–°å…ˆAzure Searchã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’è¡Œã†ã€‚ãƒãƒƒãƒ”ãƒ³ã‚°ã¯ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹å®šç¾©ä¸­ã®DocumentDBå‚ç…§ç”¨Queryã§è¡Œã†ã€‚Azure Searchã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«ã‚¤ãƒ³ã‚¸ã‚§ã‚¹ãƒˆã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’DocumentDBã®SELECTã‚¯ã‚¨ãƒªãƒ¼æŒ‡å®šã™ã‚‹ã®ã ãŒã€Azure Searchã¨DocumentDBã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒç•°ãªã‚‹å ´åˆã¯ä¸‹å›³ã®ã‚ˆã†ã«SELECT \u0026ldquo;Docdbãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å\u0026rdquo; AS \u0026ldquo;Searchãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å\u0026quot;ã§ã‚¤ãƒ³ã‚¸ã‚§ã‚¹ãƒˆå…ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‚’æŒ‡å®šã™ã‚‹ã€‚ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹å®šç¾©ã«ã¤ã„ã¦ã¯å¾Œè¿°ã®è¨­å®šå†…å®¹ã‚’ç¢ºèªãã ã•ã„ã€‚\nConfiguration ä»¥ä¸‹ï¼‘ï½ï¼”ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®ä½œæˆã€æ¤œç´¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ä½œæˆã€ã‚¤ãƒ³ãƒ‡ã‚¯ã‚µãƒ¼ã®ä½œæˆã€ã‚¤ãƒ³ãƒ‡ã‚¯ã‚µãƒ¼ã®å®Ÿè¡Œã‚’è¡Œã†ã€‚\n(1) ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®ä½œæˆ\ncredential.connectionStringã§æ¥ç¶šå…ˆDocumentDBæ–‡å­—åˆ—ã¨å¯¾è±¡ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æŒ‡å®šã‚’è¡Œã†ã€‚container.(name|query)ã§å¯¾è±¡ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³åã¨å‚ç…§ç”¨SELECTæ–‡ã‚’æŒ‡å®šã™ã‚‹ã€‚SELECTæ–‡ã¯DocumentDBã¨ã‚¤ãƒ³ã‚¸ã‚§ã‚¹ãƒˆå…ˆAzure Searchã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚»ãƒƒãƒˆï¼ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã¨æ•°ï¼‰ãŒåŒã˜ã§ã‚ã‚Œã°çœç•¥å¯ã€‚è©³ç´°ã¯ã“ã¡ã‚‰ã‚’å‚ç…§ã€‚\n#!/bin/sh SERVICE_NAME=\u0026#39;\u0026lt;Azure Search Service Name\u0026gt;\u0026#39; API_VER=\u0026#39;2015-02-28-Preview\u0026#39; ADMIN_KEY=\u0026#39;\u0026lt;API KEY\u0026gt;\u0026#39; CONTENT_TYPE=\u0026#39;application/json\u0026#39; URL=\u0026#34;https://$SERVICE_NAME.search.windows.net/datasources?api-version=$API_VER\u0026#34; curl -s\\ -H \u0026#34;Content-Type: $CONTENT_TYPE\u0026#34;\\ -H \u0026#34;api-key: $ADMIN_KEY\u0026#34;\\ -XPOST $URL -d\u0026#39;{ \u0026#34;name\u0026#34;: \u0026#34;docdbds-article\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;documentdb\u0026#34;, \u0026#34;credentials\u0026#34;: { \u0026#34;connectionString\u0026#34;: \u0026#34;AccountEndpoint=https://\u0026lt;DOCUMENTDB_ACCOUNT\u0026gt;.documents.azure.com;AccountKey=\u0026lt;DOCUMENTDB_MASTER_KEY_STRING\u0026gt;;Database=\u0026lt;DOCUMENTDB_DBNAME\u0026gt;\u0026#34; }, \u0026#34;container\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;article_collection\u0026#34;, \u0026#34;query\u0026#34;: \u0026#34;SELECT s.id AS itemno, s.title AS subject, s.content AS body, s.","title":"DocumentDBã‚’Azure Searchã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¨ã—ã¦åˆ©ç”¨ã™ã‚‹"},{"content":"DocumentDB Python SDKã¨feedparserã‚’ä½¿ã£ã¦ç°¡æ˜“ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ã¨ã„ã†ãŠè©±ã€‚ã“ã“ã§ã¯DocumentDBã‚’ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°çµæœã®æ ¼ç´å…ˆãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã€‚ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾è±¡ã¯Azureæ—¥æœ¬èªãƒ–ãƒ­ã‚°ã®RSSãƒ•ã‚£ãƒ¼ãƒ‰ã€ã“ã‚Œã‚’feedparserã‚’ä½¿ã£ã¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè§£æã€å¿…è¦ãƒ‡ãƒ¼ã‚¿ã®æŠ½å‡ºã€ãã—ã¦ãã®çµæœã‚’ä»Šå›ä½¿ç”¨ã™ã‚‹pydocumentdbã¨ã„ã†DocumentDB Python SDKã‚’ä½¿ã£ã¦DocumentDBã«æ ¼ç´ã™ã‚‹ã¨ã„ã†ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«ãªã£ã¦ã„ã‚‹ã€‚\nDocumentDB Python SDK - pydocumentdb Azureã§æä¾›ã•ã‚Œã¦ã„ã‚‹ã©ã®ã‚µãƒ¼ãƒ“ã‚¹ã«ã‚‚ã‚ã¦ã¯ã¾ã‚‹ã“ã¨ã§ã‚ã‚‹ãŒã€DocumentDBã‚’æ“ä½œã™ã‚‹ãŸã‚ã®å…¨ã¦ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯REST APIã¨ã—ã¦æä¾›ã•ã‚Œã¦ãŠã‚ŠREST APIã‚’å†…éƒ¨çš„ã«ä½¿ç”¨ã—ã¦ãƒã‚¤ã‚¯ãƒ­ã‚½ãƒ•ãƒˆè¬¹è£½ã‚‚ã—ãã¯å€‹äººã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹è¤‡æ•°ã®è¨€èªã®SDKãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚ãã®ä¸­ã§ã‚‚pydocumentdbã¯Pythonç”¨ã®DocumentDB SDKã§ã‚ã‚Šã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã¨ã—ã¦ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯å…¨ã¦Githubã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã€‚\npydocumentdbãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒˆãƒƒãƒ—(Github) pydocumentdbã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰(Github) Azure DocumentDB REST API Reference Pre-Requirementsãã®ï¼‘: Pythonå®Ÿè¡Œç’°å¢ƒã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª å®Ÿè¡Œç’°å¢ƒã¨ã—ã¦Python2.7ç³»ãŒå¿…è¦ã¨ãªã‚‹ã€‚ã¾ãŸã€ä»Šå›ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ãŒä½¿ç”¨ã—ã¦ã„ã‚‹DocumentDB Python SDKã§ã‚ã‚‹pydocumentdbã¨RSSãƒ•ã‚£ãƒ¼ãƒ‰è§£æãƒ©ã‚¤ãƒ–ãƒ©ãƒªfeedparserã®ï¼’ã¤ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦ã¨ãªã‚‹ã€‚\npydocumentdbã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n$ sudo pip install pydocumentdb feedparserã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n$ sudo pip install feedparser ã¡ãªã¿ã«pipãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„å ´åˆã¯ä¸‹è¨˜ã®é€šã‚Šãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚‚ã—ãã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã‚’ä½¿ç”¨ã—ã¦pipã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦ã¨ãªã‚‹\npip ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n# download get-pip.py $ wget https://bootstrap.pypa.io/get-pip.py # run the following (which may require administrator access) $ sudo python get-pip.py # upgrade pip $ sudo pip install -U pip ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã‚’ä½¿ç”¨\n# apt-getã®å ´åˆ $ sudo apt-get install python-pip # yumã®å ´åˆ $ sudo yum install python-pip Pre-requirementsãã®ï¼’: DocumentDBã‚¢ã‚«ã‚¦ãƒ³ãƒˆ Azureæ–°ãƒãƒ¼ã‚¿ãƒ«ã‚ˆã‚Šä¸‹è¨˜ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ•ãƒ­ãƒ¼ã§DocumentDBã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹ã€‚\nDocumentDBã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ãŸã‚‰ä»Šåº¦ã¯ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã™ã‚‹ãŸã‚ã®DocumentDBãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚DocumentDBãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã¯Azureæ–°ãƒãƒ¼ã‚¿ãƒ«ã‹ã‚‰ä½œæˆå¯èƒ½ã§ã‚ã‚‹ãŒã€ä»Šå›ã®ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã¯pydocumentdbã‚’ä½¿ã£ã¦ä½œæˆã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚\nRSSã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ã¨ãã®å®Ÿè¡Œçµæœ RSSã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ï¼ˆrssCrawler4Docdb.pyï¼‰ã¨ãã®å®Ÿè¡Œçµæœã¯ä¸‹è¨˜ã®é€šã‚Šã€‚ã‚‚ã—ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚’å®šæœŸçš„ã«å®Ÿè¡Œã™ã‚‹å ´åˆã¯ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚¸ãƒ§ãƒ–ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼ï¼ˆcronãªã©ï¼‰ã«ç™»éŒ²ãã ã•ã„ã€‚æŒ‡å®šã®RSSãƒ•ã‚£ãƒ¼ãƒ‰ã«æ–°ã—ãè¿½åŠ ã•ã‚ŒãŸè¨˜äº‹ã®ã¿ãŒDocumentDBã«åæ˜ ã•ã‚Œã‚‹ã‚ˆã†ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¸Šã¯é‡è¤‡ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã¦ã„ã‚‹ã€‚\n#!/usr/bin/env python # -*- coding: utf-8 -*- import feedparser import pydocumentdb.documents as documents import pydocumentdb.document_client as document_client import pydocumentdb.errors as errors import pydocumentdb.http_constants as http_constants Docdb_masterKey = \u0026#39;\u0026lt;Your Documentdb master key string\u0026gt;\u0026#39; Docdb_host = \u0026#39;https://\u0026lt;documentdb account\u0026gt;.documents.azure.com:443/\u0026#39; Docdb_dbname = \u0026#39;\u0026lt;documentdb database name\u0026gt;\u0026#39; Docdb_colname = \u0026#39;\u0026lt;documentdb collection name\u0026gt;\u0026#39; feedurl=\u0026#39;http://blogs.msdn.com/b/windowsazurej/atom.aspx\u0026#39; def rsscrawling(): # create documentDb client instance client = document_client.DocumentClient(Docdb_host, {\u0026#39;masterKey\u0026#39;: Docdb_masterKey}) # create a database if not yet created database_definition = {\u0026#39;id\u0026#39;: Docdb_dbname } databases = list(client.QueryDatabases({ \u0026#39;query\u0026#39;: \u0026#39;SELECT * FROM root r WHERE r.id=@id\u0026#39;, \u0026#39;parameters\u0026#39;: [ { \u0026#39;name\u0026#39;:\u0026#39;@id\u0026#39;, \u0026#39;value\u0026#39;: database_definition[\u0026#39;id\u0026#39;] } ] })) if ( len(databases) \u0026gt; 0 ): feeddb = databases[0] else: print \u0026#34;database is created:%s\u0026#34; % Docdb_dbname feeddb = client.CreateDatabase(database_definition) # create a collection if not yet created collection_definition = { \u0026#39;id\u0026#39;: Docdb_colname } collections = list(client.QueryCollections( feeddb[\u0026#39;_self\u0026#39;], { \u0026#39;query\u0026#39;: \u0026#39;SELECT * FROM root r WHERE r.id=@id\u0026#39;, \u0026#39;parameters\u0026#39;: [ { \u0026#39;name\u0026#39;:\u0026#39;@id\u0026#39;, \u0026#39;value\u0026#39;: collection_definition[\u0026#39;id\u0026#39;] } ] })) if ( len(collections) \u0026gt; 0 ): collection = collections[0] else: print \u0026#34;collection is created:%s\u0026#34; % Docdb_colname collection = client.CreateCollection( feeddb[\u0026#39;_self\u0026#39;], collection_definition) # request \u0026amp; parse rss feed via feedparser feed=feedparser.parse(feedurl) for entry in feed[ \u0026#39;entries\u0026#39; ]: document_definition = { \u0026#39;title\u0026#39;:entry[ \u0026#39;title\u0026#39;], \u0026#39;content\u0026#39;:entry[\u0026#39;description\u0026#39;], \u0026#39;permalink\u0026#39;:entry[ \u0026#39;link\u0026#39; ], \u0026#39;postdate\u0026#39;:entry[\u0026#39;date\u0026#39;] } # check if duplicated documents = list(client.QueryDocuments( collection[\u0026#39;_self\u0026#39;], { \u0026#39;query\u0026#39;: \u0026#39;SELECT * FROM root r WHERE r.permalink=@permalink\u0026#39;, \u0026#39;parameters\u0026#39;: [ { \u0026#39;name\u0026#39;:\u0026#39;@permalink\u0026#39;, \u0026#39;value\u0026#39;:document_definition[\u0026#39;permalink\u0026#39;] } ] })) if (len(documents) \u0026lt; 1): # only create if it\u0026#39;s fully new document print \u0026#34;document is added:title:%s\u0026#34; % entry[\u0026#39;title\u0026#39;] created_document = client.CreateDocument( collection[\u0026#39;_self\u0026#39;], document_definition) if __name__ == \u0026#39;__main__\u0026#39;: rsscrawling() [å®Ÿè¡Œçµæœ]\ndatabase is created:feeddb collection is created:article_collection document is added:title:æ¥­ç•Œãƒˆãƒƒãƒ—ã®ã‚¯ãƒ©ã‚¦ãƒ‰ ã‚¢ãƒŠãƒªã‚¹ãƒˆãŒãƒã‚¤ã‚¯ãƒ­ã‚½ãƒ•ãƒˆã«è»¢èº«ã—ãŸç†ç”± document is added:title:Azure Linux VM ã®ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã®ç›£è¦–ã¨è¨ºæ–­ document is added:title:Azure App Service ã® Web ã‚¢ãƒ—ãƒªç”¨ Support Site Extension ã®è¿½åŠ æ›´æ–° document is added:title:Azure CDN ã§ã‚«ã‚¹ã‚¿ãƒ ã®ã‚ªãƒªã‚¸ãƒ³ ã‚µãƒ¼ãƒãƒ¼ã‚’ã‚µãƒãƒ¼ãƒˆ document is added:title:Tinfoil Security ã® Azure App Service å‘ã‘ Web è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³æ©Ÿèƒ½ document is added:title:Azure Site Extensions ã®è‡ªå‹•æ›´æ–°ãŒå¯èƒ½ã« document is added:title:DocumentDB ã¸ã®ãƒ‡ãƒ¼ã‚¿ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãŒã‚ˆã‚Šé«˜é€Ÿã€ç°¡å˜ã« document is added:title:Query Store: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç‰ˆãƒ•ãƒ©ã‚¤ãƒˆ ãƒ‡ãƒ¼ã‚¿ ãƒ¬ã‚³ãƒ¼ãƒ€ãƒ¼æ©Ÿèƒ½ document is added:title:Azure App Service ã® Web ã‚¢ãƒ—ãƒªã§ä½¿ç”¨ã•ã‚Œã‚‹ TLS ã®ä¸­é–“è¨¼æ˜æ›¸ document is added:title:Azure ã§ Cloud Foundry ã‚’ãŠè©¦ã—ãã ã•ã„ document is added:title:Azure Media Indexer ã®æ›´æ–°ç‰ˆ v1.2.1 ã‚’ãƒªãƒªãƒ¼ã‚¹: å‰å›ã‹ã‚‰ã®ä¿®æ­£ç‚¹ã«ã¤ã„ã¦ document is added:title:ã‚¯ãƒ©ã‚¦ãƒ‰ç’°å¢ƒã§ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ã®ãƒ“ãƒ‡ã‚ª ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ§‹ç¯‰ã™ã‚‹ document is added:title:Azure Media Player ã®æ›´æ–°ã¨ UserVoice ãƒ•ã‚©ãƒ¼ãƒ©ãƒ ã®ãŠçŸ¥ã‚‰ã› document is added:title:Microsoft Azure é–¢é€£ãƒ‹ãƒ¥ãƒ¼ã‚¹ 2015 å¹´ 5 æœˆã®ã¾ã¨ã‚ document is added:title:Azure Media Services å‘ã‘ Hyperlapse ã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ç™ºè¡¨ document is added:title:6 æœˆ 1 æ—¥ä»¥é™ã® Application Insights ã®æ–™é‡‘è¨­å®š document is added:title:StorSimple Update 1 ã‚’ç™ºè¡¨: Azure Government ã§æä¾›é–‹å§‹ã€ä»–ç¤¾ã‚¯ãƒ©ã‚¦ãƒ‰ã¨ ZRS ã‚’ã‚µãƒãƒ¼ãƒˆã€5000/7000 ã‚·ãƒªãƒ¼ã‚ºã‹ã‚‰ã®ç§»è¡Œã«å¯¾å¿œ document is added:title:æˆåŠŸã‹ã‚‰è»¢è½ã®å±æ©Ÿã«ç›´é¢ã—ãŸ Sleeve Musicã€‚çµŒé¨“è±Šã‹ãªé–‹ç™ºè€…ã¨é©åˆ‡ãªãƒ„ãƒ¼ãƒ«ã®é¸æŠã§æ–°ãŸãªã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å‰µå‡º document is added:title:Azure Storage ã«é–¢ã™ã‚‹ Build 2015 ã§ã®ç™ºè¡¨ document is added:title:Visual Studio Code ã¨ Azure App Service ã®é€£æºã§å®Ÿç¾ã§ãã‚‹ã“ã¨ document is added:title:Azure Automation ã§ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯å½¢å¼ã¨ãƒ†ã‚­ã‚¹ãƒˆå½¢å¼ã®ä½œæˆæ©Ÿèƒ½ã‚’å°å…¥ document is added:title:æ¥ç¶šæ€§ã®é«˜ã„å®‰å®šã—ãŸãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ ã‚¯ãƒ©ã‚¦ãƒ‰ã®å®Ÿç¾ã«å‘ã‘ãŸæ–°ã—ã„ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ©Ÿèƒ½ document is added:title:DocumentDB ã®æ–°ã—ã„ã‚¤ãƒ³ãƒãƒ¼ãƒˆ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ document is added:title:Azure Site Recovery ãŒ NetApp Private Storage for Microsoft Azure ã‚’ã‚µãƒãƒ¼ãƒˆ document is added:title:Application Insights ã§ ASP.NET 5 ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆ ","permalink":"https://unofficialism.info/posts/crawler-with-documentdb-python-sdk-and-feedparser/","summary":"DocumentDB Python SDKã¨feedparserã‚’ä½¿ã£ã¦ç°¡æ˜“ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’ä½œã‚Šã¾ã—ã‚‡ã†ã¨ã„ã†ãŠè©±ã€‚ã“ã“ã§ã¯DocumentDBã‚’ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°çµæœã®æ ¼ç´å…ˆãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã€‚ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾è±¡ã¯Azureæ—¥æœ¬èªãƒ–ãƒ­ã‚°ã®RSSãƒ•ã‚£ãƒ¼ãƒ‰ã€ã“ã‚Œã‚’feedparserã‚’ä½¿ã£ã¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè§£æã€å¿…è¦ãƒ‡ãƒ¼ã‚¿ã®æŠ½å‡ºã€ãã—ã¦ãã®çµæœã‚’ä»Šå›ä½¿ç”¨ã™ã‚‹pydocumentdbã¨ã„ã†DocumentDB Python SDKã‚’ä½¿ã£ã¦DocumentDBã«æ ¼ç´ã™ã‚‹ã¨ã„ã†ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«ãªã£ã¦ã„ã‚‹ã€‚\nDocumentDB Python SDK - pydocumentdb Azureã§æä¾›ã•ã‚Œã¦ã„ã‚‹ã©ã®ã‚µãƒ¼ãƒ“ã‚¹ã«ã‚‚ã‚ã¦ã¯ã¾ã‚‹ã“ã¨ã§ã‚ã‚‹ãŒã€DocumentDBã‚’æ“ä½œã™ã‚‹ãŸã‚ã®å…¨ã¦ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯REST APIã¨ã—ã¦æä¾›ã•ã‚Œã¦ãŠã‚ŠREST APIã‚’å†…éƒ¨çš„ã«ä½¿ç”¨ã—ã¦ãƒã‚¤ã‚¯ãƒ­ã‚½ãƒ•ãƒˆè¬¹è£½ã‚‚ã—ãã¯å€‹äººã®ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹è¤‡æ•°ã®è¨€èªã®SDKãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚ãã®ä¸­ã§ã‚‚pydocumentdbã¯Pythonç”¨ã®DocumentDB SDKã§ã‚ã‚Šã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã¨ã—ã¦ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯å…¨ã¦Githubã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã€‚\npydocumentdbãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒˆãƒƒãƒ—(Github) pydocumentdbã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰(Github) Azure DocumentDB REST API Reference Pre-Requirementsãã®ï¼‘: Pythonå®Ÿè¡Œç’°å¢ƒã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª å®Ÿè¡Œç’°å¢ƒã¨ã—ã¦Python2.7ç³»ãŒå¿…è¦ã¨ãªã‚‹ã€‚ã¾ãŸã€ä»Šå›ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼ãŒä½¿ç”¨ã—ã¦ã„ã‚‹DocumentDB Python SDKã§ã‚ã‚‹pydocumentdbã¨RSSãƒ•ã‚£ãƒ¼ãƒ‰è§£æãƒ©ã‚¤ãƒ–ãƒ©ãƒªfeedparserã®ï¼’ã¤ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦ã¨ãªã‚‹ã€‚\npydocumentdbã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n$ sudo pip install pydocumentdb feedparserã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n$ sudo pip install feedparser ã¡ãªã¿ã«pipãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„å ´åˆã¯ä¸‹è¨˜ã®é€šã‚Šãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚‚ã—ãã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã‚’ä½¿ç”¨ã—ã¦pipã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦ã¨ãªã‚‹\npip ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n# download get-pip.py $ wget https://bootstrap.pypa.io/get-pip.py # run the following (which may require administrator access) $ sudo python get-pip.py # upgrade pip $ sudo pip install -U pip ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã‚’ä½¿ç”¨","title":"DocumentDB Python SDKã¨feedparserã§ä½œã‚‹ç°¡æ˜“ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼"},{"content":"Wikipediaã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ Creative Commons LicenseãŠã‚ˆã³ GNU Free Documentation Licenseã®ä¸‹ã«ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã•ã‚Œã¦ãŠã‚ŠWikipediaè²¡å›£ã¯å†é…å¸ƒã‚„å†åˆ©ç”¨ã®ãŸã‚ã«æƒœã—ã’ã‚‚ãªãã“ã®è²´é‡ãªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ€ãƒ³ãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆXMLãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã‚’ä¸€èˆ¬æä¾›ã—ã¦ã„ã‚‹ã€‚å…¨æ–‡æ¤œç´¢ã®æ¤œè¨¼ã§å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ãŒå¿…è¦ãªã¨ãã“ã®Wikipediaã®ã‚ˆã†ãªç”ŸããŸãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ãˆã‚‹ã®ã¯éå¸¸ã«æœ‰ã‚ŠãŒãŸã„ã€‚ã“ã‚Œã¯ã“ã®Wikipediaãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ€ãƒ³ãƒ—ï¼ˆæ—¥æœ¬èªï¼‰ã‚’å…ƒã«Azure Searchã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ç”Ÿæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã¨ã„ã†ãŠè©±ã€‚\nWikipedia:ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ ã‚¦ã‚£ã‚­ãƒ¡ãƒ‡ã‚£ã‚¢è²¡å›£ã«ã‚ˆã‚‹å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»ãƒ€ãƒ³ãƒ— Wikipediaæ—¥æœ¬èªç‰ˆã®ãƒ€ãƒ³ãƒ—ãƒ‡ãƒ¼ã‚¿ãƒ¬ãƒã‚¸ãƒˆãƒª(æ—¥æœ¬èªæœ€æ–°ç‰ˆ) åˆ©ç”¨ã™ã‚‹Wikipedia XMLãƒ•ã‚¡ã‚¤ãƒ«ã¨ãã®å®šç¾© æœ€æ–°ç‰ˆæ—¥æœ¬èªãƒ¬ãƒã‚¸ãƒˆãƒªã«ã¯è¤‡æ•°ã®XMLãƒ•ã‚¡ã‚¤ãƒ«ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ãŒã“ã“ã§ã¯å…¨ãƒšãƒ¼ã‚¸ã®ã‚¿ã‚¤ãƒˆãƒ«ã€ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã¨ã„ã£ãŸè¦ç´„ãƒ‡ãƒ¼ã‚¿ã‚’é›†ç´„ã—ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«jawiki-latest-abstract.xmlã‚’åˆ©ç”¨ã™ã‚‹ã€‚XMLã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯æ¬¡ã®ã¨ãŠã‚Šã€‚ã“ã®ä¸­ã‹ã‚‰title, url, abstractã‚’æŠ½å‡ºã—ã¦Azure Searchã«æŠ•å…¥ã™ã‚‹ã€‚\n\u0026lt;doc\u0026gt; \u0026lt;title\u0026gt;Wikipedia: è‡ªç„¶è¨€èª\u0026lt;/title\u0026gt; \u0026lt;url\u0026gt;http://ja.wikipedia.org/wiki/%E8%87%AA%E7%84%B6%E8%A8%80%E8%AA%9E\u0026lt;/url\u0026gt; \u0026lt;abstract\u0026gt;è‡ªç„¶è¨€èªï¼ˆã—ãœã‚“ã’ã‚“ã”ã€ï¼‰ã¨ã¯ã€äººé–“ã«ã‚ˆã£ã¦æ—¥å¸¸ã®æ„æ€ç–é€šã®ãŸã‚ã«ç”¨ã„ã‚‰ã‚Œã‚‹ã€æ–‡åŒ–çš„èƒŒæ™¯ã‚’æŒã£ã¦è‡ªç„¶ã«ç™ºå±•ã—ã¦ããŸè¨˜å·ä½“ç³»ã§ã‚ã‚‹ã€‚å¤§åˆ¥ã™ã‚‹ã¨éŸ³å£°ã«\u0026gt;ã‚ˆã‚‹è©±ã—è¨€è‘‰ã¨æ–‡å­—ã‚„è¨˜å·ã¨ã—ã¦æ›¸ã‹ã‚Œã‚‹æ›¸ãè¨€è‘‰ãŒã‚ã‚‹ã€‚\u0026lt;/abstract\u0026gt; \u0026lt;links\u0026gt; \u0026lt;sublink linktype=\u0026#34;nav\u0026#34;\u0026gt;\u0026lt;anchor\u0026gt;æ¦‚è¦\u0026lt;/anchor\u0026gt;\u0026lt;link\u0026gt;http://ja.wikipedia.org/wiki/%E8%87%AA%E7%84%B6%E8%A8%80%E8%AA%9E#.E6.A6.82.E8.A6.81\u0026lt;/link\u0026gt;\u0026lt;/sublink\u0026gt; \u0026lt;sublink linktype=\u0026#34;nav\u0026#34;\u0026gt;\u0026lt;anchor\u0026gt;é–¢é€£é …ç›®\u0026lt;/anchor\u0026gt;\u0026lt;link\u0026gt;http://ja.wikipedia.org/wiki/%E8%87%AA%E7%84%B6%E8%A8%80%E8%AA%9E#.E9.96.A2.E9.80.A3.E9.A0.85.E7.9B.AE\u0026lt;/link\u0026gt;\u0026lt;/sublink\u0026gt; \u0026lt;/links\u0026gt; \u0026lt;/doc\u0026gt; å°šã€å®Ÿéš›ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã¿ã‚‹ã¨ã‚ã‹ã‚‹ã¨æ€ã†ãŒã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚µã‚¤ã‚ºãŒæ¯”è¼ƒçš„å¤§ããé›†ç´„ã•ã‚Œã¦ã„ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•°ã‚‚å®Ÿã«å¤šã„ã€‚ã‚«ã‚¦ãƒ³ãƒˆã—ã¦ã¿ãŸã¨ã“ã‚ç¾æ™‚ç‚¹ï¼ˆ2015/06/09ï¼‰ã§969541ã€€ä»¶ã‚ã£ãŸã€‚Azure Searchã®æ–™é‡‘ãƒ—ãƒ©ãƒ³ã®ã†ã¡Freeãƒ—ãƒ©ãƒ³ã¯æœ€å¤§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•°ãŒ10,000ã§ã‚ã‚‹ã“ã¨ã‹ã‚‰ã“ã“ã§åˆ©ç”¨ã™ã‚‹æ–™é‡‘ãƒ—ãƒ©ãƒ³ã¯Freeã§ã¯ãªãæ¨™æº–ãƒ—ãƒ©ãƒ³ã‚’é¸æŠã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nIndex Schema ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹åã¯wikipediaã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ã‚­ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãŸã‚ã®itemidãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ä¸Šè¨˜wikipedia XMLãƒ•ã‚¡ã‚¤ãƒ«ã®title, url, abstractã‚’æ ¼ç´ã™ã‚‹ãŸã‚ã®3ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å®šç¾©ã€‚\n{ \u0026#34;name\u0026#34;: \u0026#34;wikipedia\u0026#34;, \u0026#34;fields\u0026#34;: [ { \u0026#34;name\u0026#34;:\u0026#34;itemid\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;key\u0026#34;: true, \u0026#34;searchable\u0026#34;: false }, { \u0026#34;name\u0026#34;:\u0026#34;title\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;filterable\u0026#34;:false, \u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false}, { \u0026#34;name\u0026#34;:\u0026#34;abstract\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;filterable\u0026#34;:false, \u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false, \u0026#34;analyzer\u0026#34;:\u0026#34;ja.lucene\u0026#34; }, { \u0026#34;name\u0026#34;:\u0026#34;url\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false } ] } Azure SearchæŠ•å…¥ç”¨JSONãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆ Wikipedia XMLãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰Azure SearchæŠ•å…¥ç”¨ã®JSONãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ(xml2json.pl)ã‚’ä½œã£ã¦ã¿ãŸã€‚å·¨å¤§ãƒ•ã‚¡ã‚¤ãƒ«ã®DOMæ§‹é€ ã‚’ä¸€åº¦ã«ã‚ªãƒ³ãƒ¡ãƒ¢ãƒªå±•é–‹ã™ã‚‹ã“ã¨ã¯ç‰©ç†çš„ã«ä¸å¯èƒ½ã§ã‚ã‚‹ãŸã‚ã€XML::Twigãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ¯ã«ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã‹ã‚‰ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã™ã‚‹ã‚ˆã†ã«å·¥å¤«ã‚’å‡ã‚‰ã—ã¦ã„ã‚‹ã€‚\n#!/usr/bin/perl -w use strict; use XML::Twig; use Getopt::Std; use Encode; use JSON; my $UPLOAD_THRESHOLD=100; my %opts=(); getopts(\u0026#39;câ­•\u0026#39;, \\%opts) or die \u0026#34;Wrong Options!\\n\u0026#34;; my $inputfile=$opts{\u0026#39;c\u0026#39;}; my $outputpath=$opts{\u0026#39;o\u0026#39;}; usage() if ( $inputfile eq \u0026#39;\u0026#39; || $outputpath eq \u0026#39;\u0026#39; ); my($tmpcounter,$itemcounter, $filecounter) = (0,0,0); my $itemsarr = []; my $twig = new XML::Twig( twig_handlers =\u0026gt; { doc =\u0026gt; \\\u0026amp;doc } ); $twig-\u0026gt;parsefile($inputfile); if ($tmpcounter) { flush2json($itemsarr, \u0026#34;items-$filecounter.json\u0026#34;); } sub doc { my($twig, $doc)= @_; my $item = { itemid =\u0026gt; \u0026#34;$itemcounter\u0026#34;, title=\u0026gt; utf8string($doc-\u0026gt;first_child(\u0026#39;title\u0026#39;)-\u0026gt;text), abstract=\u0026gt; utf8string($doc-\u0026gt;first_child(\u0026#39;abstract\u0026#39;)-\u0026gt;text), url =\u0026gt;$doc-\u0026gt;first_child(\u0026#39;url\u0026#39;)-\u0026gt;text }; push($itemsarr,$item); $tmpcounter++; $itemcounter++; if ($tmpcounter % $UPLOAD_THRESHOLD == 0 ){ flush2json($itemsarr, \u0026#34;items-$filecounter.json\u0026#34;); $tmpcounter=0; $filecounter++; $itemsarr=[]; } $twig-\u0026gt;purge; } sub flush2json { my ($iarr, $f)=@_; my $outarr-\u0026gt;{\u0026#39;value\u0026#39;}=$iarr; my $json = JSON-\u0026gt;new(); my $js = $json-\u0026gt;encode($outarr); open(P, \u0026#34;\u0026gt; $outputpath/$f\u0026#34;) or die \u0026#34;can\u0026#39;t open: $outputpath/$f \\n\u0026#34;; print P \u0026#34;$js\u0026#34;; close P; } sub usage { print STDERR \u0026#34;Usage: $0 -c \u0026lt;inputxml\u0026gt; -o \u0026lt;outputpath\u0026gt;\\n\u0026#34;; exit(1); } sub utf8string { my $s= shift; if (utf8::is_utf8($s)) { return encode(\u0026#39;utf-8\u0026#39;, $s); } return $s; } __END__ æ¬¡ã®ã‚ˆã†ã«-cãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã‚¤ãƒ³ãƒ—ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€-oãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§JSONå‡ºåŠ›ã®ãŸã‚ã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã€‚å®Ÿè¡Œã™ã‚‹ã¨-oãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§æŒ‡å®šã—ãŸãƒ‘ã‚¹ã«items-N.json (N:0ä»¥ä¸Šã®æ•´æ•°)ãªãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤§é‡ã«ç”Ÿæˆã•ã‚Œã‚‹ã€‚ç¾æ™‚ç‚¹ã§ã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ç”Ÿæˆã•ã‚ŒãŸJSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ•°ãˆã¦ã¿ãŸã¨ã“ã‚items-0.json \u0026hellip;items-9692.jsonã§åˆè¨ˆ9693å€‹ã ã£ãŸã€‚\n$ xml2json.pl -c ./jawiki-latest-abstract.xml -o \u0026lt;path to output\u0026gt; Azure Searchã«JSONãƒ‡ãƒ¼ã‚¿ã‚’æŠ•å…¥ ä¸Šè¨˜ã‚¹ãƒ†ãƒƒãƒ—ã§ç”Ÿæˆã•ã‚ŒãŸJSONãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰Azure Searchã«POSTã™ã‚‹ãŸã‚ã®ç°¡æ˜“ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆAzureSearch-AddItemsFromFile.shï¼‰ã‚’ä½œã‚‹ã€‚\n#!/bin/sh if [ $# -ne 1 ] then echo \u0026#34;Usage: $0 \u0026lt;json.file\u0026gt;\u0026#34; exit 1; fi SERVICE_NAME=\u0026#39;\u0026lt;Azure Search Service Name\u0026gt;\u0026#39; API_VER=\u0026#39;2015-02-28-Preview\u0026#39; ADMIN_KEY=\u0026#39;\u0026lt;API KEY\u0026gt;\u0026#39; CONTENT_TYPE=\u0026#39;application/json\u0026#39; INDEX_NAME=\u0026#39;wikipedia\u0026#39; URL=\u0026#34;https://$SERVICE_NAME.search.windows.net/indexes/$INDEX_NAME/docs/index?api-version=$API_VER\u0026#34; JSON=`cat $1` curl \\ -H \u0026#34;Content-Type: $CONTENT_TYPE\u0026#34;\\ -H \u0026#34;api-key: $ADMIN_KEY\u0026#34;\\ -XPOST $URL -d \u0026#34;$JSON\u0026#34; æœ€å¾Œã«å¤§é‡ã«ç”Ÿæˆã•ã‚ŒãŸJSONãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã‚’ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ï¼‘ã¤ãšã¤ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ç¬¬ä¸€å¼•æ•°ã«æŒ‡å®šã—ã¦å®Ÿè¡Œã—ã¦ã„ãã€‚1ä¸‡è¿‘ã„ãƒ•ã‚¡ã‚¤ãƒ«ãªã®ã§å…¨ã¦æŠ•å…¥ãŒå®Œäº†ã™ã‚‹ã¾ã§ã«å°‘ã€…æ™‚é–“ã¯ã‹ã‹ã‚Šã¾ã™ã€‚\nfor i in `ls -1tr *.json`;do echo $i; ./AzureSearch-AddItemsFromFile.sh $i;done ","permalink":"https://unofficialism.info/posts/putting-wikipedia-data-into-azure-search/","summary":"Wikipediaã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ Creative Commons LicenseãŠã‚ˆã³ GNU Free Documentation Licenseã®ä¸‹ã«ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã•ã‚Œã¦ãŠã‚ŠWikipediaè²¡å›£ã¯å†é…å¸ƒã‚„å†åˆ©ç”¨ã®ãŸã‚ã«æƒœã—ã’ã‚‚ãªãã“ã®è²´é‡ãªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ€ãƒ³ãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆXMLãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã‚’ä¸€èˆ¬æä¾›ã—ã¦ã„ã‚‹ã€‚å…¨æ–‡æ¤œç´¢ã®æ¤œè¨¼ã§å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ãŒå¿…è¦ãªã¨ãã“ã®Wikipediaã®ã‚ˆã†ãªç”ŸããŸãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ãˆã‚‹ã®ã¯éå¸¸ã«æœ‰ã‚ŠãŒãŸã„ã€‚ã“ã‚Œã¯ã“ã®Wikipediaãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ€ãƒ³ãƒ—ï¼ˆæ—¥æœ¬èªï¼‰ã‚’å…ƒã«Azure Searchã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ç”Ÿæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã¨ã„ã†ãŠè©±ã€‚\nWikipedia:ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ ã‚¦ã‚£ã‚­ãƒ¡ãƒ‡ã‚£ã‚¢è²¡å›£ã«ã‚ˆã‚‹å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ»ãƒ€ãƒ³ãƒ— Wikipediaæ—¥æœ¬èªç‰ˆã®ãƒ€ãƒ³ãƒ—ãƒ‡ãƒ¼ã‚¿ãƒ¬ãƒã‚¸ãƒˆãƒª(æ—¥æœ¬èªæœ€æ–°ç‰ˆ) åˆ©ç”¨ã™ã‚‹Wikipedia XMLãƒ•ã‚¡ã‚¤ãƒ«ã¨ãã®å®šç¾© æœ€æ–°ç‰ˆæ—¥æœ¬èªãƒ¬ãƒã‚¸ãƒˆãƒªã«ã¯è¤‡æ•°ã®XMLãƒ•ã‚¡ã‚¤ãƒ«ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ãŒã“ã“ã§ã¯å…¨ãƒšãƒ¼ã‚¸ã®ã‚¿ã‚¤ãƒˆãƒ«ã€ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã¨ã„ã£ãŸè¦ç´„ãƒ‡ãƒ¼ã‚¿ã‚’é›†ç´„ã—ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«jawiki-latest-abstract.xmlã‚’åˆ©ç”¨ã™ã‚‹ã€‚XMLã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯æ¬¡ã®ã¨ãŠã‚Šã€‚ã“ã®ä¸­ã‹ã‚‰title, url, abstractã‚’æŠ½å‡ºã—ã¦Azure Searchã«æŠ•å…¥ã™ã‚‹ã€‚\n\u0026lt;doc\u0026gt; \u0026lt;title\u0026gt;Wikipedia: è‡ªç„¶è¨€èª\u0026lt;/title\u0026gt; \u0026lt;url\u0026gt;http://ja.wikipedia.org/wiki/%E8%87%AA%E7%84%B6%E8%A8%80%E8%AA%9E\u0026lt;/url\u0026gt; \u0026lt;abstract\u0026gt;è‡ªç„¶è¨€èªï¼ˆã—ãœã‚“ã’ã‚“ã”ã€ï¼‰ã¨ã¯ã€äººé–“ã«ã‚ˆã£ã¦æ—¥å¸¸ã®æ„æ€ç–é€šã®ãŸã‚ã«ç”¨ã„ã‚‰ã‚Œã‚‹ã€æ–‡åŒ–çš„èƒŒæ™¯ã‚’æŒã£ã¦è‡ªç„¶ã«ç™ºå±•ã—ã¦ããŸè¨˜å·ä½“ç³»ã§ã‚ã‚‹ã€‚å¤§åˆ¥ã™ã‚‹ã¨éŸ³å£°ã«\u0026gt;ã‚ˆã‚‹è©±ã—è¨€è‘‰ã¨æ–‡å­—ã‚„è¨˜å·ã¨ã—ã¦æ›¸ã‹ã‚Œã‚‹æ›¸ãè¨€è‘‰ãŒã‚ã‚‹ã€‚\u0026lt;/abstract\u0026gt; \u0026lt;links\u0026gt; \u0026lt;sublink linktype=\u0026#34;nav\u0026#34;\u0026gt;\u0026lt;anchor\u0026gt;æ¦‚è¦\u0026lt;/anchor\u0026gt;\u0026lt;link\u0026gt;http://ja.wikipedia.org/wiki/%E8%87%AA%E7%84%B6%E8%A8%80%E8%AA%9E#.E6.A6.82.E8.A6.81\u0026lt;/link\u0026gt;\u0026lt;/sublink\u0026gt; \u0026lt;sublink linktype=\u0026#34;nav\u0026#34;\u0026gt;\u0026lt;anchor\u0026gt;é–¢é€£é …ç›®\u0026lt;/anchor\u0026gt;\u0026lt;link\u0026gt;http://ja.wikipedia.org/wiki/%E8%87%AA%E7%84%B6%E8%A8%80%E8%AA%9E#.E9.96.A2.E9.80.A3.E9.A0.85.E7.9B.AE\u0026lt;/link\u0026gt;\u0026lt;/sublink\u0026gt; \u0026lt;/links\u0026gt; \u0026lt;/doc\u0026gt; å°šã€å®Ÿéš›ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã¿ã‚‹ã¨ã‚ã‹ã‚‹ã¨æ€ã†ãŒã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚µã‚¤ã‚ºãŒæ¯”è¼ƒçš„å¤§ããé›†ç´„ã•ã‚Œã¦ã„ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•°ã‚‚å®Ÿã«å¤šã„ã€‚ã‚«ã‚¦ãƒ³ãƒˆã—ã¦ã¿ãŸã¨ã“ã‚ç¾æ™‚ç‚¹ï¼ˆ2015/06/09ï¼‰ã§969541ã€€ä»¶ã‚ã£ãŸã€‚Azure Searchã®æ–™é‡‘ãƒ—ãƒ©ãƒ³ã®ã†ã¡Freeãƒ—ãƒ©ãƒ³ã¯æœ€å¤§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•°ãŒ10,000ã§ã‚ã‚‹ã“ã¨ã‹ã‚‰ã“ã“ã§åˆ©ç”¨ã™ã‚‹æ–™é‡‘ãƒ—ãƒ©ãƒ³ã¯Freeã§ã¯ãªãæ¨™æº–ãƒ—ãƒ©ãƒ³ã‚’é¸æŠã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nIndex Schema ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹åã¯wikipediaã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ã‚­ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãŸã‚ã®itemidãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ä¸Šè¨˜wikipedia XMLãƒ•ã‚¡ã‚¤ãƒ«ã®title, url, abstractã‚’æ ¼ç´ã™ã‚‹ãŸã‚ã®3ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å®šç¾©ã€‚\n{ \u0026#34;name\u0026#34;: \u0026#34;wikipedia\u0026#34;, \u0026#34;fields\u0026#34;: [ { \u0026#34;name\u0026#34;:\u0026#34;itemid\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;key\u0026#34;: true, \u0026#34;searchable\u0026#34;: false }, { \u0026#34;name\u0026#34;:\u0026#34;title\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;filterable\u0026#34;:false, \u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false}, { \u0026#34;name\u0026#34;:\u0026#34;abstract\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;filterable\u0026#34;:false, \u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false, \u0026#34;analyzer\u0026#34;:\u0026#34;ja.lucene\u0026#34; }, { \u0026#34;name\u0026#34;:\u0026#34;url\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false } ] } Azure SearchæŠ•å…¥ç”¨JSONãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆ Wikipedia XMLãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰Azure SearchæŠ•å…¥ç”¨ã®JSONãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ(xml2json.","title":"Wikipediaãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å…ƒã«Azure Searchã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ç”Ÿæˆã™ã‚‹"},{"content":"cUrlã¯UNIX/Linuxç³»ã§ã¯æœ‰åãªURLã‚’ä½¿ã£ãŸãƒ‡ãƒ¼ã‚¿é€å—ä¿¡ã‚³ãƒãƒ³ãƒ‰ã§æ‰‹è»½ã«RESTç³»å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã«ã¨ã¦ã‚‚é‡å®ã—ã¦ã„ã‚‹ã€‚ãã‚“ãªcUrlã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦Azure Searchã‚’ãŠæ‰‹è»½ã«ä½¿ã£ã¦ã¿ã‚ˆã†ã¨ã„ã†ãŠè©±ã€‚\nã¯ã˜ã‚ã« ã¾ã ã®äººã¯Azureãƒãƒ¼ã‚¿ãƒ«ã‚ˆã‚ŠAzure Searchã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚ã€Œãƒãƒ¼ã‚¿ãƒ«ã§ã® Azure Search ã‚µãƒ¼ãƒ“ã‚¹ã®ä½œæˆã€ã«å„ªã—ãæ‰‹é †ãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ã”å‚è€ƒã«ã€‚æ–™é‡‘ãƒ—ãƒ©ãƒ³ã¯ç„¡æ–™ã¨æ¨™æº–ãƒ—ãƒ©ãƒ³ãŒã‚ã‚‹ãŒãƒ†ã‚¹ãƒˆã§ã‚ã‚Œã°ç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ååˆ†ã€‚ã¾ãšã¯APIã‚­ãƒ¼ã¾ã§å–å¾—ãã ã•ã„ã€‚APIå®Ÿè¡Œã®ãŸã‚ã«ã¯APIã‚­ãƒ¼ãŒå¿…è¦ã€‚\ncURLã§Search Service REST APIã‚’å®Ÿè¡Œ Search Service REST APIã®ä¸­ã‹ã‚‰ã„ãã¤ã‹ä»£è¡¨çš„ãªAPIã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦cUrlã§ã‚¯ã‚¨ãƒªã‚’çµ„ã¿ç«‹ã¦ã¦ã¿ã‚‹ã€‚ã“ã“ã§ã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ–°è¦ä½œæˆã€ãã“ã«ã„ãã¤ã‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ã€ãã—ã¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ¤œç´¢ã™ã‚‹ãƒ»ãƒ»ã¨ã„ã£ãŸåŸºæœ¬çš„ãªã‚·ãƒŠãƒªã‚ªã‚’å®Ÿè¡Œã™ã‚‹ã€‚ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã¯cUrlã®-Hã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒ˜ãƒƒãƒ€å®šç¾©ã€-Xã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§HTTPãƒ¡ã‚½ãƒƒãƒ‰æŒ‡å®šã€-dã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’æŒ‡å®šã™ã‚‹ãƒ»ãƒ»ãƒ»ã¨ã„ã£ãŸã¨ã“ã‚ã€‚å°šã€ä¸‹è¨˜ã‚µãƒ³ãƒ—ãƒ«ã§ã¯ç¾æ™‚ç‚¹ï¼ˆ2015-06-05ï¼‰ã§æœ€æ–°ã®APIãƒãƒ¼ã‚¸ãƒ§ãƒ³2015-02-28-Previewã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚\n1. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ–°è¦ä½œæˆ articlesã¨ã„ã†åå‰ã®ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚’æ ¼ç´ã™ã‚‹ãŸã‚ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½œæˆã™ã‚‹ã€‚ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç”Ÿæˆã«ã¯Create Index (Azure Search Service REST API)ã‚’åˆ©ç”¨ã™ã‚‹ã€‚\n#!/bin/sh SERVICE_NAME=\u0026#39;\u0026lt;Azure Search Service Name\u0026gt;\u0026#39; API_VER=\u0026#39;2015-02-28-Preview\u0026#39; ADMIN_KEY=\u0026#39;\u0026lt;API KEY\u0026gt;\u0026#39; CONTENT_TYPE=\u0026#39;application/json\u0026#39; URL=\u0026#34;https://$SERVICE_NAME.search.windows.net/indexes?api-version=$API_VER\u0026#34; curl -s\\ -H \u0026#34;Content-Type: $CONTENT_TYPE\u0026#34;\\ -H \u0026#34;api-key: $ADMIN_KEY\u0026#34;\\ -XPOST $URL -d\u0026#39;{ \u0026#34;name\u0026#34;: \u0026#34;articles\u0026#34;, \u0026#34;fields\u0026#34;: [ { \u0026#34;name\u0026#34;:\u0026#34;itemid\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;key\u0026#34;: true, \u0026#34;searchable\u0026#34;: false }, { \u0026#34;name\u0026#34;:\u0026#34;title\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;filterable\u0026#34;:false, \u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false}, { \u0026#34;name\u0026#34;:\u0026#34;content\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;filterable\u0026#34;:false, \u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false, \u0026#34;analyzer\u0026#34;:\u0026#34;ja.lucene\u0026#34; }, { \u0026#34;name\u0026#34;:\u0026#34;permalink\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false }, { \u0026#34;name\u0026#34;:\u0026#34;tags\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Collection(Edm.String)\u0026#34;}, { \u0026#34;name\u0026#34;:\u0026#34;postdate\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.DateTimeOffset\u0026#34;, \u0026#34;facetable\u0026#34;:false} ], \u0026#34;suggesters\u0026#34;: [ { \u0026#34;name\u0026#34;:\u0026#34;testsg\u0026#34;, \u0026#34;searchMode\u0026#34;:\u0026#34;analyzingInfixMatching\u0026#34;, \u0026#34;sourceFields\u0026#34;:[\u0026#34;title\u0026#34;,\u0026#34;tags\u0026#34;] } ] }\u0026#39; 2. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®è¿½åŠ  1ã§ä½œæˆã—ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«ã„ãã¤ã‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ã¿ã‚‹ã€‚ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¯Microsoft Azure Japan Blogã®RSSã€‚ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¸ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰APIã¯Add, Update or Delete Documents (Azure Search Service REST APã‚’å‚ç…§ãã ã•ã„ã€‚\n#!/bin/sh SERVICE_NAME=\u0026#39;\u0026lt;Azure Search Service Name\u0026gt;\u0026#39; API_VER=\u0026#39;2015-02-28-Preview\u0026#39; ADMIN_KEY=\u0026#39;\u0026lt;API KEY\u0026gt;\u0026#39; CONTENT_TYPE=\u0026#39;application/json\u0026#39; INDEX_NAME=\u0026#39;articles\u0026#39; URL=\u0026#34;https://$SERVICE_NAME.search.windows.net/indexes/$INDEX_NAME/docs/index?api-version=$API_VER\u0026#34; curl \\ -H \u0026#34;Content-Type: $CONTENT_TYPE\u0026#34;\\ -H \u0026#34;api-key: $ADMIN_KEY\u0026#34;\\ -XPOST $URL -d\u0026#39;{ \u0026#34;value\u0026#34;: [ { \u0026#34;@search.action\u0026#34;: \u0026#34;upload\u0026#34;, \u0026#34;itemid\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;title\u0026#34;: \u0026#34;DocumentDB ã®æ–°ã—ã„ã‚¤ãƒ³ãƒãƒ¼ãƒˆ ã‚ªãƒ—ã‚·ãƒ§ãƒ³\u0026#34;, \u0026#34;content\u0026#34;:\u0026#34;ã“ã®ãƒã‚¹ãƒˆã¯ã€5 æœˆ 5 æ—¥ã«æŠ•ç¨¿ã•ã‚ŒãŸ New DocumentDB Import Options ã®ç¿»è¨³ã§ã™ã€‚ 4 æœˆ 8 æ—¥ã«ã€ã•ã¾ã–ã¾ãªã‚½ãƒ¼ã‚¹ã‹ã‚‰ DocumentDB ã«ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤\u0026gt;ãƒ³ãƒãƒ¼ãƒˆã§ãã‚‹ã‚ªãƒ¼ãƒ—ãƒ³ ã‚½ãƒ¼ã‚¹ ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã€Azure DocumentDB Data Migration Tool ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚ã“ã®ãƒ„ãƒ¼ãƒ«ã§ã¯ä¸»ã«æ¬¡ã®ã‚½ãƒ¼ã‚¹ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒ\u0026gt;ãƒ¼ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ JSON ãƒ•ã‚¡ã‚¤ãƒ« MongoDB SQL Server CSV ãƒ•ã‚¡ã‚¤ãƒ« DocumentDB ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ ãã—ã¦ä»Šå›ã€ã•ã‚‰ã« 2 ã¤ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚µãƒãƒ¼ãƒˆ\u0026gt;ã•ã‚Œã¾ã—ãŸã€‚Azure Table Storage ã¨ã€JSON/CSV/MongoDB ã®å„ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ ãƒ•ã‚¡ã‚¤ãƒ«ã® URL ã§ã™ã€‚ Azure Table Storage Azure Table Storage ã‹ã‚‰ DocumentDB ã¸ãƒ‡ ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚æ¥ç¶šæ–‡å­—åˆ—ã¨ãƒ†ãƒ¼ãƒ–ãƒ«åã‚’æŒ‡å®šã™ã‚‹ã ã‘ã§ã€Azure Table ã®ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒˆãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ãã¾ã™\u0026#34;, \u0026#34;permalink\u0026#34;:\u0026#34;http://blogs.msdn.com/b/windowsazurej/archive/2015/06/01/new-documentdb-import-options.aspx\u0026#34;, \u0026#34;tags\u0026#34;:[\u0026#34;azure\u0026#34;, \u0026#34;db\u0026#34;, \u0026#34;documentdb\u0026#34;, \u0026#34;nosql\u0026#34;], \u0026#34;postdate\u0026#34;:\u0026#34;2015-05-31T00:00:00Z\u0026#34; }, { \u0026#34;@search.action\u0026#34;: \u0026#34;upload\u0026#34;, \u0026#34;itemid\u0026#34;: \u0026#34;2\u0026#34;, \u0026#34;title\u0026#34;: \u0026#34;Application Insights ã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ç™ºè¡¨\u0026#34;, \u0026#34;content\u0026#34;:\u0026#34;ã“ã®ãƒã‚¹ãƒˆã¯ã€4 æœˆ 29 æ—¥ã«æŠ•ç¨¿ã•ã‚ŒãŸ Announcing Application Insights Public Preview ã®ç¿»è¨³ã§ã™ã€‚ å…ˆæ—¥ã® BUILD ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ (è‹±èª) ã§ã¯\u0026gt;ã•ã¾ã–ã¾ãªç™ºè¡¨ãŒã‚ã‚Šã¾ã—ãŸã€‚ Somasegar ã®ãƒ–ãƒ­ã‚° ã‚„ Brian Harry ã®ãƒ–ãƒ­ã‚° (è‹±èª) ã‚’ã”è¦§ã«ãªã£ãŸæ–¹ã¯ã”å­˜çŸ¥ã‹ã¨æ€ã„ã¾ã™ãŒã€ãƒã‚¤ã‚¯ãƒ­ã‚½ãƒ•ãƒˆã¯ Visual Studio Application Insights ã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ç™ºè¡¨ã—ã¾ã—ãŸã€‚ã“ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç®¡ç† ã¨ åˆ©ç”¨çŠ¶æ³åˆ†æ ã‚’çµ„ã¿åˆã‚ã›ã¦ã•\u0026gt;ã¾ã–ã¾ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åˆ†æã‚’è¡Œã„ã¾ã™ã€‚ Application Insights ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€å¯ç”¨æ€§ã€åˆ©ç”¨çŠ¶æ³ã‚’ã‚ã‚‰ã‚†ã‚‹è§’åº¦ã‹ã‚‰åŒ…æ‹¬çš„ã«æŠŠæ¡ã§ã ã‚‹é–‹ç™ºè€…å‘ã‘ã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚„è¨ºæ–­ã‚’è¿…é€Ÿã«å®Ÿæ–½ã§ãã‚‹ç›´è¦³çš„ãªãƒ“ãƒ¥ãƒ¼ã¨å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã¨åˆ©ç”¨çŠ¶æ³ã‚’ åˆ†æã—ã€åˆ†æçµæœã«å¿œã˜ã¦å°†æ¥ã®æŠ•è³‡ã®å„ªå…ˆé †ä½ã‚’æ±ºå®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™\u0026#34;, \u0026#34;permalink\u0026#34;:\u0026#34;http://blogs.msdn.com/b/windowsazurej/archive/2015/05/26/announcing-application-insights-public-preview.aspx\u0026#34;, \u0026#34;tags\u0026#34;:[\u0026#34;azure\u0026#34;, \u0026#34;applicationinsights\u0026#34;, \u0026#34;insights\u0026#34;, \u0026#34;monitoring\u0026#34;], \u0026#34;postdate\u0026#34;:\u0026#34;2015-05-25T00:00:00Z\u0026#34; }, { \u0026#34;@search.action\u0026#34;: \u0026#34;upload\u0026#34;, \u0026#34;itemid\u0026#34;: \u0026#34;4\u0026#34;, \u0026#34;title\u0026#34;: \u0026#34;DocumentDB SDK ã§ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åˆ†å‰²ã‚’ã‚µãƒãƒ¼ãƒˆ\u0026#34;, \u0026#34;content\u0026#34;:\u0026#34;ã“ã®ãƒã‚¹ãƒˆã¯ã€4 æœˆ 30 æ—¥ã«æŠ•ç¨¿ã•ã‚ŒãŸ Announcing partitioning support in the DocumentDB SDK ã®ç¿»è¨³ã§ ã™ã€‚ ãƒã‚¤ã‚¯ãƒ­ã‚½ãƒ•ãƒˆã¯ã€.NET SDK ã«æ–°ã—ã„æ©Ÿèƒ½ã‚’è¿½åŠ ã—ãŸã“ã¨ã‚’ç™ºè¡¨ã—ã¾ã—ãŸã€‚ã“ã®æ©Ÿèƒ½ã«ã‚ˆã£ã¦ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ ãƒ‡ãƒ¼\u0026gt;ã‚¿ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åˆ†å‰²æ©Ÿèƒ½ã‚’ Azure DocumentDB ã‚’ä½¿ç”¨ã—ã¦ç°¡å˜ã«é–‹ç™ºã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ DocumentDB ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ— ãƒ¬ãƒ“ãƒ¥ãƒ¼æœŸé–“ä¸­ã€ç§ãŸã¡ã¯é–‹ç™ºè€…ã®çš†æ§˜ãŒå€‹åˆ¥ã®å€¤ã‚„ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã®ç¯„å›²ã®ãƒ«ãƒƒã‚¯ã‚¢ãƒƒãƒ— ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½¿ç”¨ã—ãŸã‚Šã€ã‚ªãƒ–ã‚¸ã‚§\u0026gt;ã‚¯ãƒˆ ID ã‚’ä¸€è²«ã—ã¦ãƒãƒƒã‚·ãƒ¥åŒ–ã™ã‚‹ãªã©ã•ã¾ã–ã¾ãªç¨®é¡ã®é¡ä¼¼ã®ãƒ‡ãƒ¼ã‚¿ ã‚¢ã‚¯ã‚»ã‚¹å±¤ã‚’å®Ÿè£…ã—ã¦ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å…¨ä½“ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‘\u0026gt;ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åˆ†å‰²ã—ã¦ã„ãŸã®ã‚’ç›®ã«ã—ã¾ã—ãŸã€‚ã“ã‚Œã«ã¤ã„ã¦ã€çš†æ§˜ã‹ã‚‰ã€ŒSDK ã§ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åˆ†å‰²ã‚¿ã‚¹ã‚¯ ã‚’å®Ÿè¡Œã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼ ã‚¯ãƒ©ã‚¹ã‚„ãƒ˜ãƒ«ãƒ‘ãƒ¼ ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚Œã°ã€å¤§è¦æ¨¡ãª DocumentDB ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é–‹ç™ºã‚’ç°¡ç•¥åŒ–ã§ãã‚‹ ã®ã§ã¯ãªã„ã‹ã€ã¨ã„ã†æ˜å¿«ãªã”æŒ‡æ‘˜ã‚’ã„ãŸã ãã¾ã—ãŸã€‚ ãã“ã§ã€SDK å†…ã§ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åˆ†å‰²ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã«\u0026#34;, \u0026#34;permalink\u0026#34;:\u0026#34;http://blogs.msdn.com/b/windowsazurej/archive/2015/06/01/announcing-partitioning-support-in-the-documentdb-sdk.aspx\u0026#34;, \u0026#34;tags\u0026#34;:[\u0026#34;db\u0026#34;, \u0026#34;documentdb\u0026#34;, \u0026#34;nosql\u0026#34;], \u0026#34;postdate\u0026#34;:\u0026#34;2015-05-03T00:00:00Z\u0026#34; } ] }\u0026#39; 3. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ¤œç´¢ è¿½åŠ ã•ã‚ŒãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å®Ÿéš›ã«æ¤œç´¢ã—ã¦ã¿ã‚‹ã€‚ä¸‹è¨˜ã‚µãƒ³ãƒ—ãƒ«ã¯\u0026quot;DocumentDB\u0026quot;ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢ã‚’ã—ã¦ä¸Šä½ï¼•ã¤ã®çµæœã‚’å–å¾—ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã—ã¦itemidã¨titleãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ¤œç´¢APIã¯Search Documents (Azure Search Service REST API)ã‚’å‚ç…§ãã ã•ã„ã€‚\n#!/bin/sh SERVICE_NAME=\u0026#39;\u0026lt;Azure Search Service Name\u0026gt;\u0026#39; API_VER=\u0026#39;2015-02-28-Preview\u0026#39; ADMIN_KEY=\u0026#39;\u0026lt;API KEY\u0026gt;\u0026#39; CONTENT_TYPE=\u0026#39;application/json\u0026#39; INDEX_NAME=\u0026#39;articles\u0026#39; URL=\u0026#34;https://$SERVICE_NAME.search.windows.net/indexes/$INDEX_NAME/docs?api-version=$API_VER\u0026#34; curl -s\\ -H \u0026#34;Content-Type: $CONTENT_TYPE\u0026#34;\\ -H \u0026#34;api-key: $ADMIN_KEY\u0026#34;\\ -XGET $URL\\ \u0026#34;\u0026amp;search=DocumentDB\u0026#34;\\ \u0026#34;\u0026amp;\\$select=itemid,title\u0026#34;\\ \u0026#34;\u0026amp;\\$count=true\u0026#34;\\ \u0026#34;\u0026amp;\\$top=5\u0026#34; ãŸã ã—ä¸Šè¨˜ã®å®Ÿè¡Œçµæœã¯æ¬¡ã®ã‚ˆã†ã«æ—¥æœ¬èªãƒãƒ«ãƒãƒã‚¤ãƒˆæ–‡å­—ãŒã™ã¹ã¦\u0026quot;\\uHHHH\u0026quot;ã®ã‚ˆã†ãªãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ‰ã®16é€²è¡¨ç¾ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹ã€‚ã•ã‚‰ã«1è¡Œãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§ã‚ã‚‹ãŸã‚çµæœã®JSONæ§‹é€ ãŒéå¸¸ã«åˆ†ã‹ã‚Šã¥ã‚‰ãå¯èª­æ€§ã®ãªã„çŠ¶æ³ã¨ãªã£ã¦ã„ã‚‹ã€‚\n{\u0026#34;@odata.context\u0026#34;:\u0026#34;https://yoichikaecdemo0.search.windows.net/indexes(\u0026#39;articles\u0026#39;)/$metadata#docs(itemid,title)\u0026#34;,\u0026#34;@odata.count\u0026#34;:2,\u0026#34;value\u0026#34;:[{\u0026#34;@search.score\u0026#34;:1.1298637,\u0026#34;itemid\u0026#34;:\u0026#34;1\u0026#34;,\u0026#34;title\u0026#34;:\u0026#34;DocumentDB \\u306e\\u65b0\\u3057\\u3044\\u30a4\\u30f3\\u30dd\\u30fc\\u30c8 \\u30aa\\u30d7\\u30b7\\u30e7\\u30f3\u0026#34;},{\u0026#34;@search.score\u0026#34;:1.058217,\u0026#34;itemid\u0026#34;:\u0026#34;4\u0026#34;,\u0026#34;title\u0026#34;:\u0026#34;DocumentDB SDK \\u3067\\u30d1\\u30fc\\u30c6\\u30a3\\u30b7\\u30e7\\u30f3\\u5206\\u5272\\u3092\\u30b5\\u30dd\\u30fc\\u30c8\u0026#34;}]} ãã“ã§ä¸Šè¨˜ã®çµæœå‡ºåŠ›ã«å¯¾ã—ã¦ï¼ˆï¼‘ï¼‰JSONã‚’è¦‹ã‚„ã™ãPretifyã—ã¦ã€ï¼ˆï¼’ï¼‰16é€²æ•°è¡¨ç¾ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸUnicodeã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã™ã‚‹ï¼’ã¤ã®å‡¦ç†ã‚’åŠ ãˆãŸã„ã€‚ã¾ãšã¯ï¼ˆï¼‘ï¼‰JSON Pretifyã ãŒã€Python2.6ä»¥ä¸Šã®ç’°å¢ƒã§ã‚ã‚Œã°ã§ã€Œpython -mjson.toolã€ã‚³ãƒãƒ³ãƒ‰ã§JSONã‚’Pretifyå‡ºåŠ›ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚æ¬¡ã«ï¼ˆï¼’ï¼‰16é€²æ•°è¡¨ç¾ã®ãƒ‡ã‚³ãƒ¼ãƒ‰ã¯StackOverflowã§è¦‹ã¤ã‘ãŸãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã€Œperl -Xpne \u0026rsquo;s/\\u([0-9a-fA-F]{4})/chr(hex($1))/eg\u0026rsquo;ã€ã‚’ä½¿ç”¨ã™ã‚‹ã€‚å…ˆã®cUrlã‚³ãƒãƒ³ãƒ‰ã«ã“ã®ï¼’ã¤ã®å‡¦ç†ã‚’ãƒ‘ã‚¤ãƒ—ã§ã¤ãªã’ã¦åŠ ãˆã¦ã¿ãŸã®ãŒä¸‹è¨˜ã‚³ãƒ¼ãƒ‰ã€‚\n#!/bin/sh SERVICE_NAME=\u0026#39;\u0026lt;Azure Search Service Name\u0026gt;\u0026#39; API_VER=\u0026#39;2015-02-28-Preview\u0026#39; ADMIN_KEY=\u0026#39;\u0026lt;API KEY\u0026gt;\u0026#39; CONTENT_TYPE=\u0026#39;application/json\u0026#39; INDEX_NAME=\u0026#39;articles\u0026#39; URL=\u0026#34;https://$SERVICE_NAME.search.windows.net/indexes/$INDEX_NAME/docs?api-version=$API_VER\u0026#34; { curl -s\\ -H \u0026#34;Content-Type: $CONTENT_TYPE\u0026#34;\\ -H \u0026#34;api-key: $ADMIN_KEY\u0026#34;\\ -XGET $URL\\ \u0026#34;\u0026amp;search=DocumentDB\u0026#34;\\ \u0026#34;\u0026amp;\\$select=itemid,title\u0026#34;\\ \u0026#34;\u0026amp;\\$count=true\u0026#34;\\ \u0026#34;\u0026amp;\\$top=5\u0026#34; } | python -mjson.tool| perl -Xpne \u0026#39;s/\\\\u([0-9a-fA-F]{4})/chr(hex($1))/eg\u0026#39; ä»¥ä¸‹ã®å®Ÿè¡Œçµæœã®ã¨ãŠã‚Šç„¡äº‹JSON Pretifyï¼‹ãƒ‡ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸå‡ºåŠ›ã¨ãªã£ãŸã€‚\n{ \u0026#34;@odata.context\u0026#34;: \u0026#34;https://yoichikaecdemo0.search.windows.net/indexes(\u0026#39;articles\u0026#39;)/$metadata#docs(itemid,title)\u0026#34;, \u0026#34;@odata.count\u0026#34;: 2, \u0026#34;value\u0026#34;: [ { \u0026#34;@search.score\u0026#34;: 1.1298637, \u0026#34;itemid\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;title\u0026#34;: \u0026#34;DocumentDB ã®æ–°ã—ã„ã‚¤ãƒ³ãƒãƒ¼ãƒˆ ã‚ªãƒ—ã‚·ãƒ§ãƒ³\u0026#34; }, { \u0026#34;@search.score\u0026#34;: 1.058217, \u0026#34;itemid\u0026#34;: \u0026#34;4\u0026#34;, \u0026#34;title\u0026#34;: \u0026#34;DocumentDB SDK ã§ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åˆ†å‰²ã‚’ã‚µãƒãƒ¼ãƒˆ\u0026#34; } ] } REST UIãƒ„ãƒ¼ãƒ« ä»Šå›cUrlã‚³ãƒãƒ³ãƒ‰ã§ã®ãŠæ‰‹è»½ã«APIå®Ÿè¡Œã‚’ç´¹ä»‹ã—ãŸãŒRESTç³»å‡¦ç†ã®å®Ÿè¡Œã¨ã„ã†ã“ã¨ã§ã‚ã‚Œã°Fiddlerã‚„Postmanã®ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã®ã»ã†ãŒã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ãƒ»ãƒ‡ã‚³ãƒ¼ãƒ‰ã€JSON/XMLã®æ•´å½¢è¡¨ç¤ºãªã©é¢å€’ãªå‡¦ç†ã‚’è‡ªå‹•ã§ã‚„ã£ã¦ãã‚Œã‚‹åˆ†æ¥½ã ã£ãŸã‚Šã™ã‚‹ã€‚ç‰¹ã«Postmanã¯ãŠã™ã™ã‚ã€‚\nAzure Search ã§ Chrome Postman ã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³• Azure Search ã§ Telerik Fiddler ã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³• ","permalink":"https://unofficialism.info/posts/getting-started-azure-search-with-curl/","summary":"cUrlã¯UNIX/Linuxç³»ã§ã¯æœ‰åãªURLã‚’ä½¿ã£ãŸãƒ‡ãƒ¼ã‚¿é€å—ä¿¡ã‚³ãƒãƒ³ãƒ‰ã§æ‰‹è»½ã«RESTç³»å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã«ã¨ã¦ã‚‚é‡å®ã—ã¦ã„ã‚‹ã€‚ãã‚“ãªcUrlã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦Azure Searchã‚’ãŠæ‰‹è»½ã«ä½¿ã£ã¦ã¿ã‚ˆã†ã¨ã„ã†ãŠè©±ã€‚\nã¯ã˜ã‚ã« ã¾ã ã®äººã¯Azureãƒãƒ¼ã‚¿ãƒ«ã‚ˆã‚ŠAzure Searchã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚ã€Œãƒãƒ¼ã‚¿ãƒ«ã§ã® Azure Search ã‚µãƒ¼ãƒ“ã‚¹ã®ä½œæˆã€ã«å„ªã—ãæ‰‹é †ãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ã”å‚è€ƒã«ã€‚æ–™é‡‘ãƒ—ãƒ©ãƒ³ã¯ç„¡æ–™ã¨æ¨™æº–ãƒ—ãƒ©ãƒ³ãŒã‚ã‚‹ãŒãƒ†ã‚¹ãƒˆã§ã‚ã‚Œã°ç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ååˆ†ã€‚ã¾ãšã¯APIã‚­ãƒ¼ã¾ã§å–å¾—ãã ã•ã„ã€‚APIå®Ÿè¡Œã®ãŸã‚ã«ã¯APIã‚­ãƒ¼ãŒå¿…è¦ã€‚\ncURLã§Search Service REST APIã‚’å®Ÿè¡Œ Search Service REST APIã®ä¸­ã‹ã‚‰ã„ãã¤ã‹ä»£è¡¨çš„ãªAPIã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã¦cUrlã§ã‚¯ã‚¨ãƒªã‚’çµ„ã¿ç«‹ã¦ã¦ã¿ã‚‹ã€‚ã“ã“ã§ã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ–°è¦ä½œæˆã€ãã“ã«ã„ãã¤ã‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ã€ãã—ã¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ¤œç´¢ã™ã‚‹ãƒ»ãƒ»ã¨ã„ã£ãŸåŸºæœ¬çš„ãªã‚·ãƒŠãƒªã‚ªã‚’å®Ÿè¡Œã™ã‚‹ã€‚ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã¯cUrlã®-Hã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒ˜ãƒƒãƒ€å®šç¾©ã€-Xã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§HTTPãƒ¡ã‚½ãƒƒãƒ‰æŒ‡å®šã€-dã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’æŒ‡å®šã™ã‚‹ãƒ»ãƒ»ãƒ»ã¨ã„ã£ãŸã¨ã“ã‚ã€‚å°šã€ä¸‹è¨˜ã‚µãƒ³ãƒ—ãƒ«ã§ã¯ç¾æ™‚ç‚¹ï¼ˆ2015-06-05ï¼‰ã§æœ€æ–°ã®APIãƒãƒ¼ã‚¸ãƒ§ãƒ³2015-02-28-Previewã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚\n1. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ–°è¦ä½œæˆ articlesã¨ã„ã†åå‰ã®ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚’æ ¼ç´ã™ã‚‹ãŸã‚ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½œæˆã™ã‚‹ã€‚ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç”Ÿæˆã«ã¯Create Index (Azure Search Service REST API)ã‚’åˆ©ç”¨ã™ã‚‹ã€‚\n#!/bin/sh SERVICE_NAME=\u0026#39;\u0026lt;Azure Search Service Name\u0026gt;\u0026#39; API_VER=\u0026#39;2015-02-28-Preview\u0026#39; ADMIN_KEY=\u0026#39;\u0026lt;API KEY\u0026gt;\u0026#39; CONTENT_TYPE=\u0026#39;application/json\u0026#39; URL=\u0026#34;https://$SERVICE_NAME.search.windows.net/indexes?api-version=$API_VER\u0026#34; curl -s\\ -H \u0026#34;Content-Type: $CONTENT_TYPE\u0026#34;\\ -H \u0026#34;api-key: $ADMIN_KEY\u0026#34;\\ -XPOST $URL -d\u0026#39;{ \u0026#34;name\u0026#34;: \u0026#34;articles\u0026#34;, \u0026#34;fields\u0026#34;: [ { \u0026#34;name\u0026#34;:\u0026#34;itemid\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;key\u0026#34;: true, \u0026#34;searchable\u0026#34;: false }, { \u0026#34;name\u0026#34;:\u0026#34;title\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;filterable\u0026#34;:false, \u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false}, { \u0026#34;name\u0026#34;:\u0026#34;content\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;Edm.String\u0026#34;, \u0026#34;filterable\u0026#34;:false, \u0026#34;sortable\u0026#34;:false, \u0026#34;facetable\u0026#34;:false, \u0026#34;analyzer\u0026#34;:\u0026#34;ja.","title":"cUrlã‚³ãƒãƒ³ãƒ‰ã§å§‹ã‚ã‚‹ç°¡å˜Azure Search"}]